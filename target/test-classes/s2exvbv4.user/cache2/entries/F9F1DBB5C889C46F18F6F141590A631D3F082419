/* Last Update: Mon, 11 Nov 2019 17:51:28 GMT */
var segNamespace="Segmentify";function waitSegmentifyAndjQuery(){window._SgmntfY_&&window._SgmntfY_._getJq()?(window.segJquery=window._SgmntfY_._getJq(),segJquery(document).ready(function(){document.location.href.indexOf("qamobile.n11.com")<0&&document.location.href.indexOf("qaurun.n11")<0&&SegmentifyIntegration(window.segJquery).init()})):setTimeout(waitSegmentifyAndjQuery,100)}window.SegmentifyTrackingObject=segNamespace,window[segNamespace]=window[segNamespace]||function(){(window[segNamespace].q=window[segNamespace].q||[]).push(arguments)},window[segNamespace].config={segmentifyApiUrl:"//dcetr4.segmentify.com/",domain:"n11.com",constants:{retryLimit:0}},Segmentify("apikey","4c90b154-53f1-4762-9177-f535de5c4e42");var SegmentifyIntegration=function(e){var t=function(e,t){Segmentify("view:page",{category:e,subCategory:t})},r=function(e){Segmentify("view:product",e)},a=function(e){Segmentify("checkout:basket",e)},i=function(e){Segmentify("checkout:purchase",e)},n=function(e){Segmentify("basket:add",e)},o=function(e){Segmentify("basket:remove",e)},s=function(e,t,r){try{if(!e||""==e||!t)return null;for(var a=null,i=0;i<t.length;i++){var n=t[i];if(n.hasOwnProperty(e)&&!r)return n;n.hasOwnProperty(e)&&r&&(a=n)}return a}catch(e){return null}},c=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},d={category:"",subCategory:"",categories:[]},p={"All Pages":function(){""!==_SgmntfY_._getQueryParameter("gclid")&&_SgmntfY_._storePersistentData("seg_tracking_gclid",_SgmntfY_._getSessionId());var e=s("loginStatus",dataLayer),r=document.location.href;(r.indexOf("https://www.n11.com/siparis/iade/yeni/")>=0||r.indexOf("https://www.n11.com/hesabim/siparislerim?notification=true")>=0||r.indexOf("https://www.n11.com/hesabim/siparislerim?notification=false")>=0||r.indexOf("https://www.n11.com/hesabim/iptal-degisim-iade")>=0)&&Segmentify("event:custom",{type:"siparis_iade_anketi",params:{category:"siparis_iade_anketi"}});var a={isLogin:!1,isRegistered:!1,custom:{},segments:[]};""!=_SgmntfY_._getPersistentData("sgf_coupon")&&(a.params={couponId:_SgmntfY_._getPersistentData("sgf_coupon")}),"login"==e.loginStatus?a.isLogin=!0:a.isLogin="false","member"==e.isMember&&(a.isRegistered=!0),e.bId&&(a.username=e.bId.toString()),e.birthYear&&"N/A"!=e.birthYear&&(a.age=(new Date).getFullYear()-e.birthYear),e.gender&&(a.gender=e.gender),e.bEmail&&(a.email=e.bEmail),e.sgm&&(a.custom={sgm:e.sgm}),"0"==e.bPerm&&(a.segments=["Campaign Not Allowed"]),"1"==e.bPerm&&(a.segments=["Campaign Allowed"]);var i="";window.customerSegmentLoaded=function(){if("undefined"!=typeof dataLayer)for(var e=0;e<dataLayer.length;++e)if(void 0!==dataLayer[e].sgm&&"undefined"!=dataLayer[e].sgm){i=dataLayer[e].sgm;break}getSegments()};var p=[];p[0]="ACTIONMAN",p[1]="PARENTSWITHBABIES",p[2]="ADULT",p[3]="AUTOMOBILE_FANCIER",p[4]="GAMER",p[5]="MYKITCHEN",p[6]="FASHIONLOVER_SHOES",p[7]="STATIONARY_OFFICESUPPLIES",p[8]="KIDPARENT",p[9]="FASHIONLOVER_CLOTHES",p[10]="WELL_GROOMED",p[11]="SPORTIVE",p[12]="FASHIONLOVER_ACCESSORIES",p[13]="BIG_CHANGES",p[14]="BIG_SIZE",p[15]="HOME_CLEAN",p[16]="PET_OWNER",p[17]="HOMETEXTILE_PRODCUT",p[18]="MOTORCYLE_FANCIER",p[19]="REPAIRMAN",p[20]="SMARTPHONE_ADDICT",p[21]="ELECTRONIC_CONSUMERS",p[22]="MUSICIAN",p[23]="PHOTOGRAPHER",p[24]="BOOKWORM_HOBBIEST",p[25]="TRAVELER",p[26]="MARKET_CUSTOMER",p[27]="ORGANIZATION",p[28]="CONSERVATIVE";var u=0,g=setInterval(function(){10==u?clearInterval(g):"undefined"!=typeof dataLayer?(customerSegmentLoaded(),clearInterval(g)):++u},100);window.getSegments=function(){i?"undefined"!=typeof Storage&&localStorage.setItem("__sgf_userdata",i):i=localStorage.getItem("__sgf_userdata");try{var e=i.split(","),r=a.segments;for(var n in e)if(e.hasOwnProperty(n)){var o=e[n].split("="),c=parseInt(o[0]);if(c>=7&&c<=35)parseInt(o[1])>=50&&r.push(p[c-7])}if(r)(u=s("loginStatus",dataLayer)).bId&&Segmentify("userid",u.bId.toString()),Segmentify("user:update",a),t(d.category,d.subCategory)}catch(e){var u;(u=s("loginStatus",dataLayer)).bId&&Segmentify("userid",u.bId.toString()),Segmentify("user:update",a),t(d.category,d.subCategory)}},window.jQuery(document).ajaxComplete(function(e,t,r){if(r&&r.url&&(r.url.indexOf("/sepet/ekle")>=0||r.url.indexOf("/sepet/hemenal")>=0)&&200==t.status&&0==t.responseJSON.statusCode){var a="&"+r.data,i=c("quantity",a),s=c("productId",a);n({quantity:i,productId:s,nextPage:!1})}if(r&&r.url&&r.url.indexOf("/sepet/guncelle")>=0&&200==t.status){var d=dataLayer[dataLayer.length-1];if("decreaseCount"==d.event)for(var p=0;p<d.decreasedProducts.length;p++){var u=d.decreasedProducts[p];o({quantity:u.dQuantity,productId:u.dId,nextPage:!1})}else if("increaseCount"==d.event)for(p=0;p<d.increasedProducts.length;p++){u=d.increasedProducts[p];n({quantity:u.iQuantity,productId:u.iId,nextPage:!1})}}if(r&&r.url&&r.url.indexOf("/sepet/sil")>=0&&200==t.status){a="&"+r.data,i=c("quantity",a),s=c("productId",a);o({quantity:i,productId:s,nextPage:!1})}});try{"Chrome"===window.bowser.name&&parseFloat(window.bowser.version)<30?Segmentify("event:custom",{type:"chrome_version",nextPage:"false"}):"Internet Explorer"===window.bowser.name&&parseFloat(window.bowser.version)<11?Segmentify("event:custom",{type:"ie_version",nextPage:"false"}):"Firefox"===window.bowser.name&&parseFloat(window.bowser.version)<27?Segmentify("event:custom",{type:"firefox_version",nextPage:"false"}):"Safari"===window.bowser.name&&parseFloat(window.bowser.version)<7?Segmentify("event:custom",{type:"safari_version",nextPage:"false"}):"Opera"===window.bowser.name&&parseFloat(window.bowser.version)<17?Segmentify("event:custom",{type:"opera_version",nextPage:"false"}):"Yandex Browser"===window.bowser.name&&parseFloat(window.bowser.version)<16.3&&Segmentify("event:custom",{type:"yandex_version",nextPage:"false"})}catch(e){Segmentify("event:custom",{type:"error_handler",params:{errorMessage:e.toString()}})}},"Promotion Detail":function(){s("pageType",dataLayer)},"Product Detail":function(){var t="PC"!=window._SgmntfY_._variables.ua.type,a=s("pageType",dataLayer),i={};i.brand=a.pBrand||"",i.title=a.title||"",i.productId=a.pId||"",i.image=a.pImageUrl||"",i.inStock="1"==a.pIsInStock,i.productUrl=a.pURL||"",i.categories=[],i.params={stockCount:e("input.stockCount:first").val()||"",imageCount:e(".proImgHolder .thumbsHolder > ul > li").length||e(".proImgHolder .thumbsHolder  ul.slidesjs-slide > li").length||"",commentCount:parseInt(e(".reviewNum").text()),storeScore:e(".sellers-products-shown .shopPoint .point").text().replace("%",""),sellerId:e(".sellerId").val()},i.categories.indexOf(a.pCatMain)<0&&""!=a.pCatMain&&i.categories.push(a.pCatMain),i.categories.indexOf(a.pCat1)<0&&""!=a.pCat1&&i.categories.push(a.pCat1),i.categories.indexOf(a.pCat2)<0&&""!=a.pCat2&&i.categories.push(a.pCat2),i.categories.indexOf(a.pCat3)<0&&""!=a.pCat3&&i.categories.push(a.pCat3),i.categories.indexOf(a.pCat4)<0&&""!=a.pCat4&&i.categories.push(a.pCat4),e(".dailyDealBadge:first").length&&(i.categories=["Günün Fırsatı"]),e(".data[itemprop='color']").length&&(i.colors=[e(".data[itemprop='color']").eq(0).text()]),parseFloat(a.pOriginalPrice)==parseFloat(a.pDiscountedPrice)?i.price=parseFloat(a.pOriginalPrice).toFixed(2)||0:parseFloat(a.pOriginalPrice)>parseFloat(a.pDiscountedPrice)&&(i.price=parseFloat(a.pDiscountedPrice).toFixed(2)||0,i.oldPrice=parseFloat(a.pOriginalPrice).toFixed(2)||""),i.noUpdate=t,i.source=function(){if(document.URL||document.referrer){if(_SgmntfY_._getQueryParameter("gclid").length)return"ADWORDS";var e=_SgmntfY_._getQueryParameter("utm_source");if("n11_mail"===e)return"EMAIL";if(e.indexOf("bilio")>-1||e.indexOf("ucuzu")>-1||e.indexOf("cimri")>-1||e.indexOf("akakce")>-1)return"LISTING";if(0===e.lastIndexOf("Aff_",0)||0===e.lastIndexOf("aff_",0))return"AFFILIATE";if(e.indexOf("sociomantic")>-1||e.indexOf("criteo")>-1||e.indexOf("rtbhouse")>-1||e.indexOf("rtg_")>-1)return"RETARGETING";if("social"===_SgmntfY_._getQueryParameter("utm_medium"))return"SOCIAL";var t=document.referrer.replace("https://","").replace("http://","");if(-1!=(t=t.substring(0,t.indexOf("/"))).indexOf("facebook")||-1!=t.indexOf("twitter")||-1!=t.indexOf("t.co")||-1!=t.indexOf("instagram")||-1!=t.indexOf("pinterest"))return"SOCIAL"}return"REFERRAL"}(),i.category=i.categories.join(" > "),r(i)},"Basket Page":function(){var e=s("ecommerce",dataLayer)||"",t="",r=[],i=!0;if(e){t=e.basketTotal;for(var n=e.basketProducts.length-1;n>=0;n--){var o=e.basketProducts[n];r.push({quantity:o.pQuantity,productId:o.pId,price:parseFloat(o.pDiscountedPrice/o.pQuantity).toFixed(2)||""}),"NaN"!==e.basketProducts[n].pOriginalPrice.toString()&&"0"!==e.basketProducts[n].pQuantity.toString()||(i=!1)}i&&a({totalPrice:t,productList:r})}},"Order Success":function(){var e=s("ecommerce",dataLayer)||"",t="",r=[];if(e){var a=e.transactionId||"";t=e.transactionTotal;for(var n=0;n<e.transactionProducts.length;n++){var o=e.transactionProducts[n];r.push({quantity:o.pQuantity,productId:o.pId,price:parseFloat(o.pDiscountedPrice/o.pQuantity).toFixed(2)||""})}var c={orderNo:a,totalPrice:t,productList:r};parseFloat(t)>0&&i(c)}}};return{init:function(){!function(){try{var t="",r="";if((a=s("pageType",dataLayer))&&(t=a.pageType||"",r=a.pageName||""),"home"==t)return void(d.category="Home Page");if("other"==t&&"promotion-detail"==r){d.category="Promotion Detail";var a=s("pageType",dataLayer),i=s("ecommerce",dataLayer);try{var n=a.promoImage.split("/").slice(-1)[0].split(".")[0],o=a.promoStartDate.split("-");o=o.reverse().join("-");var c=a.promoEndDate.split("-");c=c.reverse().join("-");var p=PromotionifyIntegration(e),u={code:n,title:a.promoName,url:a.promoUrl,mUrl:a.promoUrl,image:a.promoImage,startDate:o,endDate:c},g=i.ecommerce.impressions[0].category.split("/").join(" > ");p.relationship(g,"category",u)}catch(e){window.promotionDetailErr=e}return}if("other"==t&&"promotion-list"==r){if(d.category="Promotion List","PC"===_SgmntfY_._variables.ua.type){var l=e(".panelContent");segTilePromotionifyHandler(l,".imgBoxInsetShadow")}return}if("other"==t&&"my-account"==r)return void(d.category="Orders List");if("category"==t)return d.category="Product Category",a=s("pageType",dataLayer),d.categories.indexOf(a.pCatMain)<0&&""!=a.pCatMain&&d.categories.push(a.pCatMain),d.categories.indexOf(a.pCat1)<0&&""!=a.pCat1&&d.categories.push(a.pCat1),d.categories.indexOf(a.pCat2)<0&&""!=a.pCat2&&d.categories.push(a.pCat2),d.categories.indexOf(a.pCat3)<0&&""!=a.pCat3&&d.categories.push(a.pCat3),d.categories.indexOf(a.pCat4)<0&&""!=a.pCat4&&d.categories.push(a.pCat4),void(d.subCategory=d.categories.join(" > ")||"");if("product"==t)return d.category="Product Detail",a=s("pageType",dataLayer),d.categories.indexOf(a.pCatMain)<0&&""!=a.pCatMain&&d.categories.push(a.pCatMain),d.categories.indexOf(a.pCat1)<0&&""!=a.pCat1&&d.categories.push(a.pCat1),d.categories.indexOf(a.pCat2)<0&&""!=a.pCat2&&d.categories.push(a.pCat2),d.categories.indexOf(a.pCat3)<0&&""!=a.pCat3&&d.categories.push(a.pCat3),d.categories.indexOf(a.pCat4)<0&&""!=a.pCat4&&d.categories.push(a.pCat4),void(d.subCategory=d.categories.join(" > ")||"");if("cart"==t)return void(d.category="Basket Page");if("searchresults"==t){d.category="Product Search Result",d.subCategory="string"==typeof segSearchCategory?segSearchCategory:"";var f=s("gaEventCategory",dataLayer);return void(f&&"0 Search Result"===f.gaEventCategory&&(d.subCategory="Empty Search"))}if(e("#error404").length)return void(d.category="404 Page");"purchase"==t&&(d.category="Order Success")}catch(e){window.segErr=e}}(),function(e){try{e&&p.hasOwnProperty(e)&&p[e](),p["All Pages"]()}catch(e){window.segErr=e}}(d.category)}}};waitSegmentifyAndjQuery();try{window._formatNameN11=function(e){var t="",r="",a=!1,i=!1,n=e.split(" ");jQuery.each(n,function(e,n){!a&&t.length+n.length<20?t+=n+" ":!i&&r.length+n.length<17?(a=!0,r+=n+" "):i=!0});var o=(t+"<br>"+r).trim();return o.replace("<br>","")!==e&&(o+="..."),o},window._resizeImageN11=function(e){var t=e;return t.indexOf("/1024/")>=0?t=t.replace("/1024/","/70/"):t.indexOf("/450/")>=0&&(t=t.replace("/450/","/70/")),t},window._formatPriceN11=function(e){try{var t=e.toString().split("."),r=t[0].replace(/(\d)(?=(\d{3})+$)/g,"$1.")+",";return r+=((t[1]||"00").length>1?t[1]||"00":t[1]+"0")+" TL"}catch(e){}},window._todaysDealN11=function(e,t){if(t.length){var r=t[0];if("undefined"!=typeof dataLayer&&dataLayer[0].pId===r.productId)return;if(r.categories.indexOf("Günün Fırsatı")<0)return;var a="";r.oldPrice&&(a=Math.ceil((r.oldPrice-r.price)/r.oldPrice*100));var i=r.params||{},n=jQuery("<div/>",{class:"sgf-todaysdeal"});n.append(jQuery("<div/>",{class:"sgf-todaysdeal-header"}).append(jQuery("<span/>",{text:e}))).append(jQuery("<div/>",{class:"sgf-todaysdeal-firstrow"}).append(jQuery("<a/>",{href:r.url,title:r.name,"data-id":r.productId,itemprop:"url"}).append(jQuery("<img/>",{src:_resizeImageN11(r.image)})).append(jQuery("<h2/>",{class:"sgf-product-name",itemprop:"name",html:_formatNameN11(r.name)})).append(jQuery("<span/>",{class:"sgf-stock-info",html:'<i class="icon iconWarning"></i>Stokta kalan <strong>son '+i.stockCount+" ürün!</strong>"})))).append(jQuery("<div/>",{class:"sgf-todaysdeal-secondrow"}).append(jQuery("<div/>",{class:"sgf-discount"}).append(jQuery("<span/>",{text:"%"+a})).append(jQuery("<span/>",{text:"İNDİRİM"}))).append(jQuery("<div/>",{class:"sgf-price"}).append(jQuery("<div/>",{class:"oldPrice",text:_formatPriceN11(r.oldPrice)})).append(jQuery("<div/>",{class:"newPrice",text:_formatPriceN11(r.price),itemProp:"price"}))).append(jQuery("<div/>",{class:"sgf-btnholder"}).append(jQuery("<a/>",{href:r.url,class:"btn btnBlack",text:"Ürüne Git",title:"Ürüne Git"}))));var o={minHeight:10,width:328,height:177,autoSize:!1,autoWidth:!1,autoHeight:!1,topRatio:1,leftRatio:.94,closeBtn:!0,content:n,wrapCSS:"fancybox-seamless",helpers:{overlay:null},beforeShow:function(){jQuery(".fancybox-segmentify .fancybox-skin").attr("style","padding: 0!important; border: 1px solid #dedede!important"),jQuery(".fancybox-segmentify .fancybox-close").attr("style","top: 5px!important")},beforeClose:function(){var e="_sgm_campaign".replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(r.url),a=null===t?"":decodeURIComponent(t[1].replace(/\+/g," "));Segmentify("event:interaction",{type:"close",interactionId:"blank_intentionally",instanceId:a})},afterClose:function(){jQuery(".fancybox-segmentify").remove()}};_SgmntfY_._getJq().fancybox(o),setTimeout(function(){jQuery(".fancybox-segmentify .fancybox-close").attr("style","top: 5px!important")},500)}}}catch(e){window.segAddjsErr=e}function PromotionifyIntegration(e){var t=function(e){Segmentify("impression:promotion",e)},r=function(e){Segmentify("view:promotion",e)};window.checkNewPromotions=setInterval(function(){e(".seg-promotion-wrapper:not(.impressed)").each(function(){if(e(this).addClass("impressed"),e(this).find(".slick-slide").length>0){SliderPromotionifyHandler(e(this),".slick-slide:not(.slick-cloned)")}else{segTilePromotionifyHandler(e(this),".mt10")}})},2500);var a={propertiesHasValue:function(e,t){for(var r in e)if(!e.hasOwnProperty(r)||!e[r]&&(t||[]).indexOf(r)<0)return!1;return!0},isScrolledIntoView:function(t){try{var r=e(t),a=e(window),i=a.scrollTop(),n=i+a.height(),o=r.offset().top;return o+Math.floor(r.height()/2)<=n&&o>=i}catch(e){return window.bannerifyErr=e,!1}},makeUrlAbsolute:function(e){var t=document.location.origin;return"string"==typeof e&&e?0==e.indexOf("/")&&e.indexOf("//")<0?t+e:0==e.indexOf("//")?document.location.protocol+e:0!=e.indexOf("/")&&0!=e.indexOf("//")&&e.indexOf(t)<0&&e.indexOf("http://")<0&&e.indexOf("https://")<0?t+"/"+e:e:""},sendPromotionImpression:function(r,i){try{window.paramsPS=r;var n=[];setInterval(function(){if(void 0!==r)for(var o=0;o<r.banners.length;o++){var s=r.banners[o];if(a.isScrolledIntoView(e(s.banner))&&"none"!=e(s.banner).css("display")&&0!=e(s.banner).css("opacity")&&"hidden"!=e(s.banner).css("visibility")&&n.indexOf(s.code)<0)if(!1!==i&&s.banner.hasClass(i)){var c={code:s.code};t(c),n.push(s.code)}else if(!1===i){c={code:s.code};t(c),n.push(s.code)}}},250)}catch(e){window.promotionErr=e}},promotionRelationship:function(e,i,n){try{setTimeout(function(){if(e&&i)if(window._SgmntfY_){var o={};"product"==i.toLowerCase()?o.productIds=e:"category"==i.toLowerCase()?o.categories=e:"label"==i.toLowerCase()?o.labels=e:"brand"==i.toLowerCase()&&(o.brands=e),void 0!==n.code&&(o.code=n.code),void 0!==n.title&&(o.title=n.title),void 0!==n.url&&(o.url=n.url),void 0!==n.mUrl&&(o.mUrl=n.mUrl),void 0!==n.image&&(o.image=n.image),void 0!==n.startDate&&(o.startDate=n.startDate),void 0!==n.endDate&&(o.endDate=n.endDate),void 0!==n.publishTime&&(o.publishTime=n.publishTime),t(o,!1),r(o),_SgmntfY_._storePersistentData("_sgf_clicked_promotions","",1)}else a.promotionRelationship(e,i)},150)}catch(e){window.promotionErr=e}}};return{impression:a.sendPromotionImpression,relationship:a.promotionRelationship}}function segTilePromotionifyHandler(e,t){try{var r=jQuery(e);if(!r.length||!e)return;var a=r.find(t),i=PromotionifyIntegration(jQuery),n={banners:[]};jQuery.each(a,function(e,t){var r=jQuery(t),a=r.find("img").first();r.click(function(){var e={code:jQuery(t).find("img").attr("src").split("/").slice(-1)[0].split(".")[0]},r=JSON.stringify(e);_SgmntfY_._storePersistentData("_sgf_clicked_promotions",r,1)});var i={banner:r,code:(a.attr("src").split("/").slice(-1)[0].split(".")[0]||"").trim()};i.title&&n.banners.push(i)}),n.banners.length>0&&i.impression(n,!1)}catch(e){window.promotionErr=e}}function SliderPromotionifyHandler(e,t){try{var r=jQuery(e);if(!r.length||!e)return;var a=r.find(t),i=PromotionifyIntegration(jQuery);window.promotions={banners:[]},jQuery.each(a,function(e,t){var r=jQuery(t),a=r.find("img").first();r.find("a").first().click(function(){var e={code:jQuery(t).find("img").attr("src").split("/").slice(-1)[0].split(".")[0]},r=JSON.stringify(e);_SgmntfY_._storePersistentData("_sgf_clicked_promotions",r,1)});var i={banner:r,code:(a.attr("src").split("/").slice(-1)[0].split(".")[0]||"").trim()};i.title&&promotions.banners.push(i)}),promotions.banners.length>0&&i.impression(promotions,"slick-active")}catch(e){window.promotionErr=e}}
/* DateTime: 2019-08-13, 06:51:21 */
function initializeMustache(Y){var t=Object.prototype.toString,b=Array.isArray||function(e){return"[object Array]"===t.call(e)};function m(e){return"function"==typeof e}function E(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}var n=RegExp.prototype.test;var a=/\S/;function I(e){return!function(e,t){return n.call(e,t)}(a,e)}var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var O=/\s*/,C=/\s+/,w=/\s*=/,A=/\s*\}/,T=/#|\^|\/|>|\{|&|=|!/;function L(e){this.string=e,this.tail=e,this.pos=0}function i(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function e(){this.cache={}}L.prototype.eos=function(){return""===this.tail},L.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},L.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},i.prototype.push=function(e){return new i(e,this)},i.prototype.lookup=function(e){var t,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{for(var a,r,i=this,s=!1;i;){if(0<e.indexOf("."))for(t=i.view,a=e.split("."),r=0;null!=t&&r<a.length;)r===a.length-1&&(s=o(t,a[r])),t=t[a[r++]];else t=i.view[e],s=o(i.view,e);if(s)break;i=i.parent}n[e]=t}return m(t)&&(t=t.call(this.view)),t},e.prototype.clearCache=function(){this.cache={}},e.prototype.parse=function(e,t){var n=this.cache,a=n[e];return null==a&&(a=n[e]=function(e,t){if(!e)return[];var n,a,r,i=[],s=[],o=[],c=!1,m=!1;function _(){if(c&&!m)for(;o.length;)delete s[o.pop()];else o=[];m=c=!1}function g(e){if("string"==typeof e&&(e=e.split(C,2)),!b(e)||2!==e.length)throw new Error("Invalid tags: "+e);n=new RegExp(E(e[0])+"\\s*"),a=new RegExp("\\s*"+E(e[1])),r=new RegExp("\\s*"+E("}"+e[1]))}g(t||Y.tags);for(var d,f,l,u,p,S,v=new L(e);!v.eos();){if(d=v.pos,l=v.scanUntil(n))for(var y=0,h=l.length;y<h;++y)I(u=l.charAt(y))?o.push(s.length):m=!0,s.push(["text",u,d,d+1]),d+=1,"\n"===u&&_();if(!v.scan(n))break;if(c=!0,f=v.scan(T)||"name",v.scan(O),"="===f?(l=v.scanUntil(w),v.scan(w),v.scanUntil(a)):"{"===f?(l=v.scanUntil(r),v.scan(A),v.scanUntil(a),f="&"):l=v.scanUntil(a),!v.scan(a))throw new Error("Unclosed tag at "+v.pos);if(p=[f,l,d,v.pos],s.push(p),"#"===f||"^"===f)i.push(p);else if("/"===f){if(!(S=i.pop()))throw new Error('Unopened section "'+l+'" at '+d);if(S[1]!==l)throw new Error('Unclosed section "'+S[1]+'" at '+d)}else"name"===f||"{"===f||"&"===f?m=!0:"="===f&&g(l)}if(S=i.pop())throw new Error('Unclosed section "'+S[1]+'" at '+v.pos);return function(e){for(var t,n=[],a=n,r=[],i=0,s=e.length;i<s;++i)switch((t=e[i])[0]){case"#":case"^":a.push(t),r.push(t),a=t[4]=[];break;case"/":r.pop()[5]=t[2],a=0<r.length?r[r.length-1][4]:n;break;default:a.push(t)}return n}(function(e){for(var t,n,a=[],r=0,i=e.length;r<i;++r)(t=e[r])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(a.push(t),n=t));return a}(s))}(e,t)),a},e.prototype.render=function(e,t,n){var a=this.parse(e),r=t instanceof i?t:new i(t);return this.renderTokens(a,r,n,e)},e.prototype.renderTokens=function(e,t,n,a){for(var r,i,s,o="",c=0,m=e.length;c<m;++c)s=void 0,"#"===(i=(r=e[c])[0])?s=this.renderSection(r,t,n,a):"^"===i?s=this.renderInverted(r,t,n,a):">"===i?s=this.renderPartial(r,t,n,a):"&"===i?s=this.unescapedValue(r,t):"name"===i?s=this.escapedValue(r,t):"text"===i&&(s=this.rawValue(r)),void 0!==s&&(o+=s);return o},e.prototype.renderSection=function(e,t,n,a){var r=this,i="",s=t.lookup(e[1]);if(s){if(b(s))for(var o=0,c=s.length;o<c;++o)i+=this.renderTokens(e[4],t.push(s[o]),n,a);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)i+=this.renderTokens(e[4],t.push(s),n,a);else if(m(s)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(t.view,a.slice(e[3],e[5]),function(e){return r.render(e,t,n)}))&&(i+=s)}else i+=this.renderTokens(e[4],t,n,a);return i}},e.prototype.renderInverted=function(e,t,n,a){var r=t.lookup(e[1]);if(!r||b(r)&&0===r.length)return this.renderTokens(e[4],t,n,a)},e.prototype.renderPartial=function(e,t,n){if(n){var a=m(n)?n(e[1]):n[e[1]];return null!=a?this.renderTokens(this.parse(a),t,n,a):void 0}},e.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},e.prototype.escapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return Y.escape(n)},e.prototype.rawValue=function(e){return e[1]},Y.name="mustache.js",Y.version="2.2.1",Y.tags=["{{","}}"];var s=new e;Y.clearCache=function(){return s.clearCache()},Y.parse=function(e,t){return s.parse(e,t)},Y.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+function(e){return b(e)?"array":typeof e}(e)+'" was given as the first argument for mustache#render(template, view, partials)');return s.render(e,t,n)},Y.to_html=function(e,t,n,a){var r=Y.render(e,t,n);if(!m(a))return r;a(r)},Y.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return r[e]})},Y.Scanner=L,Y.Context=i,Y.Writer=e}!function(e){e.bowser=function(){var w=true;function s(n){function e(e){var t=n.match(e);return t&&t.length>1&&t[1]||""}function t(e){var t=n.match(e);return t&&t.length>1&&t[2]||""}var a=e(/(ipod|iphone|ipad)/i).toLowerCase(),r=/like android/i.test(n),i=!r&&/android/i.test(n),s=/nexus\s*[0-6]\s*/i.test(n),o=!s&&/nexus\s*[0-9]+/i.test(n),c=/CrOS/.test(n),m=/silk/i.test(n),_=/sailfish/i.test(n),g=/tizen/i.test(n),d=/(web|hpw)os/i.test(n),f=/windows phone/i.test(n),l=/SamsungBrowser/i.test(n),u=!f&&/windows/i.test(n),p=!a&&!m&&/macintosh/i.test(n),S=!i&&!_&&!g&&!d&&/linux/i.test(n),v=t(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),y=e(/version\/(\d+(\.\d+)?)/i),h=/tablet/i.test(n)&&!/tablet pc/i.test(n),Y=!h&&/[^-]mobi/i.test(n),b=/xbox/i.test(n),E;if(/opera/i.test(n)){E={name:"Opera",opera:w,version:y||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}}else if(/opr\/|opios/i.test(n)){E={name:"Opera",opera:w,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||y}}else if(/SamsungBrowser/i.test(n)){E={name:"Samsung Internet for Android",samsungBrowser:w,version:y||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}}else if(/coast/i.test(n)){E={name:"Opera Coast",coast:w,version:y||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}}else if(/yabrowser/i.test(n)){E={name:"Yandex Browser",yandexbrowser:w,version:y||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}}else if(/ucbrowser/i.test(n)){E={name:"UC Browser",ucbrowser:w,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}}else if(/mxios/i.test(n)){E={name:"Maxthon",maxthon:w,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}}else if(/epiphany/i.test(n)){E={name:"Epiphany",epiphany:w,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}}else if(/puffin/i.test(n)){E={name:"Puffin",puffin:w,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}}else if(/sleipnir/i.test(n)){E={name:"Sleipnir",sleipnir:w,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}}else if(/k-meleon/i.test(n)){E={name:"K-Meleon",kMeleon:w,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}}else if(f){E={name:"Windows Phone",osname:"Windows Phone",windowsphone:w};if(v){E.msedge=w;E.version=v}else{E.msie=w;E.version=e(/iemobile\/(\d+(\.\d+)?)/i)}}else if(/msie|trident/i.test(n)){E={name:"Internet Explorer",msie:w,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}}else if(c){E={name:"Chrome",osname:"Chrome OS",chromeos:w,chromeBook:w,chrome:w,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}}else if(/edg([ea]|ios)/i.test(n)){E={name:"Microsoft Edge",msedge:w,version:v}}else if(/vivaldi/i.test(n)){E={name:"Vivaldi",vivaldi:w,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||y}}else if(_){E={name:"Sailfish",osname:"Sailfish OS",sailfish:w,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}}else if(/seamonkey\//i.test(n)){E={name:"SeaMonkey",seamonkey:w,version:e(/seamonkey\/(\d+(\.\d+)?)/i)}}else if(/firefox|iceweasel|fxios/i.test(n)){E={name:"Firefox",firefox:w,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)};if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(n)){E.firefoxos=w;E.osname="Firefox OS"}}else if(m){E={name:"Amazon Silk",silk:w,version:e(/silk\/(\d+(\.\d+)?)/i)}}else if(/phantom/i.test(n)){E={name:"PhantomJS",phantom:w,version:e(/phantomjs\/(\d+(\.\d+)?)/i)}}else if(/slimerjs/i.test(n)){E={name:"SlimerJS",slimer:w,version:e(/slimerjs\/(\d+(\.\d+)?)/i)}}else if(/blackberry|\bbb\d+/i.test(n)||/rim\stablet/i.test(n)){E={name:"BlackBerry",osname:"BlackBerry OS",blackberry:w,version:y||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}}else if(d){E={name:"WebOS",osname:"WebOS",webos:w,version:y||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(n)&&(E.touchpad=w)}else if(/bada/i.test(n)){E={name:"Bada",osname:"Bada",bada:w,version:e(/dolfin\/(\d+(\.\d+)?)/i)}}else if(g){E={name:"Tizen",osname:"Tizen",tizen:w,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||y}}else if(/qupzilla/i.test(n)){E={name:"QupZilla",qupzilla:w,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||y}}else if(/chromium/i.test(n)){E={name:"Chromium",chromium:w,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||y}}else if(/chrome|crios|crmo/i.test(n)){E={name:"Chrome",chrome:w,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}}else if(i){E={name:"Android",version:y}}else if(/safari|applewebkit/i.test(n)){E={name:"Safari",safari:w};if(y){E.version=y}}else if(a){E={name:a=="iphone"?"iPhone":a=="ipad"?"iPad":"iPod"};if(y){E.version=y}}else if(/googlebot/i.test(n)){E={name:"Googlebot",googlebot:w,version:e(/googlebot\/(\d+(\.\d+))/i)||y}}else{E={name:e(/^(.*)\/(.*) /),version:t(/^(.*)\/(.*) /)}}if(!E.msedge&&/(apple)?webkit/i.test(n)){if(/(apple)?webkit\/537\.36/i.test(n)){E.name=E.name||"Blink";E.blink=w}else{E.name=E.name||"Webkit";E.webkit=w}if(!E.version&&y){E.version=y}}else if(!E.opera&&/gecko\//i.test(n)){E.name=E.name||"Gecko";E.gecko=w;E.version=E.version||e(/gecko\/(\d+(\.\d+)?)/i)}if(!E.windowsphone&&(i||E.silk)){E.android=w;E.osname="Android"}else if(!E.windowsphone&&a){E[a]=w;E.ios=w;E.osname="iOS"}else if(p){E.mac=w;E.osname="macOS"}else if(b){E.xbox=w;E.osname="Xbox"}else if(u){E.windows=w;E.osname="Windows"}else if(S){E.linux=w;E.osname="Linux"}function I(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return undefined}}var O="";if(E.windows){O=I(e(/Windows ((NT|XP)( \d\d?.\d)?)/i))}else if(E.windowsphone){O=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i)}else if(E.mac){O=e(/Mac OS X (\d+([_\.\s]\d+)*)/i);O=O.replace(/[_\s]/g,".")}else if(a){O=e(/os (\d+([_\s]\d+)*) like mac os x/i);O=O.replace(/[_\s]/g,".")}else if(i){O=e(/android[ \/-](\d+(\.\d+)*)/i)}else if(E.webos){O=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i)}else if(E.blackberry){O=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i)}else if(E.bada){O=e(/bada\/(\d+(\.\d+)*)/i)}else if(E.tizen){O=e(/tizen[\/\s](\d+(\.\d+)*)/i)}if(O){E.osversion=O}var C=!E.windows&&O.split(".")[0];if(h||o||a=="ipad"||i&&(C==3||C>=4&&!Y)||E.silk){E.tablet=w}else if(Y||a=="iphone"||a=="ipod"||i||s||E.blackberry||E.webos||E.bada){E.mobile=w}if(E.msedge||E.msie&&E.version>=10||E.yandexbrowser&&E.version>=15||E.vivaldi&&E.version>=1||E.chrome&&E.version>=20||E.samsungBrowser&&E.version>=4||E.firefox&&E.version>=20||E.safari&&E.version>=6||E.opera&&E.version>=10||E.ios&&E.osversion&&E.osversion.split(".")[0]>=6||E.blackberry&&E.version>=10.1||E.chromium&&E.version>=20){E.a=w}else if(E.msie&&E.version<10||E.chrome&&E.version<20||E.firefox&&E.version<20||E.safari&&E.version<6||E.opera&&E.version<10||E.ios&&E.osversion&&E.osversion.split(".")[0]<6||E.chromium&&E.version<20){E.c=w}else E.x=w;return E}var o=s(typeof navigator!=="undefined"?navigator.userAgent||"":"");function a(e){return e.split(".").length}function r(e,t){var n=[],a;if(Array.prototype.map){return Array.prototype.map.call(e,t)}for(a=0;a<e.length;a++){n.push(t(e[a]))}return n}function c(e){var n=Math.max(a(e[0]),a(e[1]));var t=r(e,function(e){var t=n-a(e);e=e+new Array(t+1).join(".0");return r(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});while(--n>=0){if(t[0][n]>t[1][n]){return 1}else if(t[0][n]===t[1][n]){if(n===0){return 0}}else{return-1}}}function i(e,t,n){var a=o;if(typeof t==="string"){n=t;t=void 0}if(t===void 0){t=false}if(n){a=s(n)}var r=""+a.version;for(var i in e){if(e.hasOwnProperty(i)){if(a[i]){if(typeof e[i]!=="string"){throw new Error("Browser version in the minVersion map should be a string: "+i+": "+String(e))}return c([r,e[i]])<0}}}return t}function e(e,t,n){return!i(e,t,n)}return o.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in o)return!0}return!1},o.isUnsupportedBrowser=i,o.compareVersions=c,o.check=function(e,t,n){return!i(e,t,n)},o._detect=s,o}()}(this),function(){var _SgmntfY_=window._SgmntfY_={LOG_LEVELS:{SILENT:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},_variables:{jq:window.SegmentifyjQuery||null,mustache:null,domain:window.SegmentifyDomain||window.location.hostname,ua:{agentString:window.navigator.userAgent,type:null,name:null,version:null,os:null,osversion:null},userStorageKey:"_sgf_user_id",sessionStorageKey:"_sgf_session_id",testMode:"_sgf_test_mode",tracking:"_sgf_tracking",storage:{delayedActions:{key:"_sgf_delayed_actions",local:!0},delayedCampaigns:{key:"_sgf_delayed_campaigns",local:!0},retryQueue:{key:"_sgf_rq",local:!0},extensionStatus:{key:"segmentifyExtension",local:!0},clickedBanners:{key:"_sgf_clicked_banners",local:!1},nextPageQueue:{key:"_sgf_npq",local:!0},user:{key:"_sgf_user_id",local:!1},session:{key:"_sgf_session_id",local:!1}},logLevel:"ERROR",segmentifyObj:null,recommendedProducts:[],recommendedPromotions:[],waitingKeys:!1,apiKey:null,skipProductDetail:{device:[]},offerRecommendedProducts:!1,offerRecommendedPromotions:!1,runTimer:null,initTimer:null,initTryCount:0,initTryLimit:50,isUnload:!1,cssPreload:!1,constants:{frequency:100,redirectDelay:1e3,retryLimit:3,eventTimeout:10,clickedBannersLimit:20,recommendationSelectorFindLimit:50},ga:{enabled:!1},requiredParams:{PAGE_VIEW:[],PRODUCT_VIEW:["productId"],BASKET_OPERATIONS:["productId","basketId","step"],CHECKOUT:["totalPrice","basketId","step"],USER_OPERATIONS:["step"],FORM:["formName","fields"],CUSTOM_EVENT:["type"],INTERACTION:["type"],BANNER_OPERATIONS:["type","title","group","order"],BANNER_GROUP_VIEW:["group"],INTERNAL_BANNER_GROUP:["group"],USER_CHANGE:["oldUserId"],PROMOTION:["type","code"]},optionalParams:{PAGE_VIEW:["category","subCategory"],PRODUCT_VIEW:["title","url","mUrl","image","imageXS","imageS","imageM","imageL","imageXL","additionalImages","category","categories","price","oldPrice","specialPrice","lastUpdateTime","inStock","stockCount","stockRatio","stockStatus","brand","gender","labels","sizes","colors","publishTime","source","noUpdate","activeBanners","groupId"],BASKET_OPERATIONS:["price","quantity","activeBanners"],CHECKOUT:["productList","orderNo","paymentType","activeBanners","cartUrl","totalDiscount","discounts","shipment","tax"],USER_OPERATIONS:["username","fullName","phone","gender","birthDate","segments","memberSince","service","isRegistered","isLogin","location","emailNtf","mailTest","pushTest","custom"],FORM:[],CUSTOM_EVENT:[],INTERACTION:["interactionId","instanceId"],BANNER_OPERATIONS:["productId","category","brand","label"],BANNER_GROUP_VIEW:[],INTERNAL_BANNER_GROUP:["banners"],USER_CHANGE:[],PROMOTION:["title","url","mUrl","image","mImage","startDate","endDate","categories","brands","labels","productIds","publishTime"]},segmentifyApiUrl:"//rest.segmentify.com/",segmentifyCDNUrl:"//cdn.segmentify.com/",jQueryUrl:"//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js",dataLayer:"sgfLayer",consumeDataLayer:!0,dataLayerConfig:{},categoryHierarchy:!1,disableNextPage:!1,language:"EN",currency:"",region:""},_loadJavascript:function(e,t,n){var a=document.createElement("script");return a.type="text/javascript",a.async=t,n&&"function"==typeof n&&(void 0!==a.onreadystatechange?a.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||(n(),a.onreadystatechange=null)}:a.onload=n),a.src=e,document.getElementsByTagName("head")[0].appendChild(a),a},_loadCSS:function(e,t){var n=document.createElement("link");return n.type="text/css",_SgmntfY_._variables.cssPreload?(n.rel="preload",n.as="style"):n.rel="stylesheet",n.media="screen",t&&"function"==typeof t&&(void 0!==n.onreadystatechange?n.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||(t(),n.onreadystatechange=null)}:n.onload=t),n.href=e,document.getElementsByTagName("head")[0].appendChild(n),n},_actions:{_notificationWindow:function(params){var config={title:params.notificationTitle,vertical:"middle",horizontal:"center"},title=params.notificationTitle;switch(params.windowPosition){case"top":config.vertical="top";break;case"bottom":config.vertical="bottom";break;case"left":config.horizontal="left";break;case"right":config.horizontal="right";break;case"top-left":config.vertical="top",config.horizontal="left";break;case"top-right":config.vertical="top",config.horizontal="right";break;case"bottom-left":config.vertical="bottom",config.horizontal="left";break;case"bottom-right":config.vertical="bottom",config.horizontal="right"}var outerHtml=_SgmntfY_._getJq()('<div class="seg-popup seg-[[vertical]]-[[horizontal]] segFadeInUp fancybox-segmentify"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>'),notificationBody=_SgmntfY_._getJq()('<div class="fancybox-body" />').appendTo(outerHtml.find(".fancybox-inner"));params.html instanceof _SgmntfY_._getJq()?notificationBody.append(params.html):notificationBody.html(params.html);for(var button_overlay=_SgmntfY_._getJq()("<div />").appendTo(notificationBody),buttons=params.buttons||[],i=0;i<buttons.length;i++)_SgmntfY_._getJq()('<button data-newWindow="'+buttons[i].newWindow+'" data-target="'+buttons[i].buttonUrl+'" class="fancybox-button '+buttons[i].buttonColor+'">'+buttons[i].buttonTitle+"</button>").appendTo(button_overlay);"seamless"===params.windowStyle&&(title&&_SgmntfY_._getJq()('<div class="overlay-area-title" ><span>'+title+"</span></div>").appendTo(notificationBody),button_overlay.addClass("overlay-area-buttons").addClass("right"),title=null),"false"===params.isModal&&_SgmntfY_._getJq()('<span class="seg-popup-close"></span>').appendTo(outerHtml);var renderedHtml=_SgmntfY_._getMustache().render(outerHtml.prop("outerHTML"),config);_SgmntfY_._getJq()("body").prepend(renderedHtml),"true"===params.overlay&&(_SgmntfY_._getJq()('<div class="seg-popup-overlay"></div>').prependTo(_SgmntfY_._getJq()("body")),_SgmntfY_._getJq()(".seg-popup-overlay").show()),"false"===params.isModal&&_SgmntfY_._getJq()(".seg-popup-close").bind("click",function(){var e=_SgmntfY_._getJq()(this);e.parent(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"close",instanceId:params.instanceId,interactionId:params.instanceId})}),params.cssCode&&_SgmntfY_._getJq()("<style />").html(params.cssCode).prependTo(_SgmntfY_._getJq()("body"));try{params.javascriptCode&&eval(params.javascriptCode)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing javascript code: "+e)}if(_SgmntfY_._getJq()(".seg-popup").find("form")){var $inner=_SgmntfY_._getJq()(".seg-popup .fancybox-body"),$form=$inner.find("form").eq(0);$form.bind("submit",function(e){e.preventDefault(),_SgmntfY_.LOG_MESSAGE("DEBUG","Popup Form button click for actionId: "+params.actionId),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"submit",interactionId:params.formName,instanceId:params.instanceId}),_SgmntfY_._variables.segmentifyObj("user:form",{formName:params.formName,fields:$form.sgmSerializeForm()}),$inner.html(params.successHtml),setTimeout(function(){$inner.parents(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),$inner.parents(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3)})}var redirectFn=function(e){function t(e,t){window.open(e.data("target"),t),e.parents(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3)}"true"===e.data("newwindow")||!0===e.data("newwindow")?t(e,"_blank"):setTimeout(function(){t(e,"_self")},_SgmntfY_._variables.constants.redirectDelay)};_SgmntfY_._getJq()(".seg-popup .fancybox-button").click(function(){_SgmntfY_.LOG_MESSAGE("DEBUG","Notification Window button click for actionId: "+params.actionId),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",interactionId:_SgmntfY_._getJq()(this).text(),instanceId:params.instanceId}),redirectFn(_SgmntfY_._getJq()(this))}),_SgmntfY_._getJq()(".seg-popup a img").bind("click",function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",instanceId:params.instanceId,interactionId:params.instanceId})}),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:params.instanceId,interactionId:params.instanceId})},notificationBanner:function(t){var n=[];try{t.buttons&&(n=JSON.parse(t.buttons))}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Cannot parse buttons json, str: "+t.buttons),n=[]}t.buttons=n,t.html=_SgmntfY_._getJq()('<div><a href="'+t.redirectUrl+'"><img id="sgm_img" src="'+t.imageUrl+'"></a></div>'),_SgmntfY_._actions._notificationWindow(t)},notificationMessage:function(t){var n=[];try{t.buttons&&(n=JSON.parse(t.buttons))}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Cannot parse buttons json, str: "+t.buttons),n=[]}t.html=t.notificationText,t.buttons=n,_SgmntfY_._actions._notificationWindow(t)},visitorForm:function(e){switch(e.actionType){case"INPAGE_WIDGET":(function e(){var t=this.params,n=this.selectorCount,a=t.selector;if(a&&_SgmntfY_._getJq()(a).length)try{a.addClass("sgm-recommendation sgm-clearcss").html(t.formHtml);var r=a.find("form").eq(0);r.submit(function(e){e.preventDefault(),_SgmntfY_.LOG_MESSAGE("DEBUG","In-page Form button click for actionId: "+t.actionId),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"submit",interactionId:t.formName,instanceId:t.instanceId}),_SgmntfY_._variables.segmentifyObj("user:form",{formName:t.formName,fields:r.sgmSerializeForm()}),setTimeout(function(){a.html(t.successHtml)},1e3)})}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Error in filling target element["+t.selector+"] with visitor form: "+e)}else if(_SgmntfY_.LOG_MESSAGE("WARN","Error in finding target element["+target+"], element does not exist"),n<_SgmntfY_._variables.constants.recommendationSelectorFindLimit){++this.selectorCount;var i=e.bind(this);setTimeout(i,100)}}).bind({params:e,selectorCount:1})();break;case"POPUP_WINDOW":default:e.html=e.formHtml,_SgmntfY_._actions._notificationWindow(e)}},recommendProducts:function(params,request){var previousMetadata={productId:request.originalParams.productId,productUrl:request.originalParams.productUrl,instanceId:params.instanceId};function dynamicItemKey(e){var t=e.recommendationSource;return void 0!==e.timeFrame&&_SgmntfY_._isNotEmpty(e.timeFrame)&&(t+="|"+e.timeFrame,void 0!==e.score&&_SgmntfY_._isNotEmpty(e.score)&&(t+="|"+e.score)),t}function checkDynamicItemCount(e,t){for(var n=0;n<e.length;++n)if(dynamicItemKey(e[n])===t)return e[n].itemCount;return null}function checkProductInList(e,t){for(var n=0;n<e.length;n++)if(e[n].productId==t)return!0;return!1}function isElemVisible(e){try{if(_SgmntfY_._exists(e)&&"none"!==e.css("display")){var t=_SgmntfY_._getJq()(window),n=t.scrollTop(),a=n+t.height();e instanceof HTMLElement?e=_SgmntfY_._getJq()(e):e instanceof HTMLCollection&&(e=_SgmntfY_._getJq()(e[0]));var r=e.offset().top;return r+100<=a&&n<=r}return!1}catch(e){return!1}}function decodeHtml(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function checkSelectorAndRender(){var params=this.params,selectorCount=this.selectorCount,target=params.selector;if(target&&_SgmntfY_._getJq()(target).length){var renderIdx=0,reConf={title:notificationTitle,products:productList,index:function(){return++renderIdx},discount:function(){try{var e=this.price,t=this.oldPrice;if(!e||!t||e==t)return null;var n=100-100*e/t;return 0<n&&Math.round(n)}catch(e){return null}},commaFormatPrice:function(){return this.toFixed(2).toString().replace(/\./g,",")},dotFormatPrice:function(){return this.toFixed(2).toString()}};try{if(params.preJsCode){eval(params.preJsCode);var retVal=preRenderConf(reConf);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation pre js code: "+e)}reConf.brandingEnabled&&(reConf.title+='<a target="_blank" class="seg-rec-logo" href="//www.segmentify.com">Recommended by <img src="//cdn.segmentify.com/images/sgm-logo.svg" /></a>');var renderedHtml=_SgmntfY_._getMustache().render(params.recommendationTemplate,reConf);try{var targetElement=_SgmntfY_._getJq()(target).first();if("SELF"===params.insertType)targetElement.html(renderedHtml),wvCB&&wvCB(targetElement);else{var $div=_SgmntfY_._getJq()("<div/>",{class:"seg-reco-wrapper seg-clear"});"AFTER"===params.insertType||"BEFORE"===params.insertType?"AFTER"===params.insertType?$div.html(renderedHtml).insertAfter(targetElement):$div.html(renderedHtml).insertBefore(targetElement):"APPEND"!==params.insertType&&"PREPEND"!==params.insertType||("APPEND"===params.insertType?$div.html(renderedHtml).appendTo(targetElement):$div.html(renderedHtml).prependTo(targetElement)),wvCB&&wvCB($div)}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in filling target element["+target+"] with product recommendations: "+e)}try{params.postJsCode&&eval(params.postJsCode)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation post js code: "+e)}}else if(_SgmntfY_.LOG_MESSAGE("WARN","Error in finding target element["+target+"], element does not exist"),selectorCount<_SgmntfY_._variables.constants.recommendationSelectorFindLimit){++this.selectorCount;var binded=checkSelectorAndRender.bind(this);setTimeout(binded,100)}}var productList=[],recommendedProducts=params.recommendedProducts||{},dynamicItems=JSON.parse(params.dynamicItems)||[];if("SHUFFLE"===params.ordering){function allNull(e){for(var t in e)if(e.hasOwnProperty(t)&&(void 0!==e[t]||null!==e[t]))return!1;return!0}function arrayRandom(){return parseInt(100*Math.random())}function randomInt(e,t){return Math.floor(Math.random()*(t-e))+e}var itemCounts=[],dynamicLengths=[];for(var idx in dynamicItems)if(dynamicItems.hasOwnProperty(idx)){itemCounts.push(parseInt(dynamicItems[idx].itemCount||0));var source=dynamicItemKey(dynamicItems[idx]);recommendedProducts.hasOwnProperty(source)?dynamicLengths.push(recommendedProducts[source].length):dynamicLengths.push(0)}var firstLevel=[],firstLevelTotal=itemCounts.reduce(function(e,t){return e+t},0);for(idx in itemCounts)if(itemCounts.hasOwnProperty(idx)){var _idx=parseInt(idx);if(_idx===itemCounts.length-1)firstLevel.push(100);else{var pct=parseInt(itemCounts[idx]/firstLevelTotal*100);0===_idx?firstLevel.push(pct):firstLevel.push(firstLevel[firstLevel.length-1]+pct)}}var secondLevel=[];for(var dl in dynamicLengths)if(dynamicLengths.hasOwnProperty(dl)){for(var len=dynamicLengths[dl],sumOfSquares=len*(len+1)*(2*len+1)/6,tmpArr=[],l=len;0<l;--l)1===l?tmpArr.push(100):(pct=parseInt(Math.pow(l,2)/sumOfSquares*100),l===len?tmpArr.push(pct):tmpArr.push(tmpArr[tmpArr.length-1]+pct));secondLevel.push(tmpArr)}for(var dynamicProducts=[],iteration=0;!(1e4<++iteration||dynamicProducts.length>=firstLevelTotal);){var allNullCheck=!0;for(idx in dynamicItems)if(dynamicItems.hasOwnProperty(idx)){source=dynamicItemKey(dynamicItems[idx]);var tmpCheck=!0;if(recommendedProducts.hasOwnProperty(source)&&(tmpCheck=allNull(recommendedProducts[source])),!tmpCheck){allNullCheck=!1;break}}if(allNullCheck)break;var rand=arrayRandom(),firstLevelIndex=-1;for(var fl in firstLevel)if(firstLevel.hasOwnProperty(fl)&&rand<firstLevel[fl]){firstLevelIndex=parseInt(fl);break}if(-1!==firstLevelIndex&&dynamicItems.hasOwnProperty(firstLevelIndex.toString())){source=dynamicItemKey(dynamicItems[firstLevelIndex]),rand=arrayRandom();var secondLevelIndex=-1;for(var sl in secondLevel[firstLevelIndex])if(secondLevel[firstLevelIndex].hasOwnProperty(sl)&&rand<secondLevel[firstLevelIndex][sl]){secondLevelIndex=parseInt(sl);break}if(-1!==secondLevelIndex&&recommendedProducts[source].hasOwnProperty(secondLevelIndex.toString())){var candidate=recommendedProducts[source].splice(secondLevelIndex,1)[0];if(null!=candidate){recommendedProducts[source].splice(secondLevelIndex,0,null);var eliminationFuncRetVal=!1;if(params.eliminationFunction){var func=_SgmntfY_._getObjectByString(window,params.eliminationFunction);if("function"==typeof func)try{eliminationFuncRetVal=func.call(null,candidate)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation elimination js function: "+e)}}if(!eliminationFuncRetVal){candidate.name=decodeHtml(candidate.name);var sourceLastVisited="RECOMMENDATION_SOURCE_LAST_VISITED"===dynamicItems[firstLevelIndex].recommendationSource||"RECOMMENDATION_EVENT_DATA"===dynamicItems[firstLevelIndex].recommendationSource;switch(params.elimination){case"ELIMINATE_DUPLICATES":case"ELIMINATE_PREVIOUS":checkProductInList(productList,candidate.productId)||!sourceLastVisited&&_SgmntfY_._containsRecommendedProduct(candidate.productId)&&!_SgmntfY_._variables.offerRecommendedProducts||(productList.push(candidate),dynamicProducts.push(candidate),sourceLastVisited||_SgmntfY_._addRecommendedProduct(candidate.productId));break;case"NO_ELIMINATION":default:productList.push(candidate),dynamicProducts.push(candidate),sourceLastVisited||_SgmntfY_._addRecommendedProduct(candidate.productId)}}}}}}for(var i=0;i<recommendedProducts.RECOMMENDATION_SOURCE_STATIC_ITEMS.length;++i){var elm=recommendedProducts.RECOMMENDATION_SOURCE_STATIC_ITEMS[i];checkProductInList(productList,elm.productId)||productList.splice(randomInt(0,productList.length),0,elm)}}else{for(var missingCount=0,i=0;i<recommendedProducts.RECOMMENDATION_SOURCE_STATIC_ITEMS.length;++i){var elm=recommendedProducts.RECOMMENDATION_SOURCE_STATIC_ITEMS[i];checkProductInList(productList,elm.productId)||productList.push(elm)}for(var ri=0;ri<dynamicItems.length;++ri){var curRecommendationSource=dynamicItemKey(dynamicItems[ri]),curCatItemCount=parseInt(checkDynamicItemCount(dynamicItems,curRecommendationSource));if(isNaN(curCatItemCount)&&(curCatItemCount=0),recommendedProducts.hasOwnProperty(curRecommendationSource)&&curCatItemCount){missingCount+=curCatItemCount;for(var index=0,i=0;i<recommendedProducts[curRecommendationSource].length;++i){var elm=recommendedProducts[curRecommendationSource][i];if(elm.name=decodeHtml(elm.name),curCatItemCount<=index&&0===missingCount)break;var eliminationFnRetVal=!1;if(params.eliminationFunction){var fx=_SgmntfY_._getObjectByString(window,params.eliminationFunction);if("function"==typeof fx)try{eliminationFnRetVal=fx.call(null,elm)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation elimination js function: "+e)}}if(!eliminationFnRetVal){var sourceLastVisited="RECOMMENDATION_SOURCE_LAST_VISITED"===dynamicItems[ri].recommendationSource||"RECOMMENDATION_EVENT_DATA"===dynamicItems[ri].recommendationSource;switch(params.elimination){case"ELIMINATE_DUPLICATES":case"ELIMINATE_PREVIOUS":checkProductInList(productList,elm.productId)||!sourceLastVisited&&_SgmntfY_._containsRecommendedProduct(elm.productId)&&!_SgmntfY_._variables.offerRecommendedProducts||(productList.push(elm),sourceLastVisited||_SgmntfY_._addRecommendedProduct(elm.productId),++index,--missingCount);break;case"NO_ELIMINATION":default:productList.push(elm),sourceLastVisited||_SgmntfY_._addRecommendedProduct(elm.productId),++index,--missingCount}}}}}}var notificationTitleMap=JSON.parse(params.notificationTitleMap||"{}"),notificationTitle=notificationTitleMap[request.data.lang]||params.notificationTitle;if(0!==productList.length){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",interactionId:params.actionId,instanceId:params.instanceId});var wvInteractionId=params.interactionId,wvInstanceId=params.instanceId,wvCB=function(e){var t=!1;if(!t&&isElemVisible(e))_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:wvInteractionId,instanceId:wvInstanceId}),t=!0;else if(!t)var n=setInterval(function(){!t&&isElemVisible(e)&&(_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:wvInteractionId,instanceId:wvInstanceId}),t=!0,window.clearInterval(n))},100)};switch(params.actionType){case"CALLBACK":request.recommendationCallback&&request.recommendationCallback(notificationTitle,productList,previousMetadata,wvCB);break;case"INPAGE_WIDGET":var binded_context=checkSelectorAndRender.bind({params:params,selectorCount:1});binded_context();break;case"JAVASCRIPT_FUNCTION":var fx=_SgmntfY_._getObjectByString(window,params.jsFunction);if("function"==typeof fx)try{fx.call(null,notificationTitle,productList,previousMetadata,wvCB)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation js function: "+e)}else _SgmntfY_.LOG_MESSAGE("WARN","Product Recommendation javascript function("+params.jsFunction+") does not exist");break;case"POPUP_RECO":var config={title:params.notificationTitle,vertical:params.verticalPosition,horizontal:params.horizontalPosition};if(productList.length<3)return;config.products=productList;try{if(params.preJsCode){eval(params.preJsCode);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var _products=[],_productId="";request.originalParams&&request.originalParams.params&&(_productId=request.originalParams.params.productId||"");for(var i=0;i<config.products.length&&3!==_products.length;++i){var _product=config.products[i];_product.productId!==_productId&&_products.push(_product)}if(3!==_products.length)return;config.products=_products;var renderedHtml=_SgmntfY_._getMustache().render(params.recommendationTemplate,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),params.cssCode&&_SgmntfY_._getJq()("<style />").html(params.cssCode).prependTo(_SgmntfY_._getJq()("body"));try{params.postJsCode&&eval(params.postJsCode)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}"true"===params.overlay&&_SgmntfY_._getJq()(".seg-popup-overlay").show(),_SgmntfY_._getJq()(".seg-popup-close").bind("click",function(){var e=_SgmntfY_._getJq()(this);e.parent(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3)}),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:params.interactionId,instanceId:params.instanceId})}}else"CALLBACK"===params.actionType&&request.recommendationCallback&&request.recommendationCallback(notificationTitle,[],previousMetadata,null)},recommendPromotion:function(params,request){var metadata={title:params.notificationTitle};function checkDynamicItemCount(e,t){for(var n=0;n<e.length;++n)if(e[n].recommendationSource+"|"+e[n].timeFrame===t)return e[n].itemCount;return null}function checkPromotionInList(e,t){for(var n=0;n<e.length;n++)if(e[n].code===t)return!0;return!1}function isElemVisible(e){try{if(_SgmntfY_._exists(e)){var t=_SgmntfY_._getJq()(window),n=t.scrollTop(),a=n+t.height();e instanceof HTMLElement?e=_SgmntfY_._getJq()(e):e instanceof HTMLCollection&&(e=_SgmntfY_._getJq()(e[0]));var r=e.offset().top;return r+100<=a&&n<=r}return!1}catch(e){return!1}}function decodeHtml(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function checkSelectorAndRender(){var params=this.params,selectorCount=this.selectorCount,target=params.selector;if(target&&_SgmntfY_._getJq()(target).length){var renderIdx=0,reConf={title:params.notificationTitle,promotionList:promotionList,index:function(){return++renderIdx}};try{if(params.preJsCode){eval(params.preJsCode);var retVal=preRenderConf(reConf);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing promotion recommendation pre js code: "+e)}reConf.brandingEnabled&&(reConf.title+='<a target="_blank" class="seg-rec-logo" href="//www.segmentify.com">Recommended by <img src="//cdn.segmentify.com/images/sgm-logo.svg" /></a>');var renderedHtml=_SgmntfY_._getMustache().render(params.recommendationTemplate,reConf);try{var targetElement=_SgmntfY_._getJq()(target).first();if("SELF"===params.insertType)targetElement.addClass("seg-promotion-wrapper").html(renderedHtml),wvCB&&wvCB(targetElement);else{var $div=_SgmntfY_._getJq()("<div/>",{class:"seg-promotion-wrapper"});"AFTER"===params.insertType||"BEFORE"===params.insertType?"AFTER"===params.insertType?$div.html(renderedHtml).insertAfter(targetElement):$div.html(renderedHtml).insertBefore(targetElement):"APPEND"!==params.insertType&&"PREPEND"!==params.insertType||("APPEND"===params.insertType?$div.html(renderedHtml).appendTo(targetElement):$div.html(renderedHtml).prependTo(targetElement)),wvCB&&wvCB($div)}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in filling target element["+target+"] with promotion recommendations: "+e)}try{params.postJsCode&&eval(params.postJsCode)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing promotion recommendation post js code: "+e)}}else if(_SgmntfY_.LOG_MESSAGE("WARN","Error in finding target element["+target+"], element does not exist"),selectorCount<_SgmntfY_._variables.constants.recommendationSelectorFindLimit){++this.selectorCount;var binded=checkSelectorAndRender.bind(this);setTimeout(binded,100)}}for(var promotionList=[],recommendedPromotions=params.recommendedPromotions||{},dynamicItems=JSON.parse(params.dynamicItems)||[],i=0;i<recommendedPromotions.RECOMMENDATION_SOURCE_STATIC_ITEMS.length;++i){var elm=recommendedPromotions.RECOMMENDATION_SOURCE_STATIC_ITEMS[i];checkPromotionInList(promotionList,elm.code)||promotionList.push(elm)}for(var missingCount=0,ri=0;ri<dynamicItems.length;++ri){void 0===dynamicItems[ri].timeFrame&&(dynamicItems[ri].timeFrame="null");var curRecommendationSource=dynamicItems[ri].recommendationSource+"|"+dynamicItems[ri].timeFrame,curCatItemCount=parseInt(checkDynamicItemCount(dynamicItems,curRecommendationSource));if(isNaN(curCatItemCount)&&(curCatItemCount=0),recommendedPromotions.hasOwnProperty(curRecommendationSource)&&curCatItemCount){missingCount+=curCatItemCount;for(var index=0,i=0;i<recommendedPromotions[curRecommendationSource].length;++i){var elm=recommendedPromotions[curRecommendationSource][i];if(elm.name=decodeHtml(elm.name),curCatItemCount<=index&&0==missingCount)break;var eliminationFnRetVal=!1;if(params.eliminationFunction){var fx=_SgmntfY_._getObjectByString(window,params.eliminationFunction);if("function"==typeof fx)try{eliminationFnRetVal=fx.call(null,elm)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing promotion recommendation elimination js function: "+e)}}if(!eliminationFnRetVal)switch(params.elimination){case"ELIMINATE_DUPLICATES":case"ELIMINATE_PREVIOUS":checkPromotionInList(promotionList,elm.code)||_SgmntfY_._containsRecommendedPromotion(elm.code)&&!_SgmntfY_._variables.offerRecommendedPromotions||(promotionList.push(elm),_SgmntfY_._addRecommendedPromotion(elm.code),++index,--missingCount);break;case"NO_ELIMINATION":default:promotionList.push(elm),_SgmntfY_._addRecommendedPromotion(elm.code),++index,--missingCount}}}}if(0!==promotionList.length){"SHUFFLE"===params.ordering&&(promotionList=_SgmntfY_._shuffle(promotionList)),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",interactionId:params.actionId,instanceId:params.instanceId});var wvInteractionId=params.interactionId,wvInstanceId=params.instanceId,wvCB=function(e){var t=!1;if(!t&&isElemVisible(e))_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:wvInteractionId,instanceId:wvInstanceId}),t=!0;else if(!t)var n=setInterval(function(){!t&&isElemVisible(e)&&(_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:wvInteractionId,instanceId:wvInstanceId}),t=!0,window.clearInterval(n))},100)};switch(params.actionType){case"CALLBACK":request.recommendationCallback&&request.recommendationCallback(promotionList,metadata,wvCB);break;case"INPAGE_WIDGET":var binded_context=checkSelectorAndRender.bind({params:params,selectorCount:1});binded_context()}}else"CALLBACK"===params.actionType&&request.recommendationCallback&&request.recommendationCallback([],metadata,null)},recommendKeyword:function(params,request){var metadata={title:params.notificationTitle};function checkDynamicItemCount(e,t){for(var n=0;n<e.length;++n)if(e[n].recommendationSource+"|"+e[n].timeFrame==t)return e[n].itemCount;return null}function checkKeywordInList(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}function isElemVisible(e){try{if(_SgmntfY_._exists(e)){var t=_SgmntfY_._getJq()(window),n=t.scrollTop(),a=n+t.height();e instanceof HTMLElement?e=_SgmntfY_._getJq()(e):e instanceof HTMLCollection&&(e=_SgmntfY_._getJq()(e[0]));var r=e.offset().top;return r+100<=a&&n<=r}return!1}catch(e){return!1}}function decodeHtml(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function checkSelectorAndRender(){var params=this.params,keywordList=this.keywordList,selectorCount=this.selectorCount,target=params.selector;if(target&&_SgmntfY_._getJq()(target).length){for(var keywords=[],k=0;k<keywordList.length;++k)keywords.push({name:keywordList[k],url:""});var recoTitle=params.notificationTitle,renderIdx=0,reConf={title:recoTitle,keywords:keywords,index:function(){return++renderIdx}};try{if(params.preJsCode){eval(params.preJsCode);var retVal=preRenderConf(reConf);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation pre js code: "+e)}var renderedHtml=_SgmntfY_._getMustache().render(params.recommendationTemplate,reConf);try{var targetElement=_SgmntfY_._getJq()(target).first();if("SELF"===params.insertType)targetElement.html(renderedHtml),wvCB&&wvCB(targetElement);else{var $div=_SgmntfY_._getJq()("<div/>",{class:"seg-reco-wrapper seg-clear"});"AFTER"===params.insertType||"BEFORE"===params.insertType?"AFTER"===params.insertType?$div.html(renderedHtml).insertAfter(targetElement):$div.html(renderedHtml).insertBefore(targetElement):"APPEND"!==params.insertType&&"PREPEND"!==params.insertType||("APPEND"===params.insertType?$div.html(renderedHtml).appendTo(targetElement):$div.html(renderedHtml).prependTo(targetElement)),wvCB&&wvCB($div)}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in filling target element["+target+"] with product recommendations: "+e)}try{params.postJsCode&&eval(params.postJsCode)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation post js code: "+e)}_SgmntfY_._getJq()(".seg-label a").on("click",function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",interactionId:params.actionId,instanceId:params.instanceId})})}else if(_SgmntfY_.LOG_MESSAGE("WARN","Error in finding target element["+target+"], element does not exist"),selectorCount<_SgmntfY_._variables.constants.recommendationSelectorFindLimit){++this.selectorCount;var binded=checkSelectorAndRender.bind(this);setTimeout(binded,100)}}for(var keywordList=[],recommendedKeywords=params.recommendedKeywords||{},dynamicItems=JSON.parse(params.dynamicItems)||[],i=0;i<recommendedKeywords.RECOMMENDATION_SOURCE_STATIC_ITEMS.length;++i){var elm=recommendedKeywords.RECOMMENDATION_SOURCE_STATIC_ITEMS[i];checkKeywordInList(keywordList,elm)||keywordList.push(elm)}for(var missingCount=0,ri=0;ri<dynamicItems.length;++ri){void 0===dynamicItems[ri].timeFrame&&(dynamicItems[ri].timeFrame="null");var curRecommendationSource=dynamicItems[ri].recommendationSource+"|"+dynamicItems[ri].timeFrame,curCatItemCount=parseInt(checkDynamicItemCount(dynamicItems,curRecommendationSource));if(isNaN(curCatItemCount)&&(curCatItemCount=0),recommendedKeywords.hasOwnProperty(curRecommendationSource)&&curCatItemCount){missingCount+=curCatItemCount;for(var index=0,i=0;i<recommendedKeywords[curRecommendationSource].length;++i){var elm=recommendedKeywords[curRecommendationSource][i];if(elm.name=decodeHtml(elm.name),curCatItemCount<=index&&0==missingCount)break;keywordList.push(elm),++index,--missingCount}}}if(0!==keywordList.length){"SHUFFLE"===params.ordering&&(keywordList=_SgmntfY_._shuffle(keywordList)),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",interactionId:params.actionId,instanceId:params.instanceId});var wvInteractionId=params.interactionId,wvInstanceId=params.instanceId,wvCB=function(e){var t=!1;if(!t&&isElemVisible(e))_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:wvInteractionId,instanceId:wvInstanceId}),t=!0;else if(!t)var n=setInterval(function(){!t&&isElemVisible(e)&&(_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:wvInteractionId,instanceId:wvInstanceId}),t=!0,window.clearInterval(n))},100)};switch(params.actionType){case"CALLBACK":request.recommendationCallback&&request.recommendationCallback(keywordList,metadata,wvCB);break;case"INPAGE_WIDGET":var binded_context=checkSelectorAndRender.bind({params:params,keywordList:keywordList,selectorCount:1});binded_context()}}else request.recommendationCallback&&request.recommendationCallback([],metadata,null)},webNotification:function(e){},redirectUrl:function(e){_SgmntfY_.LOG_MESSAGE("DEBUG","Redirecting action to url: "+e.redirectUrl),window.location=e.redirectUrl},jsFunctionCall:function(e){e.actionType="JAVASCRIPT_FUNCTION",_SgmntfY_._actions.jsAction(e)},jsAction:function(params){var actionType=params.actionType;switch(actionType){case"JAVASCRIPT_EVENT":var event=params.event,parameters=[];try{params.parameters&&(parameters=JSON.parse(params.parameters))}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Js Action (Event Trigger) - Cannot parse parameters json, str: "+params.parameters),parameters=[]}parameters.push(function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"js_success",interactionId:params.actionId,instanceId:params.instanceId})}),parameters.push(function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"js_reject",interactionId:params.actionId,instanceId:params.instanceId})}),_SgmntfY_._getJq()(document).trigger(event,parameters),_SgmntfY_.LOG_MESSAGE("DEBUG","Js Action (Event Trigger) - Triggered Event: "+event);break;case"JAVASCRIPT_CODE":try{eval(params.javascriptCode),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"js_success",interactionId:params.actionId,instanceId:params.instanceId}),_SgmntfY_.LOG_MESSAGE("DEBUG","Js Action (Execute Code) successfully executed")}catch(e){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"js_reject",interactionId:params.actionId,instanceId:params.instanceId}),_SgmntfY_.LOG_MESSAGE("WARN","Error in JS Action (Execute Code): "+e)}break;case"JAVASCRIPT_FUNCTION":default:var fx=window[params.function],parameters=[];if("function"==typeof fx){try{params.parameters&&(parameters=JSON.parse(params.parameters))}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Js Action (Function Call) - Cannot parse parameters json, str: "+params.parameters),parameters=[]}parameters.push(function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"js_success",interactionId:params.actionId,instanceId:params.instanceId})}),parameters.push(function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"js_reject",interactionId:params.actionId,instanceId:params.instanceId})}),fx.apply(null,parameters),_SgmntfY_.LOG_MESSAGE("DEBUG","Js Action (Function Call) successfully run for function: "+params.function)}else _SgmntfY_.LOG_MESSAGE("WARN","Js Action (Function Call) failed, non existing function: "+params.function)}},jsCountdownTimer:function(e){var t=e.timeout;_SgmntfY_.LOG_MESSAGE("DEBUG","Starting countdown timer with "+1e3*(t||0)+" second(s)"),setTimeout(function(){_SgmntfY_.LOG_MESSAGE("DEBUG","Countdown timer finished after "+1e3*(t||0)+" second(s)"),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"timeout",interactionId:e.actionId,instanceId:e.instanceId})},1e3*(t||0))},sendBannerDetails:function(e,t){var n=t.originalParams;n.group=e.group;var a=[],r=_SgmntfY_._functions.bannerGroupDetail(n);r&&a.push(r),_SgmntfY_._sendRequestToServer(a)}},_campaigns:{NEWSLETTER:function(campaign,request){var config={title:campaign.title,description:campaign.description,placeholder:campaign.placeholder,termsUrl:campaign.termsUrl,termsText:campaign.termsText,buttonSubmitText:campaign.buttonSubmitText,buttonThanksText:campaign.buttonThanksText,buttonBgColor:campaign.buttonBgColor,buttonTextColor:campaign.buttonTextColor,vertical:campaign.verticalPosition,horizontal:campaign.horizontalPosition};try{if(campaign.preJs){eval(campaign.preJs);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var renderedHtml=_SgmntfY_._getMustache().render(campaign.html,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),campaign.css&&_SgmntfY_._getJq()("<style />").html(campaign.css).prependTo(_SgmntfY_._getJq()("body"));try{campaign.postJs&&eval(campaign.postJs)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}_SgmntfY_.LOG_MESSAGE("DEBUG","Newsletter popup appended to html body for campaign("+campaign.instanceId+")"),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),_SgmntfY_._getJq()(".seg-popup-close").bind("click",function(){var e=_SgmntfY_._getJq()(this);e.parent(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove()},1e3)}),_SgmntfY_._getJq()(".seg-form-submit").bind("click",function(e){_SgmntfY_._getJq()(".seg-form-input").removeClass("seg-form-invalid"),_SgmntfY_._getJq()(".seg-email-collection .seg-checkbox").removeClass("seg-form-invalid"),e.preventDefault();var t=_SgmntfY_._getJq()(".seg-form-input"),n=_SgmntfY_._getJq()('.seg-email-collection .seg-form-footer input[type="checkbox"]');if(isEmail(t.val())&&1==n.is(":checked")){_SgmntfY_._getJq()(this).addClass("seg-sending"),_SgmntfY_._getJq()(this).css({"pointer-events":"none"}),setTimeout(function(){_SgmntfY_._getJq()(".seg-email-collection").addClass("seg-popup-thanks").removeClass("segFadeInUp")},1300),setTimeout(function(){_SgmntfY_._getJq()(".seg-email-collection").addClass("segFadeOutDown")},3e3),setTimeout(function(){_SgmntfY_._getJq()(".seg-email-collection").remove()},6e3);var a=_SgmntfY_._getJq()("#seg-email-collection");0<a.length&&(_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"submit",interactionId:campaign.name,instanceId:campaign.instanceId}),_SgmntfY_._variables.segmentifyObj("user:form",{formName:campaign.name,fields:a.sgmSerializeForm()}))}isEmail(t.val())||t.addClass("seg-form-invalid"),0==n.is(":checked")&&_SgmntfY_._getJq()(".seg-terms .seg-checkbox").addClass("seg-form-invalid")});var isEmail=function(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}},FORM:function(campaign,request){for(var config={title:campaign.title,description:campaign.description,buttonSubmitText:campaign.buttonSubmitText,vertical:campaign.verticalPosition,horizontal:campaign.horizontalPosition},fields=campaign.fields||[],i=0;i<fields.length;++i){var field=fields[i];config["ff"+i+"_required"]=field.required,"INPUT"===field.type?(config["ff"+i+"_name"]=field.name,config["ff"+i+"_placeholder"]=field.placeholder,config["ff"+i+"_inputType"]=field.inputType,field.name?config["ff"+i+"_fieldName"]=field.name:config["ff"+i+"_fieldName"]="input-"+i):"TEXT_AREA"===field.type?(config["ff"+i+"_name"]=field.name,config["ff"+i+"_placeholder"]=field.placeholder,field.name?config["ff"+i+"_fieldName"]=field.name:config["ff"+i+"_fieldName"]="textarea-"+i):"CHECKBOX"!==field.type&&"RADIO_BUTTON"!==field.type||(config["ff"+i+"_groupTitle"]=field.groupTitle,config["ff"+i+"_options"]=field.options,field.groupTitle?config["ff"+i+"_fieldName"]=field.groupTitle:"CHECKBOX"===field.type?config["ff"+i+"_fieldName"]="checkbox-"+i:config["ff"+i+"_fieldName"]="radiobutton-"+i)}try{if(campaign.preJs){eval(campaign.preJs);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var renderedHtml=_SgmntfY_._getMustache().render(campaign.html,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),campaign.css&&_SgmntfY_._getJq()("<style />").html(campaign.css).prependTo(_SgmntfY_._getJq()("body"));try{campaign.postJs&&eval(campaign.postJs)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}_SgmntfY_.LOG_MESSAGE("DEBUG","Form popup appended to html body for campaign("+campaign.instanceId+")"),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),_SgmntfY_._getJq()(".seg-form-survey").each(function(){var e=_SgmntfY_._getJq()(this);-1===e.attr("class").indexOf("cmp_")&&e.addClass(campaign.instanceId)}),"true"===campaign.overlay&&_SgmntfY_._getJq()(".seg-popup-overlay").show(),_SgmntfY_._getJq()("."+campaign.instanceId+" .seg-popup-close").bind("click",function(){var e=_SgmntfY_._getJq()(this);e.parent(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3)}),_SgmntfY_._getJq()("."+campaign.instanceId+" .seg-form-submit").bind("click",function(e){e.preventDefault();var t=_SgmntfY_._getJq()(this),n=_SgmntfY_._getJq()("."+campaign.instanceId+".seg-form-survey"),a=n.find(".seg-form");checkValidity(a)&&(t.addClass("seg-sending"),t.css({"pointer-events":"none"}),setTimeout(function(){n.addClass("seg-popup-thanks").removeClass("segFadeInUp")},1300),setTimeout(function(){n.addClass("segFadeOutDown")},3e3),setTimeout(function(){n.remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},6e3),0<a.length&&(_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"submit",interactionId:campaign.name,instanceId:campaign.instanceId}),_SgmntfY_._variables.segmentifyObj("user:form",{formName:campaign.name,fields:a.sgmSerializeForm()})))});var checkValidity=function(e){try{e.find(".seg-form-invalid").removeClass("seg-form-invalid");for(var t=e.find("input,textarea"),n=!0,a=0;a<t.length;++a){var r=t[a],i=_SgmntfY_._getJq()(r);"checkbox"!==i.attr("type")&&(r.checkValidity()||("radio"===i.attr("type")?i.parent().addClass("seg-form-invalid"):i.addClass("seg-form-invalid"),n=!1))}var s=e.find('input[type="checkbox"]'),o=[];s.each(function(){-1==o.indexOf(this.name)&&o.push(this.name)});for(var c=0;c<o.length;++c)0<e.find('input[name="'+o[c]+'"]:required').length&&0==e.find('input[name="'+o[c]+'"]:checked').length&&(e.find('input[name="'+o[c]+'"]').parent().addClass("seg-form-invalid"),n=!1);return n}catch(e){return!0}}},POPUP_BANNER:function(campaign,request){var config={title:campaign.title,image:campaign.image,url:campaign.url,vertical:campaign.verticalPosition,horizontal:campaign.horizontalPosition};try{if(campaign.preJs){eval(campaign.preJs);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var renderedHtml=_SgmntfY_._getMustache().render(campaign.html,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),campaign.css&&_SgmntfY_._getJq()("<style />").html(campaign.css).prependTo(_SgmntfY_._getJq()("body"));try{campaign.postJs&&eval(campaign.postJs)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}"true"===campaign.overlay&&_SgmntfY_._getJq()(".seg-popup-overlay").show(),_SgmntfY_._getJq()(".seg-popup-close").bind("click",function(){var e=_SgmntfY_._getJq()(this);e.parent(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"close",instanceId:campaign.instanceId,interactionId:campaign.instanceId})}),_SgmntfY_._getJq()(".seg-banner-container img").bind("click",function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",instanceId:campaign.instanceId,interactionId:campaign.instanceId})}),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:campaign.instanceId,interactionId:campaign.instanceId})},POPUP_RECOMMENDATION:function(campaign,request){for(var config={title:campaign.title,vertical:campaign.verticalPosition,horizontal:campaign.horizontalPosition},productsList=campaign.productsList||[],products=[],i=0;i<productsList.length;++i)for(var j=0;j<productsList[i].length;++j)products.push(productsList[i][j]);if(!(products.length<3)){"SHUFFLE"===campaign.ordering&&(products=_SgmntfY_._shuffle(products)),config.products=products;try{if(campaign.preJs){eval(campaign.preJs);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var _products=[],_productId="";request.originalParams&&request.originalParams.params&&(_productId=request.originalParams.params.productId||"");for(var i=0;i<config.products.length&&3!==_products.length;++i){var _product=config.products[i];_product.productId!==_productId&&_products.push(_product)}if(3===_products.length){config.products=_products;var renderedHtml=_SgmntfY_._getMustache().render(campaign.html,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),campaign.css&&_SgmntfY_._getJq()("<style />").html(campaign.css).prependTo(_SgmntfY_._getJq()("body"));try{campaign.postJs&&eval(campaign.postJs)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}"true"===campaign.overlay&&_SgmntfY_._getJq()(".seg-popup-overlay").show(),_SgmntfY_._getJq()(".seg-popup-close").bind("click",function(){var e=_SgmntfY_._getJq()(this);e.parent(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"close",instanceId:campaign.instanceId,interactionId:campaign.instanceId})}),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",instanceId:campaign.instanceId,interactionId:campaign.instanceId})}}},NOTIFICATION_BAR:function(campaign,request){var config={title:campaign.title,image:campaign.image,bgColor:campaign.bgColor,textColor:campaign.textColor,url:campaign.url,instanceId:campaign.instanceId,divClass:"sgf-notif-bar-"+(campaign.verticalPosition||"top")};try{if(campaign.preJs){eval(campaign.preJs);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var renderedHtml=_SgmntfY_._getMustache().render(campaign.html,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),campaign.css&&_SgmntfY_._getJq()("<style />").html(campaign.css).prependTo(_SgmntfY_._getJq()("body"));try{campaign.postJs&&eval(campaign.postJs)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}_SgmntfY_.LOG_MESSAGE("DEBUG","Notification Bar appended to html body for campaign("+campaign.instanceId+")"),"true"===campaign.sticky&&(_SgmntfY_._getJq()(".seg-notification-bar").addClass("seg-notification-bar-sticky"),_SgmntfY_._getJq()(".seg-notification-bar-sticky:not([data-loaded])").each(function(){var e=_SgmntfY_._getJq()(this);if(e.attr("data-loaded","true"),e.find("img").length){var t=e.find("img:first"),n=t.attr("src")||t.attr("data-src");t.on("load",function(){var e=_SgmntfY_._getJq()(this).parents(".seg-notification-bar:first"),t=parseInt(_SgmntfY_._getJq()("body").css("padding-top").replace("px","")),n=parseInt(_SgmntfY_._getJq()("body").css("padding-bottom").replace("px",""));e.hasClass("sgf-notif-bar-top")?t+=e.height():e.hasClass("sgf-notif-bar-bottom")&&(n+=e.height()),_SgmntfY_._getJq()("body").css("padding-top",t).css("padding-bottom",n)}),t[0].src=n}})),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),_SgmntfY_._getJq()(".seg-notification-bar-v2-"+campaign.instanceId).length?_SgmntfY_._getJq()(".seg-notification-bar-v2-"+campaign.instanceId).bind("click",function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",instanceId:campaign.instanceId,interactionId:campaign.instanceId})}):_SgmntfY_._getJq()(".sgf-link").bind("click",function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",instanceId:campaign.instanceId,interactionId:campaign.instanceId})})},PUSH_PERMISSION:function(campaign,request){var config={title:campaign.title,text:campaign.text,icon:campaign.icon,buttonLaterText:campaign.buttonLaterText,buttonAllowText:campaign.buttonAllowText},pushFadeUp=function(e){_SgmntfY_._getJq()(".seg-popup-push").addClass("seg-fade-up"),window.setTimeout(function(){_SgmntfY_._getJq()(".seg-popup-push").remove()},e)};try{if(campaign.preJs){eval(campaign.preJs);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var renderedHtml=_SgmntfY_._getMustache().render(campaign.html,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),campaign.css&&_SgmntfY_._getJq()("<style />").html(campaign.css).prependTo(_SgmntfY_._getJq()("body"));try{campaign.postJs&&eval(campaign.postJs)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}_SgmntfY_.LOG_MESSAGE("DEBUG","Push Permission appended to html body for campaign("+campaign.instanceId+")"),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),_SgmntfY_._getJq()(".seg-popup-push-bttn-later").click(function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"later",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),pushFadeUp(500)}),_SgmntfY_._getJq()(".seg-popup-push-bttn-allow").click(function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),pushFadeUp(500);var e=_SgmntfY_._variables.apiKey,t=_SgmntfY_._getUserId(),n=campaign.instanceId||"";if(e&&t){var a=(campaign.url||"https://"+e.split("-").join("")+".app.segmentify.com/push/ecommerce.en.html")+"?apiKey="+e+"&userId="+t+"&instanceId="+n;campaign.dataCenterNo&&(a+="&dcn="+campaign.dataCenterNo),window.open(a,"Push Permission","width=600,height=350")}})}},_functions:{getFunction:function(t){switch(t.toLowerCase()){case"apikey":return _SgmntfY_._functions.setApiKey;case"loglevel":return _SgmntfY_._functions.setLogLevel;case"variables":return _SgmntfY_._functions.setVariables;case"userid":return _SgmntfY_._functions.setUserId;case"view:page":return _SgmntfY_._functions.pageView;case"view:product":return _SgmntfY_._functions.productView;case"basket:add":return _SgmntfY_._functions.addToBasket;case"basket:remove":return _SgmntfY_._functions.removeFromBasket;case"basket:clear":return _SgmntfY_._functions.clearBasket;case"checkout:basket":return _SgmntfY_._functions.checkoutViewBasket;case"checkout:customer":return _SgmntfY_._functions.checkoutCustomerInfo;case"checkout:payment":return _SgmntfY_._functions.checkoutPaymentInfo;case"checkout:purchase":return _SgmntfY_._functions.checkoutPurchase;case"user:signin":return _SgmntfY_._functions.userSignIn;case"user:signout":return _SgmntfY_._functions.userSignOut;case"user:signup":return _SgmntfY_._functions.userSignUp;case"user:subscribe":return _SgmntfY_._functions.userSubscribe;case"user:unsubscribe":return _SgmntfY_._functions.userUnsubscribe;case"user:update":return _SgmntfY_._functions.userInfoUpdate;case"event:custom":return _SgmntfY_._functions.customEvent;case"event:interaction":return _SgmntfY_._functions.interaction;case"user:form":return _SgmntfY_._functions.userForm;case"banner:impression":return _SgmntfY_._functions.bannerImpression;case"banner:click":return _SgmntfY_._functions.bannerClick;case"banner:update":return _SgmntfY_._functions.bannerUpdate;case"bannergroup:view":return _SgmntfY_._functions.bannerGroupView;case"bannergroup:detail":return _SgmntfY_._functions.bannerGroupDetail;case"impression:promotion":return _SgmntfY_._functions.promotionImpression;case"view:promotion":return _SgmntfY_._functions.promotionView;case"push:interaction":return _SgmntfY_._functions.pushInteraction;default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected Command: "+t)}}},getDataLayerFunction:function(t,e){switch(t.toLowerCase()){case"page":return _SgmntfY_._functions.pageView;case"product":return _SgmntfY_._functions.productView;case"basket":switch(e.step.toLowerCase()){case"add":return _SgmntfY_._functions.addToBasket;case"remove":return _SgmntfY_._functions.removeFromBasket;case"clear":return _SgmntfY_._functions.clearBasket;default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected Basket Operations Step: "+e.step)}}case"checkout":switch(e.step.toLowerCase()){case"basket":return _SgmntfY_._functions.checkoutViewBasket;case"customer":return _SgmntfY_._functions.checkoutCustomerInfo;case"payment":return _SgmntfY_._functions.checkoutPaymentInfo;case"purchase":return _SgmntfY_._functions.checkoutPurchase;default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected Checkout Step: "+e.step)}}case"user":switch(e.step.toLowerCase()){case"signin":return _SgmntfY_._functions.userSignIn;case"signout":return _SgmntfY_._functions.userSignOut;case"signup":return _SgmntfY_._functions.userSignUp;case"subscribe":return _SgmntfY_._functions.userSubscribe;case"unsubscribe":return _SgmntfY_._functions.userUnsubscribe;case"update":return _SgmntfY_._functions.userInfoUpdate;default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected User Operations Step: "+e.step)}}case"interaction":return _SgmntfY_._functions.interaction;case"form":return _SgmntfY_._functions.userForm;case"banners":return _SgmntfY_._functions.bannerGroupView;case"banner":switch(e.type.toLowerCase()){case"impression":return _SgmntfY_._functions.bannerImpression;case"click":return _SgmntfY_._functions.bannerClick;case"update":return _SgmntfY_._functions.bannerUpdate;default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected Banner Operations Type: "+e.type)}}case"custom":return _SgmntfY_._functions.customEvent;case"promotion":switch(e.type.toLowerCase()){case"impression":return _SgmntfY_._functions.promotionImpression;case"view":return _SgmntfY_._functions.promotionView;default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected Promotion Type: "+e.type)}}default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected Command: "+t)}}},callFunction:function(e){var t=[];e=e||[];for(var n=0;n<e.length;n++){var a=e[n],r=_SgmntfY_._functions.getFunction(a[0]),i=Array.prototype.slice.call(a,1);try{var s=r.apply(null,i);s&&(t=t.concat(s)),_SgmntfY_.LOG_MESSAGE("INFO","Event triggered: "+a[0])}catch(e){_SgmntfY_.LOG_MESSAGE("Error","Can't convert command("+a[0]+") into request data. Details: "+e)}}_SgmntfY_._sendRequestToServer(t)},setApiKey:function(e,t){if(_SgmntfY_._variables.apiKey=e,_SgmntfY_.LOG_MESSAGE("DEBUG","Api Key: "+e),t)_SgmntfY_.LOG_MESSAGE("INFO","Account specific style is disabled, skipping...");else{var n=_SgmntfY_._variables.segmentifyCDNUrl+e+"/segmentify.css";_SgmntfY_.LOG_MESSAGE("INFO","Loading account specific css file: "+n),_SgmntfY_._loadCSS(n)}_SgmntfY_._isNotEmpty(_SgmntfY_._variables.apiKey)&&(_SgmntfY_._consumeNextPageQueue(),_SgmntfY_._consumeRetryQueue())},setLogLevel:function(e){var t=_SgmntfY_.LOG_LEVELS[e];void 0!==t&&(_SgmntfY_._variables.logLevel=t,_SgmntfY_.LOG_MESSAGE("DEBUG","Segmentify Log Level Changed to: "+e))},setVariables:function(e){e=e||{},_SgmntfY_._extend(_SgmntfY_._variables,e),_SgmntfY_.LOG_MESSAGE("DEBUG","Segmentify Variables are updated - New Values: "+e)},setUserId:function(e){var t=_SgmntfY_._getUserId();if(_SgmntfY_._storePersistentData(_SgmntfY_._variables.userStorageKey,e,390,_SgmntfY_._variables.storage.user.local),_SgmntfY_.LOG_MESSAGE("DEBUG","Segmentify User Id Changed to: "+e),t!==e){var n={};return n.oldUserId=t||"",_SgmntfY_._prepareRequest(n,"USER_CHANGE")}},pageView:function(e){return e=e||{},_SgmntfY_._prepareRequest(e,"PAGE_VIEW")},productView:function(e){if((e=e||{}).url=e.url||document.URL,e.productUrl=e.productUrl||e.url||document.URL,"number"==typeof e.productId&&(e.productId=e.productId.toString()),"string"==typeof e.categories)if(-1!==e.categories.indexOf("|")){var t=e.categories.split("|");for(var n in e.categories=[],t)t.hasOwnProperty(n)&&e.categories.push(t[n].trim())}else e.categories=[e.categories];else for(var a in e.categories)e.categories.hasOwnProperty(a)&&"string"==typeof e.categories[a]&&(e.categories[a]=e.categories[a].trim());e.categories=(e.categories||[]).filter(_SgmntfY_._null),e.source=e.source||_SgmntfY_._sourceOfUrl();var r=_SgmntfY_._getClickedBanners();if(0<r.length){var i=[];for(a=0;a<r.length;++a){var s=_SgmntfY_._split(r[a],":",4);4!==s.length||isNaN(parseInt(s[2]))||i.push({title:s[0],group:s[1],order:parseInt(s[2])})}e.activeBanners=i}return 0<=_SgmntfY_._variables.skipProductDetail.device.indexOf(_SgmntfY_._variables.ua.type)&&(e.noUpdate=["all"]),_SgmntfY_._prepareRequest(e,"PRODUCT_VIEW")},addToBasket:function(e){(e=e||{}).step="add",e.quantity=e.quantity||1;var t=_SgmntfY_._getClickedBanners();if(0<t.length){for(var n=[],a=0;a<t.length;++a){var r=_SgmntfY_._split(t[a],":",4);4!==r.length||isNaN(parseInt(r[2]))||n.push({title:r[0],group:r[1],order:parseInt(r[2])})}e.activeBanners=n}return _SgmntfY_._variables.disableNextPage||void 0!==e.nextPage||(e.nextPage=!0),e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),_SgmntfY_._prepareRequest(e,"BASKET_OPERATIONS")},removeFromBasket:function(e){return(e=e||{}).step="remove",_SgmntfY_._variables.disableNextPage||void 0!==e.nextPage||(e.nextPage=!0),e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),_SgmntfY_._prepareRequest(e,"BASKET_OPERATIONS")},clearBasket:function(e){return(e=e||{}).step="clear",_SgmntfY_._variables.disableNextPage||void 0!==e.nextPage||(e.nextPage=!0),e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),_SgmntfY_._prepareRequest(e,"BASKET_OPERATIONS")},checkoutViewBasket:function(e){if((e=e||{}).step="view-basket",e.hasOwnProperty("productList"))for(var t=0;t<e.productList.length;++t)e.productList[t].quantity=e.productList[t].quantity||1;return e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),_SgmntfY_._prepareRequest(e,"CHECKOUT")},checkoutCustomerInfo:function(e){return(e=e||{}).step="customer-info",e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),_SgmntfY_._prepareRequest(e,"CHECKOUT")},checkoutPaymentInfo:function(e){return(e=e||{}).step="payment-info",e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),_SgmntfY_._prepareRequest(e,"CHECKOUT")},checkoutPurchase:function(e){if((e=e||{}).step="purchase",e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),e.hasOwnProperty("productList"))for(var t=0;t<e.productList.length;++t)e.productList[t].quantity=e.productList[t].quantity||1;var n=_SgmntfY_._getClickedBanners();if(0<n.length){for(var a=[],r=0;r<n.length;++r){var i=_SgmntfY_._split(n[r],":",4);4!==i.length||isNaN(parseInt(i[2]))||a.push({title:i[0],group:i[1],order:parseInt(i[2])})}e.activeBanners=a}return _SgmntfY_._prepareRequest(e,"CHECKOUT")},userSignIn:function(e){return(e=e||{}).step="signin",e.isLogin=!0,e.isRegistered=!0,_SgmntfY_._prepareRequest(e,"USER_OPERATIONS")},userSignOut:function(e){return(e=e||{}).step="signout",e.isLogin=!1,_SgmntfY_._prepareRequest(e,"USER_OPERATIONS")},userSignUp:function(e){return(e=e||{}).step="signup",e.isRegistered=!0,_SgmntfY_._prepareRequest(e,"USER_OPERATIONS")},userSubscribe:function(e){return(e=e||{}).step="subscribe",_SgmntfY_._prepareRequest(e,"USER_OPERATIONS")},userUnsubscribe:function(e){return(e=e||{}).step="unsubscribe",_SgmntfY_._prepareRequest(e,"USER_OPERATIONS")},userInfoUpdate:function(e){(e=e||{}).step="update",void 0!==e.isLogin&&(e.isRegistered="true"===e.isLogin||!0===e.isLogin?"true":e.isRegistered);var t=JSON.stringify(e),n=_SgmntfY_._getPersistentData("sgfUserUpdateData",!0);if(void 0===n||t!==n)return _SgmntfY_._storePersistentData("sgfUserUpdateData",t,-1,!0),_SgmntfY_._prepareRequest(e,"USER_OPERATIONS")},userForm:function(e){return e=e||{},_SgmntfY_._prepareRequest(e,"FORM")},customEvent:function(e){return e=e||{},_SgmntfY_._prepareRequest(e,"CUSTOM_EVENT")},interaction:function(e){return e=e||{},_SgmntfY_._variables.disableNextPage||void 0!==e.nextPage||(e.nextPage=!0),"impression"!==e.type&&"widget-view"!==e.type||(e.nextPage=!1),_SgmntfY_._prepareRequest(e,"INTERACTION")},bannerImpression:function(e){return(e=e||{}).async="false",e.type="impression",_SgmntfY_._prepareRequest(e,"BANNER_OPERATIONS")},bannerClick:function(e){return(e=e||{}).async="false",e.type="click",_SgmntfY_._variables.disableNextPage||void 0!==e.nextPage||(e.nextPage=!0),_SgmntfY_._addClickedBanner(e.title,e.group,e.order,e.url),_SgmntfY_._prepareRequest(e,"BANNER_OPERATIONS")},bannerUpdate:function(e){return(e=e||{}).async="false",e.type="update",_SgmntfY_._prepareRequest(e,"BANNER_OPERATIONS")},bannerGroupView:function(e){return e=e||{},_SgmntfY_._prepareRequest(e,"BANNER_GROUP_VIEW")},bannerGroupDetail:function(e){return e=e||{},_SgmntfY_._prepareRequest(e,"INTERNAL_BANNER_GROUP")},promotionImpression:function(e){return(e=e||{}).type="impression","string"==typeof e.categories&&(e.categories=[e.categories]),e.categories=(e.categories||[]).filter(_SgmntfY_._null),"string"==typeof e.brands&&(e.brands=[e.brands]),e.brands=(e.brands||[]).filter(_SgmntfY_._null),"string"==typeof e.labels&&(e.labels=[e.labels]),e.labels=(e.labels||[]).filter(_SgmntfY_._null),"string"==typeof e.productIds&&(e.productIds=[e.productIds]),e.productIds=(e.productIds||[]).filter(_SgmntfY_._null),_SgmntfY_._prepareRequest(e,"PROMOTION")},promotionView:function(e){return(e=e||{}).type="view","string"==typeof e.categories&&(e.categories=[e.categories]),e.categories=(e.categories||[]).filter(_SgmntfY_._null),"string"==typeof e.brands&&(e.brands=[e.brands]),e.brands=(e.brands||[]).filter(_SgmntfY_._null),"string"==typeof e.labels&&(e.labels=[e.labels]),e.labels=(e.labels||[]).filter(_SgmntfY_._null),"string"==typeof e.productIds&&(e.productIds=[e.productIds]),e.productIds=(e.productIds||[]).filter(_SgmntfY_._null),_SgmntfY_._prepareRequest(e,"PROMOTION")},pushInteraction:function(a){var r={data:null,url:_SgmntfY_._variables.segmentifyApiUrl+"interaction/notification?apiKey="+_SgmntfY_._variables.apiKey+"&instanceId="+a.instanceId+"&userId="+_SgmntfY_._getUserId()+"&type="+a.type+"&segmentify=true&device="+a._device};_SgmntfY_._getJq().ajax({contentType:"text/plain",processData:!1,type:"GET",url:r.url,timeout:1e3*_SgmntfY_._variables.constants.eventTimeout}).done(function(e,t,n){_SgmntfY_._ajaxSuccess(r,e,t),_SgmntfY_._storePersistentData(a.instanceId,"1",.006),_SgmntfY_.LOG_MESSAGE("INFO","Push campaign interaction is sent for campaign: "+a.instanceId)}).fail(function(e,t,n){_SgmntfY_._ajaxError(r,e,t,n)})}},_prepareRequest:function(e,t,n){if(void 0===e.noSend||"true"!==e.noSend)if(_SgmntfY_._getJq()("html").hasClass("translated-ltr")||_SgmntfY_._getJq()("html").hasClass("translated-rtl"))_SgmntfY_.LOG_MESSAGE("DEBUG","Page is translated, ignoring event");else if(navigator&&navigator.language&&"c"===navigator.language)_SgmntfY_.LOG_MESSAGE("DEBUG","This is a bot, ignoring event");else if(_SgmntfY_._isEmpty(_SgmntfY_._variables.apiKey))_SgmntfY_.LOG_MESSAGE("ERROR","Api Key is not set, not sending event: "+t);else if(_SgmntfY_._isEmpty(_SgmntfY_._getUserId()))_SgmntfY_.LOG_MESSAGE("ERROR","userId is not set, not sending event: "+t);else{if(!_SgmntfY_._isEmpty(_SgmntfY_._getSessionId())){if(void 0===n&&(n=!1),!n&&"boolean"==typeof e.nextPage&&!0===e.nextPage)return _SgmntfY_._addToNextPageQueue({eventName:t,params:e}),null;var a=new Date,r={data:{name:t,userId:_SgmntfY_._getUserId(),sessionId:_SgmntfY_._getSessionId(),testMode:_SgmntfY_._getTestMode()||"false",device:_SgmntfY_._variables.ua.type||"PC",noProcess:e.noProcess||!1,tryCount:0,nextPage:e.nextPage||!1,params:e.params||{},recommendIds:(e.recommendIds||[]).filter(_SgmntfY_._null),pageUrl:e.pageUrl||document.URL,referrer:e.referrer||document.referrer,browser:e.browser||_SgmntfY_._variables.ua.name,os:e.os||_SgmntfY_._variables.ua.os,osversion:e.osversion||_SgmntfY_._variables.ua.osversion,userAgent:e.userAgent||_SgmntfY_._variables.ua.agentString,lang:e.lang||_SgmntfY_._variables.language,currency:e.currency||_SgmntfY_._variables.currency,region:e.region||_SgmntfY_._variables.region,async:e.async||"true",email:e.email||"",ft:_SgmntfY_._getFireTime(a)||"",tz:_SgmntfY_._getTimeZone(a)||""},originalParams:e,eventName:t};"function"==typeof e.recommendationCallback&&_SgmntfY_._getJq().extend(r,{recommendationCallback:e.recommendationCallback});for(var i=_SgmntfY_._variables.requiredParams[t],s=0;s<i.length;++s){if(!_SgmntfY_._isNotEmpty(e[i[s]]))return void _SgmntfY_.LOG_MESSAGE("ERROR","Missing parameter["+i[s]+"] in event: "+t);r.data[i[s]]=e[i[s]],"string"==typeof r.data[i[s]]&&(r.data[i[s]]=_SgmntfY_._clearNullByte(r.data[i[s]]).trim())}var o=_SgmntfY_._variables.optionalParams[t];for(s=0;s<o.length;++s)_SgmntfY_._isNotEmpty(e[o[s]])&&(r.data[o[s]]=e[o[s]],"string"==typeof r.data[o[s]]&&(r.data[o[s]]=_SgmntfY_._clearNullByte(r.data[o[s]]).trim()));return r}_SgmntfY_.LOG_MESSAGE("ERROR","sessionId is not set, not sending event: "+t)}else _SgmntfY_.LOG_MESSAGE("DEBUG","No send flag is set for event: "+t+", ignoring event")},_storePersistentData:function(t,n,e,a){if("undefined"!=typeof Storage&&a)try{localStorage.setItem(t,n),_SgmntfY_.LOG_MESSAGE("DEBUG","Segmentify Persistent Data (Local Storage) Update: "+t+": "+n)}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't store Persistent Data (Local Storage) Update: "+t+": "+n)}else{"string"==typeof n&&(n=encodeURIComponent(n));var r,i,s="",o="";e&&((r=new Date).setTime(r.getTime()+24*e*60*60*1e3),s="; expires="+r.toGMTString()),_SgmntfY_._variables.domain&&2<=_SgmntfY_._variables.domain.split(".").length&&(o="; domain="+_SgmntfY_._variables.domain),i=t+"="+n+s+o+"; path=/";try{document.cookie=i,_SgmntfY_.LOG_MESSAGE("DEBUG","Segmentify Persistent Data (Cookie) Update: "+i)}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't store Persistent Data (Cookie) Update: "+i)}}},_getPersistentData:function(t,e){if("undefined"!=typeof Storage&&e)try{return localStorage.getItem(t)}catch(e){return _SgmntfY_.LOG_MESSAGE("ERROR","Can't get Persistent Data (Local Storage): "+t),null}else{var n=t+"=";try{for(var a=document.cookie.split(";"),r=0;r<a.length;r++){var i=a[r].trim();if(0===i.indexOf(n))return decodeURIComponent(i.substring(n.length,i.length))}return null}catch(e){return _SgmntfY_.LOG_MESSAGE("ERROR","Can't get Persistent Data (Cookie): "+t),null}}},_clearProductUrl:function(e){return _SgmntfY_._stripQueryParameters(e,["_sgm_source","_sgm_campaign","_sgm_action","_sgm_type","_sgm_test","utm_source","utm_medium","utm_term","utm_content","utm_campaign","utm_type","p_id","gclid","ds_p","ds_eid","ds_aid","ds_e","ds_c","ds_cid","ds_ag","ds_agid","ds_k","ds_kid","ds_kids","ds_kidnl","gclick","gsrc","gclsrc"])},_stripQueryParameters:function(e,t){if(void 0===t||!t)return e;"string"==typeof t&&(t=[t]);var n=(e||"").split("?");if(2<=n.length){for(var a=[],r=0;r<(t||[]).length;r++)a.push(encodeURIComponent(t[r])+"=");var i=n[1].split(/[&;]/g);for(r=i.length;0<r--;)for(var s=0;s<a.length;s++)if(-1!==i[r].lastIndexOf(a[s],0)){i.splice(r,1);break}return 0<i.length?n[0]+"?"+i.join("&"):n[0]}return e},_getQueryParameter:function(e,t){var n=location.search;void 0!==t&&(n=t),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(n);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},_sendTrackedEvent:function(e){var t,n,a;if(a="segmentify"===_SgmntfY_._getQueryParameter("utm_source",e)?(t=_SgmntfY_._getQueryParameter("utm_campaign",e),n=_SgmntfY_._getQueryParameter("utm_medium",e),_SgmntfY_._getQueryParameter("utm_content",e)):(t=_SgmntfY_._getQueryParameter("_sgm_campaign",e),n=_SgmntfY_._getQueryParameter("_sgm_action",e),_SgmntfY_._getQueryParameter("_sgm_source",e)),t&&n&&a&&(_SgmntfY_.LOG_MESSAGE("DEBUG","Sending tracked event: "+n+" - "+t+" - "+a),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:n,interactionId:a,instanceId:t})),"push"===n){var r=_SgmntfY_._getPersistentData(t);(_SgmntfY_._isEmpty(r)||_SgmntfY_._isNotEmpty(r)&&"0"===r)&&_SgmntfY_._variables.segmentifyObj("push:interaction",{type:"click",interactionId:a,instanceId:t,_device:_SgmntfY_._variables.ua.type||"PC"})}},_setTestMode:function(e){var t=e||_SgmntfY_._getQueryParameter("_sgm_test");if(_SgmntfY_._toggleTestMode(t),"exists"!==_SgmntfY_._getExtensionStatus()&&"true"===_SgmntfY_._getTestMode())try{var n=['<div class="sgm-test-mode-header">','<a href="http://www.segmentify.com" target="_blank" class="sgm-logo"> </a>','<a href="https://chrome.google.com/webstore/detail/segmentify/dhcffckfimabfhbbjdngnajhnlohfjeo" target="_blank" class="sgm-ext"><span>Get <strong>Chrome Extension</strong> Now!</span></a>','<span class="sgm-test-mode-Show-Hide" data-hide="Hide" data-show="Show"></span>','<div class="sgm-test-mode-key">','<h2 id="sgm-test-mode-message"> Your browser is in<strong>Segmentify Test Mode</strong> </h2>','<div class="sgm-test-mode-radio">','<input class="sgm-tgl sgm-tgl-ios" id="sgm-cb1" type="checkbox" checked>','<label class="sgm-tgl-btn" for="sgm-cb1"></label>',"</div>","</div>","</div>"].join("\n");setTimeout(function(){_SgmntfY_._getJq()("body").prepend(n),"chrome"!==_SgmntfY_._variables.ua.name.toLowerCase()&&_SgmntfY_._getJq()(".sgm-test-mode-header .sgm-ext").hide(),_SgmntfY_._getJq()("body").addClass("sgm-test-body"),_SgmntfY_._getJq()("#sgm-cb1").change(function(){var e=_SgmntfY_._getJq()(this);setTimeout(function(){_SgmntfY_._toggleTestMode(e.is(":checked")?"on":"off")},400)}),_SgmntfY_._getJq()(".sgm-test-mode-Show-Hide").click(function(){_SgmntfY_._getJq()("body").toggleClass("sgm-test-header-open")})},800)}catch(e){_SgmntfY_.LOG_MESSAGE("DEBUG","Can't show test mode header: "+e)}},_getTestMode:function(){return _SgmntfY_._getPersistentData(_SgmntfY_._variables.testMode)},_toggleTestMode:function(e){"on"===e?(_SgmntfY_._getJq()("#sgm-test-mode-message").html("Your browser is in<strong>Segmentify Test Mode</strong>"),_SgmntfY_._getJq()("#sgm-test-mode-message").find("strong").css("color","#50BC61"),_SgmntfY_.LOG_MESSAGE("INFO","Segmentify Test Mode activated"),_SgmntfY_._storePersistentData(_SgmntfY_._variables.testMode,"true",180)):"off"===e&&(_SgmntfY_._getJq()("#sgm-test-mode-message").html("<strong>Segmentify Test Mode</strong> is disabled"),_SgmntfY_._getJq()("#sgm-test-mode-message").find("strong").css("color","#fff"),_SgmntfY_.LOG_MESSAGE("INFO","Segmentify Test Mode deactivated"),_SgmntfY_._storePersistentData(_SgmntfY_._variables.testMode,"false",180),window.alert("You are out of Segmentify Test Mode, you will not see test campaigns."),window.location=_SgmntfY_._stripQueryParameters(document.URL,"_sgm_test"))},_getTracking:function(){var e=_SgmntfY_._getPersistentData(_SgmntfY_._variables.tracking);return _SgmntfY_._isNotEmpty(e)&&_SgmntfY_._setTracking(e),e},_setTracking:function(e){"disabled"!==e&&(e="enabled"),_SgmntfY_._storePersistentData(_SgmntfY_._variables.tracking,e,390)},_getSessionId:function(){var e=_SgmntfY_._getPersistentData(_SgmntfY_._variables.sessionStorageKey,_SgmntfY_._variables.storage.session.local);return e?e.trim():""},_getUserId:function(){var e=_SgmntfY_._getPersistentData(_SgmntfY_._variables.userStorageKey,_SgmntfY_._variables.storage.user.local);return e?e.trim():""},_shuffle:function(e){for(var t,n,a=e.length;a;t=Math.floor(Math.random()*a),n=e[--a],e[a]=e[t],e[t]=n);return e},_getClickedBanners:function(){try{var e=_SgmntfY_._variables.storage.clickedBanners;return JSON.parse(_SgmntfY_._getPersistentData(e.key,e.local))||[]}catch(e){_SgmntfY_.LOG_MESSAGE("DEBUG","Can't read clicked banners: "+e)}return[]},_addClickedBanner:function(e,t,n,a){if(void 0!==e&&void 0!==t&&void 0!==n&&void 0!==a){var r=e+":"+t+":"+n+":"+a,i=_SgmntfY_._getClickedBanners();-1===i.indexOf(r)&&i.push(r),i.length>_SgmntfY_._variables.constants.clickedBannersLimit&&(i=i.splice(i.length-_SgmntfY_._variables.constants.clickedBannersLimit));var s=_SgmntfY_._variables.storage.clickedBanners;_SgmntfY_._storePersistentData(s.key,JSON.stringify(i),0,s.local)}},_getDelayedActions:function(){try{var e=_SgmntfY_._variables.storage.delayedActions;return JSON.parse(_SgmntfY_._getPersistentData(e.key,e.local))||[]}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't read delayed actions: "+e)}return[]},_setDelayedActions:function(e){var t=_SgmntfY_._variables.storage.delayedActions;_SgmntfY_._storePersistentData(t.key,JSON.stringify(e),0,t.local)},_addDelayedAction:function(a){for(var e=_SgmntfY_._getDelayedActions(),t=0;t<e.length;t++)if(e[t].params.actionId===a.params.actionId)return!1;var n=new Date;if(a.delayDate.getTime()<n.getTime())return!1;var r=a.type,i=_SgmntfY_._actions[a.type],s=a.params,o=a.request;return setTimeout(function(){for(var e=_SgmntfY_._getDelayedActions(),t=!1,n=0;n<e.length;n++)e[n].params.actionId===a.params.actionId&&(t=!0);t&&(_SgmntfY_.LOG_MESSAGE("INFO","Action("+r+") is triggered after delay"),i.call(null,s,o),_SgmntfY_._removeDelayedAction(s.actionId))},a.delayDate.getTime()-n.getTime()+Math.floor(750*Math.random())),e.push(a),_SgmntfY_._setDelayedActions(e),!0},_removeDelayedAction:function(e){for(var t=_SgmntfY_._getDelayedActions(),n=0;n<t.length;n++)if(t[n].params.actionId===e)return t.splice(n,1),void _SgmntfY_._setDelayedActions(t)},_getRetryQueue:function(){try{var e=_SgmntfY_._variables.storage.retryQueue;return JSON.parse(_SgmntfY_._getPersistentData(e.key,e.local))||[]}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't read retry queue: "+e)}return[]},_setRetryQueue:function(e){var t=_SgmntfY_._variables.storage.retryQueue;_SgmntfY_._storePersistentData(t.key,JSON.stringify(e),0,t.local)},_addToRetryQueue:function(e){for(var t=_SgmntfY_._getRetryQueue();0<e.length;){var n=e.shift();if("CHECKOUT"===n.eventName||"BASKET_OPERATIONS"===n.eventName||"INTERACTION"===n.eventName){var a=n.data.tryCount||0;a<_SgmntfY_._variables.constants.retryLimit&&(n.data.tryCount=a+1,_SgmntfY_._variables.isUnload&&(n.originalParams.discardResponse="true"),t.push(n))}}_SgmntfY_._setRetryQueue(t)},_consumeRetryQueue:function(){var e=_SgmntfY_._getRetryQueue();if(e&&0<e.length){for(var t=[];0<e.length;){var n=e.shift();n.data.userId=_SgmntfY_._getUserId(),n.data.sessionId=_SgmntfY_._getSessionId(),t.push(n)}_SgmntfY_._sendRequestToServer(t),_SgmntfY_._setRetryQueue([])}},_getDataLayer:function(){return window[_SgmntfY_._variables.dataLayer]},_consumeDataLayer:function(){if(_SgmntfY_._variables.consumeDataLayer){function e(e,t){if(!t.hasOwnProperty("__processed__")||!0!==t.__processed__){var n=_SgmntfY_._extend(t,i),a=_SgmntfY_._functions.getDataLayerFunction(e,n).apply(null,[n]);a&&r.push(a)}}function t(e,t){var n=JSON.parse(JSON.stringify(t)),a=_SgmntfY_._variables.dataLayerConfig[e]||{};for(var r in a)if(a.hasOwnProperty(r)){var i=a[r];if(n.hasOwnProperty(i)){var s=n[i];delete n[i],n[r]=s}}return n}var r=[],n=_SgmntfY_._getDataLayer()||{},i=t("common",n.common||{});for(var a in i.hasOwnProperty("userId")&&_SgmntfY_._functions.setUserId(i.userId),n)if(n.hasOwnProperty(a)){if("common"===a)continue;if(_SgmntfY_._getJq().isArray(n[a]))for(var s=0;s<n[a].length;++s)e(a,t(a,n[a][s])),_SgmntfY_._getDataLayer()[a][s].__processed__=!0;else e(a,t(a,n[a])),_SgmntfY_._getDataLayer()[a].__processed__=!0}0<r.length&&_SgmntfY_._sendRequestToServer(r)}},_getNextPageQueue:function(){try{var e=_SgmntfY_._variables.storage.nextPageQueue;return JSON.parse(_SgmntfY_._getPersistentData(e.key,e.local))||[]}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't read next page queue: "+e)}return[]},_setNextPageQueue:function(e){var t=_SgmntfY_._variables.storage.nextPageQueue;_SgmntfY_._storePersistentData(t.key,JSON.stringify(e),0,t.local)},_addToNextPageQueue:function(e){var t=_SgmntfY_._getNextPageQueue();t.push(e),_SgmntfY_._setNextPageQueue(t)},_consumeNextPageQueue:function(){var e=_SgmntfY_._getNextPageQueue();if(e&&0<e.length){for(var t=[];0<e.length;){var n=e.shift();n.hasOwnProperty("data")||(n=_SgmntfY_._prepareRequest(n.params,n.eventName,!0)),n.data.userId=_SgmntfY_._getUserId(),n.data.sessionId=_SgmntfY_._getSessionId(),t.push(n)}_SgmntfY_._sendRequestToServer(t),_SgmntfY_._setNextPageQueue([])}},_addRecommendedProduct:function(e){_SgmntfY_._variables.recommendedProducts.push(e)},_containsRecommendedProduct:function(e){return 0<=_SgmntfY_._variables.recommendedProducts.indexOf(e)},_addRecommendedPromotion:function(e){_SgmntfY_._variables.recommendedPromotions.push(e)},_containsRecommendedPromotion:function(e){return 0<=_SgmntfY_._variables.recommendedPromotions.indexOf(e)},_getExtensionStatus:function(){try{var e=_SgmntfY_._variables.storage.extensionStatus;return _SgmntfY_._getPersistentData(e.key,e.local)||""}catch(e){_SgmntfY_.LOG_MESSAGE("DEBUG","Can't read extension status: "+e)}return""},_getDelayedCampaigns:function(){try{var e=_SgmntfY_._variables.storage.delayedCampaigns;return JSON.parse(_SgmntfY_._getPersistentData(e.key,e.local))||[]}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't read delayed campaigns: "+e)}return[]},_setDelayedCampaigns:function(e){var t=_SgmntfY_._variables.storage.delayedCampaigns;_SgmntfY_._storePersistentData(t.key,JSON.stringify(e),0,t.local)},_addDelayedCampaign:function(a){for(var e=_SgmntfY_._getDelayedCampaigns(),t=0;t<e.length;++t)if(e[t].campaign.instanceId===a.campaign.instanceId)return!1;var n=new Date;if(a.time.getTime()<n.getTime())return!1;var r=a.campaign,i=a.request,s=_SgmntfY_._campaigns[r.type];return setTimeout(function(){for(var e=_SgmntfY_._getDelayedCampaigns(),t=!1,n=0;n<e.length;++n)e[n].campaign.instanceId===a.campaign.instanceId&&(t=!0);t&&(_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+r.type+") triggered after delay"),s.call(null,r,i),_SgmntfY_._removeDelayedCampaign(r.instanceId))},a.time.getTime()-n.getTime()+Math.floor(750*Math.random())),e.push(a),_SgmntfY_._setDelayedCampaigns(e),!0},_removeDelayedCampaign:function(e){for(var t=_SgmntfY_._getDelayedCampaigns(),n=0;n<t.length;n++)if(t[n].campaign.instanceId===e)return t.splice(n,1),void _SgmntfY_._setDelayedCampaigns(t)},_getFireTime:function(e){function t(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n}try{return e.getFullYear()+"."+t(e.getMonth(),2)+"."+t(e.getDate(),2)+" "+t(e.getHours(),2)+":"+t(e.getMinutes(),2)+":"+t(e.getSeconds(),2)+"."+t(e.getMilliseconds(),3)}catch(e){return""}},_getTimeZone:function(e){try{return e.getTimezoneOffset().toString()}catch(e){return""}},_getJq:function(){return _SgmntfY_._variables.jq},_getMustache:function(){return _SgmntfY_._variables.mustache},_getObjectByString:function(e,t){for(var n=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),a=0,r=n.length;a<r;++a){var i=n[a];if(!(i in e))return;e=e[i]}return e},_isUndefined:function(e){return void 0===e},_notNull:function(e){return void 0!==e&&null!=e},_isEmpty:function(e){return void 0===e||null==e||""===e},_isNotEmpty:function(e){return!_SgmntfY_._isEmpty(e)},_isPlainObject:function(e){if("object"!=typeof e||null===e)return!1;if("function"!=typeof Object.getPrototypeOf)return"[object Object]"==Object.prototype.toString.call(e);var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t},_exists:function(e){return e instanceof HTMLElement?null!==e:(e instanceof HTMLCollection||e instanceof _SgmntfY_._getJq()||e instanceof jQuery||e instanceof $)&&0<e.length},_extend:function(){var e,t,n,a,r,i=arguments[0]||{},s=1,o=arguments.length,c=!1;for("boolean"==typeof i&&(c=i,i=arguments[s]||{},s++);s<o;s++)if(null!=(e=arguments[s]))for(t in e)if(e.hasOwnProperty(t)){if(n=i[t],i===(a=e[t]))continue;c&&a&&_SgmntfY_._isPlainObject(a)?(r=n&&"object"==typeof n&&null!==n?n:{},i[t]=_SgmntfY_._extend(c,r,a)):void 0!==a&&(i[t]=a)}return i},_split:function(e,t,n){if(e&&"string"==typeof e){var a,r=e.split(t);for(a=0;a<r.length;a++)r[a]=r[a].trim();if(n&&n<r.length){var i=r.splice(0,n-1);i.push(r.join(t)),r=i}return r}return null},_parseFloat:function(e){return null==e?e:void 0===e?null:"number"==typeof e?e:"string"==typeof e?parseFloat(e):e},_parseBoolean:function(e){return void 0===e?null:"number"==typeof e?0===e?"false":"true":"string"==typeof e?"0"===e||"false"===e.toLowerCase()?"false":"true":"boolean"==typeof e?e.toString():e},_null:function(e){return null!=e&&""!=e},_clearNullByte:function(e){return e.replace(/\0/g,"")},_checkVersion:function(e,t){var n=t.split("."),a=e.split(".");prevs=[];for(var r=0,i=Math.max(n.length,a.length);r<i;r++){if(n[r]=parseInt(n[r]),isNaN(n[r])&&(n[r]=0),a[r]=parseInt(a[r]),isNaN(a[r])&&(a[r]=0),n[r]<a[r])return!1;if(n[r]>a[r])return!0}return!0},_updateBrowserAndDeviceInfo:function(){if(void 0!==window.bowser){var e=window.bowser._detect(_SgmntfY_._variables.ua.agentString);null==_SgmntfY_._variables.ua.type&&(e.tablet?_SgmntfY_._variables.ua.type="tablet":e.mobile?_SgmntfY_._variables.ua.type="mobile":_SgmntfY_._variables.ua.type="PC",e.chromium?_SgmntfY_._variables.ua.name="Chrome":_SgmntfY_._variables.ua.name=e.name,_SgmntfY_._variables.ua.version=e.version),null==_SgmntfY_._variables.ua.os&&(_SgmntfY_._variables.ua.os=e.osname||"Other",_SgmntfY_._variables.ua.osversion=e.osversion)}},_addLeavePageHandler:function(e,t){var n=e.type,a=e.params,r=_SgmntfY_._actions[n];_SgmntfY_.LOG_MESSAGE("INFO","Action("+n+") will be triggered when user leaves page");var i=function(e){e.clientY<0&&(_SgmntfY_.LOG_MESSAGE("INFO","Action("+n+") is triggered at user leave page"),_SgmntfY_._getJq()(document).unbind("mouseleave",i),r.call(null,a,t))};_SgmntfY_._getJq()(document).bind("mouseleave",i)},_addWaitPageHandler:function(e,t){var n=e.type,a=e.params,r=e.delayAction||null,i=_SgmntfY_._actions[n],s=parseInt(r.time);_SgmntfY_.LOG_MESSAGE("INFO","Action("+n+") will be triggered after "+s+" second(s) delay on same page"),setTimeout(function(){_SgmntfY_.LOG_MESSAGE("INFO","Action("+n+") is triggered after delay"),i.call(null,a,t)},1e3*s)},_addScrollHandler:function(e,t){var n=e.type,a=e.delayAction,r=parseInt(a.time)||0;_SgmntfY_.LOG_MESSAGE("INFO","Action ("+n+") will be triggered after "+r+"% of page is scrolled");var i=function(){r<=_SgmntfY_._getScrollPercent()&&(_SgmntfY_.LOG_MESSAGE("INFO","Action ("+n+") triggered after "+r+"% of page is scrolled"),_SgmntfY_._getJq()(document).unbind("scroll",i),_SgmntfY_._actions[n].call(null,e.params,t))};_SgmntfY_._getJq()(document).bind("scroll",i)},_addCampaignDelayHandler:function(e,t){var n=e.type,a=e.timing,r=parseInt(a.param);_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+n+") will be triggered after "+r+" second(s) delay on same page"),window.setTimeout(function(){_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+n+") triggered after "+r+" delay"),_SgmntfY_._campaigns[n].call(null,e,t)},1e3*r)},_addCampaignDelayAllPagesHandler:function(e,t){var n=e.timing||"0",a={campaign:e,request:t,time:new Date((new Date).getTime()+1e3*parseInt(n.param))};_SgmntfY_._addDelayedCampaign(a)?_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+e.instanceId+") added for delayed campaign in future"):_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+e.instanceId+") already added for delayed campaign")},_addCampaignScrollHandler:function(e,t){var n=e.type,a=e.timing,r=parseInt(a.param);_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+n+") will be triggered after "+r+"% of page is scrolled");var i=function(){r<=_SgmntfY_._getScrollPercent()&&(_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+n+") triggered after "+r+"% of page is scrolled"),_SgmntfY_._getJq()(document).unbind("scroll",i),_SgmntfY_._campaigns[n].call(null,e,t))};_SgmntfY_._getJq()(document).bind("scroll",i)},_addCampaignLeaveHandler:function(t,n){var a=t.type;_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+a+") will be triggered when user leaves page");var r=function(e){e.clientY<0&&(_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+a+") triggered at user leave page"),_SgmntfY_._getJq()(document).unbind("mouseleave",r),_SgmntfY_._campaigns[a].call(null,t,n))};_SgmntfY_._getJq()(document).bind("mouseleave",r)},_addCampaignInteractionHandler:function(e,t){},_getScrollPercent:function(){var e=document.documentElement,t=document.body,n="scrollTop",a="scrollHeight";return(e[n]||t[n])/((e[a]||t[a])-e.clientHeight)*100},_updateUserAndSessionId:function(r){_SgmntfY_._variables.waitingKeys=!0;var i={data:null,url:_SgmntfY_._variables.segmentifyApiUrl+"/get/key/v1.json?count="+r};_SgmntfY_._getJq().ajax({contentType:"text/plain",processData:!1,type:"GET",url:i.url,timeout:1e3*_SgmntfY_._variables.constants.eventTimeout}).done(function(e,t,n){_SgmntfY_._ajaxSuccess(i,e,t),2===r&&_SgmntfY_._storePersistentData(_SgmntfY_._variables.userStorageKey,e[1],390,_SgmntfY_._variables.storage.user.local);var a=_SgmntfY_._getUserId();_SgmntfY_._isEmpty(a)?_SgmntfY_.LOG_MESSAGE("ERROR","Can't update User Id"):(_SgmntfY_.LOG_MESSAGE("INFO","User Id Changed: "+a),_SgmntfY_._storePersistentData(_SgmntfY_._variables.sessionStorageKey,e[0],0,_SgmntfY_._variables.storage.session.local),_SgmntfY_._isEmpty(_SgmntfY_._getSessionId())?_SgmntfY_.LOG_MESSAGE("ERROR","Can't update User Session"):(_SgmntfY_.LOG_MESSAGE("INFO","User Session Changed: "+e[0]),_SgmntfY_._variables.waitingKeys=!1))}).fail(function(e,t,n){_SgmntfY_._ajaxError(i,e,t,n),_SgmntfY_._variables.waitingKeys=!1})},_sendRequestToServer:function(e){if(e&&!(e.length<=0)){for(var t=[],n=[],a=0;a<e.length;++a)"false"===e[a].data.async?t.push(e[a]):n.push(e[a]);0<t.length&&_SgmntfY_._syncRequest(t),0<n.length&&_SgmntfY_._asyncRequest(n)}},_syncRequest:function(a){for(var r=[],e=0;e<a.length;e++)r.push(a[e].data);_SgmntfY_._getJq().ajax({contentType:"text/plain",processData:!1,type:"POST",url:_SgmntfY_._variables.segmentifyApiUrl+"/sync/events/v1.json?apiKey="+_SgmntfY_._variables.apiKey,data:JSON.stringify(r),timeout:1e3*_SgmntfY_._variables.constants.eventTimeout}).done(function(e,t,n){_SgmntfY_._ajaxSuccess(r,e,t),"SUCCESS"!==e.statusCode&&_SgmntfY_.LOG_MESSAGE("WARN","Segmentify response is ("+e.statusCode+")")}).fail(function(e,t,n){_SgmntfY_._addToRetryQueue(a),_SgmntfY_._ajaxError(r,e,t,n)})},_asyncRequest:function(_){for(var g=[],e=0;e<_.length;e++)g.push(_[e].data);_SgmntfY_._getJq().ajax({contentType:"text/plain",processData:!1,type:"POST",url:_SgmntfY_._variables.segmentifyApiUrl+"/add/events/v1.json?apiKey="+_SgmntfY_._variables.apiKey,data:JSON.stringify(g),timeout:1e3*_SgmntfY_._variables.constants.eventTimeout}).done(function(e,t,n){_SgmntfY_._ajaxSuccess(g,e,t);var a=e.statusCode||"";if("SUCCESS"===a){var r=e.responses,i=e.campaigns;if(r.length===_.length&&i.length===_.length)for(var s=0;s<r.length;s++){var o=_[s],c=r[s],m=i[s];"true"!==o.originalParams.discardResponse?(_SgmntfY_._getResponse(o,c),_SgmntfY_._getCampaign(o,m)):_SgmntfY_.LOG_MESSAGE("DEBUG","Action("+o.eventName+") responses are discarded")}else _SgmntfY_.LOG_MESSAGE("WARN","Segmentify response length("+r.length+") doesn't match request length("+_.length+")")}else _SgmntfY_.LOG_MESSAGE("WARN","Segmentify response is ("+a+")"),"NO_SESSIONID"===a?_SgmntfY_._updateUserAndSessionId(1):"NO_USERID"===a&&_SgmntfY_._updateUserAndSessionId(2)}).fail(function(e,t,n){_SgmntfY_._addToRetryQueue(_),_SgmntfY_._ajaxError(g,e,t,n)})},_getResponse:function(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(a.hasOwnProperty("type")){var r=a.type,i=a.delayAction||null,s=a.params,o=(a.instanceId,_SgmntfY_._actions[r]);if(!1===s.isControlGroup){_SgmntfY_.LOG_MESSAGE("DEBUG","User is in control group for campaign: "+s.instanceId);continue}if("function"==typeof o)if(i&&"LEAVE_PAGE"===i.type)_SgmntfY_._addLeavePageHandler(a,e);else if(i&&"WAIT_SAME_PAGE"===i.type&&0<parseInt(i.time))_SgmntfY_._addWaitPageHandler(a,e);else if(i&&"WAIT_ALL_PAGES"===i.type&&0<parseInt(i.time)){var c={delayDate:new Date((new Date).getTime()+1e3*parseInt(i.time)),params:s,type:r,request:e};_SgmntfY_._addDelayedAction(c)?_SgmntfY_.LOG_MESSAGE("INFO","Action(id="+c.params.actionId+") is added for delayed action in future"):_SgmntfY_.LOG_MESSAGE("INFO","Action(id="+c.params.actionId+") is already added for delayed action")}else i&&"SCROLL"===i.type?_SgmntfY_._addScrollHandler(a,e):(_SgmntfY_.LOG_MESSAGE("INFO","Action("+r+") triggered immediately"),o.call(null,s,e));else _SgmntfY_.LOG_MESSAGE("WARN","Unknown action: "+r)}}},_getCampaign:function(e,t){for(var n=0;n<t.length;n++){var a=t[n]||{};if(a.hasOwnProperty("type")){var r=a.type,i=_SgmntfY_._campaigns[r];if("function"==typeof i){var s=a.timing||{};"DELAY"===s.type?_SgmntfY_._addCampaignDelayHandler(a,e):"DELAY_ALL_PAGES"===s.type?_SgmntfY_._addCampaignDelayAllPagesHandler(a,e):"SCROLL"===s.type?_SgmntfY_._addCampaignScrollHandler(a,e):"PAGELEAVE"===s.type?_SgmntfY_._addCampaignLeaveHandler(a,e):"INTERACTION"===s.type?_SgmntfY_._addCampaignInteractionHandler(a,e):(_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+r+") triggered immediately."),i.call(null,a,e))}else _SgmntfY_.LOG_MESSAGE("WARN","Unknown campaign: "+r)}}},_sourceOfUrl:function(){var e="";if(document.URL||document.referrer){if(_SgmntfY_._getQueryParameter("gclid").length)return"PAID";var t=_SgmntfY_._getQueryParameter("utm_medium");if(t.length)switch(t){case"social":e="SOCIAL";break;case"organic":e="SEARCH";break;case"cpc":case"cpm":case"ocpm":case"paid-media":case"affiliate":case"banner":case"retargeting":case"shopping":e="PAID";break;case"email":e="EMAIL"}if(!e.length){var n=document.referrer.replace("https://","").replace("http://","");-1!==(n=n.substring(0,n.indexOf("/"))).indexOf(_SgmntfY_._variables.domain)?e="INTERNAL":-1!==n.indexOf("facebook")||-1!==n.indexOf("twitter")||-1!==n.indexOf("t.co")||-1!==n.indexOf("instagram")||-1!==n.indexOf("pinterest")?e="SOCIAL":-1!==n.indexOf("google")||-1!==n.indexOf("g.co")||-1!==n.indexOf("bing")||-1!==n.indexOf("yandex")||-1!==n.indexOf("yahoo")?e="SEARCH":-1===n.indexOf("cimri.com")&&-1===n.indexOf("akakce.com")&&-1===n.indexOf("ucuzcu.com")&&-1===n.indexOf("bilio.com")&&-1===n.indexOf("auspreiser.de")&&-1===n.indexOf("billiger.de")&&-1===n.indexOf("dooyoo.de")&&-1===n.indexOf("geizhals.de")&&-1===n.indexOf("guenstiger.de")&&-1===n.indexOf("idealo.de")&&-1===n.indexOf("kelkoo.de")&&-1===n.indexOf("preis.de")&&-1===n.indexOf("preissuchmaschine.de")&&-1===n.indexOf("geizkragen.de")&&-1===n.indexOf("preisvergleich.de")&&-1===n.indexOf("preisroboter.de")&&-1===n.indexOf("vergelijk.be")&&-1===n.indexOf("pazaruvaj")&&-1===n.indexOf("nabava.net")&&-1===n.indexOf("ceneje.si")&&-1===n.indexOf("heureka")&&-1===n.indexOf("pricerunner")&&-1===n.indexOf("hinnavaatlus")&&-1===n.indexOf("skroutz.gr")&&-1===n.indexOf("agrep.hu")&&-1===n.indexOf("arukereso.hu")&&-1===n.indexOf("trovaprezzi.it")&&-1===n.indexOf("prisjakt.no")&&-1===n.indexOf("prisguiden.no")&&-1===n.indexOf("ceneo.pl")&&-1===n.indexOf("kuantokusta.pt")&&-1===n.indexOf("compari.ro")||(e="LISTING")}e.length||(e="OTHER")}return e},_enableSerializeForm:function(r){r.fn.sgmSerializeForm||(r.fn.sgmSerializeForm=function(){"use strict";var a={};return r.each(this.serializeArray(),function(e,t){var n=a[t.name];null!=n?r.isArray(n)?n.push(t.value):a[t.name]=[n,t.value]:a[t.name]=t.value}),r.each(a,function(e,t){null!=t&&r.isArray(t)&&(a[e]=t.join())}),a})},init:function(){_SgmntfY_._variables.namespace=window.SegmentifyTrackingObject,_SgmntfY_._variables.segmentifyObj=window[_SgmntfY_._variables.namespace];var e=_SgmntfY_._getQueryParameter("_sgm_tracking");if(_SgmntfY_._isNotEmpty(e)&&_SgmntfY_._setTracking(e),"disabled"!==_SgmntfY_._getTracking())if(_SgmntfY_._notNull(_SgmntfY_._variables.segmentifyObj)&&_SgmntfY_._notNull(_SgmntfY_._variables.segmentifyObj.q)){if(_SgmntfY_._variables.initTimer&&window.clearTimeout(_SgmntfY_._variables.initTimer),_SgmntfY_.modernize(),_SgmntfY_.LOG_MESSAGE("DEBUG","*** Segmentify is loading... ***"),_SgmntfY_._extend(!0,_SgmntfY_._variables,_SgmntfY_._variables.segmentifyObj.config),_SgmntfY_._functions.setLogLevel(_SgmntfY_._variables.logLevel),!(_SgmntfY_._variables.domain&&0<=document.URL.indexOf(_SgmntfY_._variables.domain)))return void console.error("Segmentify domain is not set properly: "+_SgmntfY_._variables.domain);if(window.onunload=_SgmntfY_._windowUnload,null==_SgmntfY_._variables.jq)_SgmntfY_._loadJavascript(_SgmntfY_._variables.jQueryUrl,!0,function(){_SgmntfY_._variables.jq=jQuery.noConflict(!0),_SgmntfY_._enableSerializeForm(_SgmntfY_._variables.jq),_SgmntfY_._initializeDelayedActions(),_SgmntfY_._initializeDelayedCampaigns(),_SgmntfY_._sendTrackedEvent(),_SgmntfY_._setTestMode()});else{if(!_SgmntfY_._checkVersion("1.7",_SgmntfY_._variables.jq.fn.jquery))return void console.error("Segmentify requires jQuery version >= 1.7");_SgmntfY_._enableSerializeForm(_SgmntfY_._variables.jq),_SgmntfY_._initializeDelayedActions(),_SgmntfY_._initializeDelayedCampaigns(),_SgmntfY_._sendTrackedEvent(),_SgmntfY_._setTestMode()}null==_SgmntfY_._variables.mustache&&(_SgmntfY_._variables.mustache={},initializeMustache(_SgmntfY_._variables.mustache),_SgmntfY_._variables.mustache.tags=["[[","]]"]),_SgmntfY_._updateBrowserAndDeviceInfo(),_SgmntfY_.LOG_MESSAGE("DEBUG","*** Running on a "+_SgmntfY_._variables.ua.type+" ***"),_SgmntfY_.LOG_MESSAGE("DEBUG","*** Segmentify loaded and started... ***"),_SgmntfY_.run(),_SgmntfY_._dispatchInitEvent()}else{if(++_SgmntfY_._variables.initTryCount,_SgmntfY_._variables.initTryCount>_SgmntfY_._variables.initTryLimit)return void window.clearTimeout(_SgmntfY_._variables.initTimer);window.clearTimeout(_SgmntfY_._variables.initTimer),_SgmntfY_._variables.initTimer=window.setTimeout(_SgmntfY_.init,100)}else _SgmntfY_.LOG_MESSAGE("DEBUG","End-user opted-out Segmentify tracking!")},_initializeDelayedActions:function(){try{var e=_SgmntfY_._getDelayedActions();_SgmntfY_._setDelayedActions([]);for(var t=new Date,n=0;n<e.length;n++)e[n].delayDate=new Date(e[n].delayDate),e[n].delayDate.getTime()>t.getTime()&&_SgmntfY_._addDelayedAction(e[n])}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't initialize delayed actions: "+e)}},_initializeDelayedCampaigns:function(){try{var e=_SgmntfY_._getDelayedCampaigns();_SgmntfY_._setDelayedCampaigns([]);for(var t=new Date,n=0;n<e.length;++n)e[n].time=new Date(e[n].time),e[n].time.getTime()>t.getTime()&&_SgmntfY_._addDelayedCampaign(e[n])}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't initialize delayed campaigns: "+e)}},_dispatchInitEvent:function(){try{if(window.dispatchEvent){var e={testMode:_SgmntfY_._getTestMode()};window.dispatchEvent(new CustomEvent("segmentifyInited",{detail:e}))}}catch(e){}},_ajaxError:function(e,t,n,a){_SgmntfY_.LOG_MESSAGE("WARN","Error in sending event:\nEvent Data: "+JSON.stringify(e.data)+"\nResponse: "+t.responseText+"\nStatus: "+n+"\nError: "+a)},_ajaxSuccess:function(e,t,n){_SgmntfY_.LOG_MESSAGE("DEBUG","Success in sending event:\nEvent Data: "+JSON.stringify(e)+"\nStatus: "+n+"\nResponse Data: "+JSON.stringify(t))},_windowUnload:function(){_SgmntfY_._variables.isUnload=!0,window.clearTimeout(_SgmntfY_._variables.runTimer);for(var e=[];0<_SgmntfY_._variables.segmentifyObj.q.length;)try{var t=_SgmntfY_._variables.segmentifyObj.q.shift(),n=_SgmntfY_._functions.getFunction(t[0]),a=Array.prototype.slice.call(t,1);(i=n.apply(null,a)).originalParams.discardResponse="true",e.push(i)}catch(e){}for(var r=_SgmntfY_._getRetryQueue();0<r.length;)try{var i;(i=r.shift()).originalParams.discardResponse="true",e.push(i)}catch(e){}_SgmntfY_._setRetryQueue(e)},run:function(){try{if(_SgmntfY_._variables.jq&&(_SgmntfY_._variables.segmentifyObj.q&&0<_SgmntfY_._variables.segmentifyObj.q.length||_SgmntfY_._getDataLayer())&&!_SgmntfY_._variables.waitingKeys){var e=0,t=_SgmntfY_._getUserId(),n=_SgmntfY_._getSessionId();if(_SgmntfY_._isEmpty(t)?e=2:_SgmntfY_._isEmpty(n)?e=1:_SgmntfY_._isNotEmpty(n)&&0<_SgmntfY_._variables.segmentifyObj.q.length&&(_SgmntfY_._storePersistentData(_SgmntfY_._variables.sessionStorageKey,n,0,_SgmntfY_._variables.storage.session.local),_SgmntfY_._storePersistentData(_SgmntfY_._variables.userStorageKey,t,390,_SgmntfY_._variables.storage.user.local)),0<e)_SgmntfY_._updateUserAndSessionId(e);else{if(_SgmntfY_._variables.segmentifyObj.q&&0<_SgmntfY_._variables.segmentifyObj.q.length){var a=_SgmntfY_._variables.segmentifyObj.q.splice(0,_SgmntfY_._variables.segmentifyObj.q.length);_SgmntfY_._functions.callFunction(a)}_SgmntfY_._getDataLayer()&&_SgmntfY_._consumeDataLayer()}}window.clearTimeout(_SgmntfY_._variables.runTimer),_SgmntfY_._variables.runTimer=window.setTimeout(_SgmntfY_.run,_SgmntfY_._variables.constants.frequency)}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Error in run: "+e),window.clearTimeout(_SgmntfY_._variables.runTimer),_SgmntfY_._variables.runTimer=window.setTimeout(_SgmntfY_.run,_SgmntfY_._variables.constants.frequency)}},modernize:function(){"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return 0===this.lastIndexOf(e,0)}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),a=n.length>>>0;if(0==a)return-1;var r=+t||0;if(Math.abs(r)===1/0&&(r=0),a<=r)return-1;for(var i=Math.max(0<=r?r:a-Math.abs(r),0);i<a;){if(i in n&&n[i]===e)return i;i++}return-1}),Array.prototype.map||(Array.prototype.map=function(e,t){var n,a,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),s=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(n=t),a=new Array(s),r=0;r<s;){var o,c;r in i&&(o=i[r],c=e.call(n,o,r,i),a[r]=c),r++}return a});var i=JSON.stringify;if(JSON.stringify=function(e){var t=Array.prototype.toJSON,n=Number.prototype.toJSON,a=String.prototype.toJSON;delete Number.prototype.toJSON,delete Array.prototype.toJSON,delete String.prototype.toJSON;var r=void 0;try{r=i(e)}catch(e){r=void 0}return t&&(Array.prototype.toJSON=t),n&&(Number.prototype.toJSON=n),a&&(String.prototype.toJSON=a),r},"function"!=typeof window.CustomEvent){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}},LOG_MESSAGE:function(e,t){var n=_SgmntfY_._variables.logLevel,a=_SgmntfY_.LOG_LEVELS[e];void 0!==a&&a<=n&&console.log("Segmentify["+e+"]: "+t)}};_SgmntfY_.init()}(window);        20200403170909     segNamespace/   waitSegmentifyAndjQuery+   SegmentifyIntegration/   PromotionifyIntegration5   segTilePromotionifyHandler3   SliderPromotionifyHandler%   initializeMustache   r   i   n   e   t   a   m   E   o   I   L   _   g   s   c   Y   b   O   C   w   A   T+   window[segNamespace]<!   segmentifyApiUrl   domain   constants   retryLimit   p   u   d+   window._formatNameN11-   window._resizeImageN11-   window._formatPriceN11+   window._todaysDealN11   params   $inner   $form   redirectFn   dynamicItemKey+   checkDynamicItemCount%   checkProductInList   isElemVisible   decodeHtml-   checkSelectorAndRender   renderIdx   allNull   arrayRandom   randomInt	   wvCB   productList   wvInstanceId   wvInteractionId#   notificationTitle)   checkPromotionInList   promotionList%   checkKeywordInList   campaign   isEmail   checkValidity   pushFadeUp   _SgmntfY_   Segmentify   window1   SegmentifyTrackingObject1   //dcetr4.segmentify.com/   n11.com   config   apikeyI   4c90b154-53f1-4762-9177-f535de5c4e42   _formatNameN11   _resizeImageN11   _formatPriceN11   _todaysDealN11   segAddjsErr   arguments   q	   push3   waitSegmentifyAndjQuery/<   _getJq   segJquery   document   ready   setTimeout   e.bowser<   bowser!   e.bowser</o.test#   e.bowser</o.check   navigator   undefined   userAgent   	   test)   isUnsupportedBrowser   compareVersions   check   _detect   h   y   f   S   v   l%   (ipod|iphone|ipad)   like android   android!   nexus\s*[0-6]\s*   nexus\s*[0-9]+	   CrOS	   silk   sailfish   tizen   (web|hpw)os   windows phone   SamsungBrowser   windows   macintosh   linux9   edg([ea]|ios)\/(\d+(\.\d+)?)-   version\/(\d+(\.\d+)?)   tablet   tablet pc   [^-]mobi	   xbox   opera	   name   versionM   (?:opera|opr|opios)[\s\/](\d+(\.\d+)?)   opr\/|opiosA   (?:opr|opios)[\s\/](\d+(\.\d+)?)   samsungBrowserK   (?:SamsungBrowser)[\s\/](\d+(\.\d+)?)   coast9   (?:coast)[\s\/](\d+(\.\d+)?)   yabrowser   yandexbrowserA   (?:yabrowser)[\s\/](\d+(\.\d+)?)   ucbrowserE   (?:ucbrowser)[\s\/](\d+(?:\.\d+)+)   mxios   maxthon=   (?:mxios)[\s\/](\d+(?:\.\d+)+)   epiphanyC   (?:epiphany)[\s\/](\d+(?:\.\d+)+)   puffin?   (?:puffin)[\s\/](\d+(?:\.\d+)?)   sleipnirC   (?:sleipnir)[\s\/](\d+(?:\.\d+)+)   k-meleon   kMeleonC   (?:k-meleon)[\s\/](\d+(?:\.\d+)+)   osname   windowsphone/   iemobile\/(\d+(\.\d+)?)   msie|trident	   msie5   (?:msie |rv:)(\d+(\.\d+)?)   chromeos   chromeBook   chromeI   (?:chrome|crios|crmo)\/(\d+(\.\d+)?)   edg([ea]|ios)   msedge   vivaldi-   vivaldi\/(\d+(\.\d+)?)C   sailfish\s?browser\/(\d+(\.\d+)?)   seamonkey\/   seamonkey1   seamonkey\/(\d+(\.\d+)?)/   firefox|iceweasel|fxios   firefox[   (?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)I   \((mobile|tablet);[^\)]*rv:[\d\.]+\)'   silk\/(\d+(\.\d+)?)   phantom1   phantomjs\/(\d+(\.\d+)?)   slimerjs   slimer/   slimerjs\/(\d+(\.\d+)?)%   blackberry|\bbb\d+   rim\stablet   blackberry=   blackberry[\d]+\/(\d+(\.\d+)?)   webosA   w(?:eb)?osbrowser\/(\d+(\.\d+)?)   touchpad\/	   bada+   dolfin\/(\d+(\.\d+)?)G   (?:tizen\s?)?browser\/(\d+(\.\d+)?)   qupzillaC   (?:qupzilla)[\s\/](\d+(?:\.\d+)+)   chromiumC   (?:chromium)[\s\/](\d+(?:\.\d+)?)#   chrome|crios|crmo%   safari|applewebkit   safari   googlebot/   googlebot\/(\d+(\.\d+))   ^(.*)\/(.*)    (apple)?webkit/   (apple)?webkit\/537\.36   gecko\/)   gecko\/(\d+(\.\d+)?);   Windows ((NT|XP)( \d\d?.\d)?)K   windows phone (?:os)?\s?(\d+(\.\d+)*)7   Mac OS X (\d+([_\.\s]\d+)*)   [_\s]C   os (\d+([_\s]\d+)*) like mac os x5   android[ \/-](\d+(\.\d+)*)9   (?:web|hpw)os\/(\d+(\.\d+)*)=   rim\stablet\sos\s(\d+(\.\d+)*)'   bada\/(\d+(\.\d+)*)1   tizen[\/\s](\d+(\.\d+)*)   toLowerCase   Opera9   Samsung Internet for Android   Opera Coast   Yandex Browser   UC Browser   Maxthon   Epiphany   Puffin   Sleipnir   K-Meleon   Windows Phone#   Internet Explorer   Chrome   Chrome OS   Microsoft Edge   Vivaldi   Sailfish   Sailfish OS   SeaMonkey   Firefox   firefoxos   Firefox OS   Amazon Silk   PhantomJS   SlimerJS   BlackBerry   BlackBerry OS   WebOS   touchpad	   Bada   Tizen   QupZilla   Chromium   Android   Safari   iphone   iPhone	   ipad	   iPad	   iPod   Googlebot   Blink   blink   Webkit   webkit   Gecko   gecko   ios   iOS   mac   macOS	   Xbox   Windows   Linux   replace   .   osversion   split	   ipod   mobile   x   match   length   NT   XP   NT 5.0   NT 5.1   NT 5.2   NT 6.0   NT 6.1   NT 6.2   NT 6.3   NT 10.0	   2000	   2003   Vista   7   8   8.1   10   .this   LOG_LEVELS   _variables   _loadJavascript   _loadCSS   _actions   _campaigns   _functions   _prepareRequest)   _storePersistentData%   _getPersistentData!   _clearProductUrl+   _stripQueryParameters%   _getQueryParameter#   _sendTrackedEvent   _setTestMode   _getTestMode   _toggleTestMode   _getTracking   _setTracking   _getSessionId   _getUserId   _shuffle%   _getClickedBanners#   _addClickedBanner%   _getDelayedActions%   _setDelayedActions#   _addDelayedAction)   _removeDelayedAction   _getRetryQueue   _setRetryQueue!   _addToRetryQueue%   _consumeRetryQueue   _getDataLayer#   _consumeDataLayer#   _getNextPageQueue#   _setNextPageQueue'   _addToNextPageQueue+   _consumeNextPageQueue-   _addRecommendedProduct7   _containsRecommendedProduct1   _addRecommendedPromotion;   _containsRecommendedPromotion'   _getExtensionStatus)   _getDelayedCampaigns)   _setDelayedCampaigns'   _addDelayedCampaign-   _removeDelayedCampaign   _getFireTime   _getTimeZone   _getMustache%   _getObjectByString   _isUndefined   _notNull   _isEmpty   _isNotEmpty   _isPlainObject   _exists   _extend   _split   _parseFloat   _parseBoolean   _null   _clearNullByte   _checkVersion7   _updateBrowserAndDeviceInfo)   _addLeavePageHandler'   _addWaitPageHandler#   _addScrollHandler1   _addCampaignDelayHandlerA   _addCampaignDelayAllPagesHandler3   _addCampaignScrollHandler1   _addCampaignLeaveHandler=   _addCampaignInteractionHandler#   _getScrollPercent/   _updateUserAndSessionId)   _sendRequestToServer   _syncRequest   _asyncRequest   _getResponse   _getCampaign   _sourceOfUrl)   _enableSerializeForm	   init3   _initializeDelayedActions7   _initializeDelayedCampaigns%   _dispatchInitEvent   _ajaxError   _ajaxSuccess   _windowUnload   run   modernize   LOG_MESSAGE   SILENT   ERROR	   WARN	   INFO   DEBUG   jq   mustache   ua   userStorageKey#   sessionStorageKey   testMode   tracking   storage   logLevel   segmentifyObj'   recommendedProducts+   recommendedPromotions   waitingKeys   apiKey#   skipProductDetail1   offerRecommendedProducts5   offerRecommendedPromotions   runTimer   initTimer   initTryCount   initTryLimit   isUnload   cssPreload   ga   requiredParams   optionalParams!   segmentifyCDNUrl   jQueryUrl   dataLayer!   consumeDataLayer   dataLayerConfig#   categoryHierarchy   disableNextPage   language   currency   region   agentString	   type   os   delayedActions!   delayedCampaigns   retryQueue   extensionStatus   clickedBanners   nextPageQueue	   user   session   key   local   device   frequency   redirectDelay   eventTimeout'   clickedBannersLimit?   recommendationSelectorFindLimit   enabled   PAGE_VIEW   PRODUCT_VIEW#   BASKET_OPERATIONS   CHECKOUT   USER_OPERATIONS	   FORM   CUSTOM_EVENT   INTERACTION#   BANNER_OPERATIONS#   BANNER_GROUP_VIEW+   INTERNAL_BANNER_GROUP   USER_CHANGE   PROMOTION   title   url	   mUrl   image   imageXS   imageS   imageM   imageL   imageXL!   additionalImages   category   categories   price   oldPrice   specialPrice   lastUpdateTime   inStock   stockCount   stockRatio   stockStatus   brand   gender   labels   sizes   colors   publishTime   source   noUpdate   activeBanners   groupId   orderNo   paymentType   cartUrl   totalDiscount   discounts   shipment   tax   username   fullName   phone   birthDate   segments   memberSince   service   isRegistered   isLogin   location   emailNtf   mailTest   pushTest   custom   mImage   startDate   endDate   brands   productIds'   _notificationWindow%   notificationBanner'   notificationMessage   visitorForm#   recommendProducts%   recommendPromotion!   recommendKeyword   webNotification   redirectUrl   jsFunctionCall   jsAction!   jsCountdownTimer#   sendBannerDetails   NEWSLETTER   POPUP_BANNER)   POPUP_RECOMMENDATION!   NOTIFICATION_BAR   PUSH_PERMISSION   getFunction)   getDataLayerFunction   callFunction   setApiKey   setLogLevel   setVariables   setUserId   pageView   productView   addToBasket!   removeFromBasket   clearBasket%   checkoutViewBasket)   checkoutCustomerInfo'   checkoutPaymentInfo!   checkoutPurchase   userSignIn   userSignOut   userSignUp   userSubscribe   userUnsubscribe   userInfoUpdate   userForm   customEvent   interaction!   bannerImpression   bannerClick   bannerUpdate   bannerGroupView#   bannerGroupDetail'   promotionImpression   promotionView   pushInteraction!   SegmentifyjQuery!   SegmentifyDomain   hostname   _sgf_user_id   _sgf_session_id   _sgf_test_mode   _sgf_tracking)   _sgf_delayed_actions-   _sgf_delayed_campaigns   _sgf_rq'   segmentifyExtension)   _sgf_clicked_banners   _sgf_npq   productId   basketId	   step   totalPrice   formName   fields   group   order   oldUserId	   code   subCategory   quantity   interactionId   instanceId   label   banners-   //rest.segmentify.com/+   //cdn.segmentify.com/w   //ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js   sgfLayer   EN   init/<   namespace   _sgm_tracking   disabled   clearTimeoutA   *** Segmentify is loading... ***   URL   indexOf   console   errorO   Segmentify domain is not set properly:    onunload   1.7   fn   jqueryS   Segmentify requires jQuery version >= 1.7   [[   ]]	   tags#   *** Running on a 	    ***Q   *** Segmentify loaded and started... ***O   End-user opted-out Segmentify tracking!	   [\[]	   [\]]   \+   search   \[   \]   RegExp   [\?&]   =([^&#]*)	   exec%   decodeURIComponent       Storage   localStorage   getItemW   Can't get Persistent Data (Local Storage):    =   cookie   ;	   trim   substringI   Can't get Persistent Data (Cookie): K   modernize/String.prototype.startsWithG   modernize/String.prototype.endsWith?   modernize/String.prototype.trimC   modernize/Array.prototype.indexOf;   modernize/Array.prototype.map1   modernize/JSON.stringify   function   String   prototype   startsWith   endsWith   Array   map	   JSON   stringify   CustomEvent   Event   log   Segmentify[   ]:    boolean   hasOwnProperty   object   Object   getPrototypeOf   [object Object]   toString	   callC   Segmentify Log Level Changed to: I   _loadJavascript/a.onreadystatechange   createElement   script   text/javascript   async%   onreadystatechange   onload   src)   getElementsByTagName	   head   appendChild+   initializeMustache/b<   \S   &   <   >   "   '   /   `   \s*   \s+	   \s*=   \s*\}%   #|\^|\/|>|\{|&|=|!E   initializeMustache/L.prototype.eosG   initializeMustache/L.prototype.scanQ   initializeMustache/L.prototype.scanUntilG   initializeMustache/i.prototype.pushK   initializeMustache/i.prototype.lookupS   initializeMustache/e.prototype.clearCacheI   initializeMustache/e.prototype.parseK   initializeMustache/e.prototype.renderW   initializeMustache/e.prototype.renderTokensY   initializeMustache/e.prototype.renderSection[   initializeMustache/e.prototype.renderInvertedY   initializeMustache/e.prototype.renderPartial[   initializeMustache/e.prototype.unescapedValueW   initializeMustache/e.prototype.escapedValueO   initializeMustache/e.prototype.rawValue?   initializeMustache/Y.clearCache5   initializeMustache/Y.parse7   initializeMustache/Y.render9   initializeMustache/Y.to_html7   initializeMustache/Y.escape   isArray   &amp;	   &lt;	   &gt;   &quot;   &#39;   &#x2F;   &#x60;   &#x3D;   eos	   scan   scanUntil   lookup   clearCache   parse   render   renderTokens   renderSection   renderInverted   renderPartial   unescapedValue   escapedValue   rawValue   mustache.js   2.2.1   {{   }}   to_html   escape   Scanner   Context   Writer   cache   PC   Other   splice   Error in run:    detail   dispatchEvent!   segmentifyInited   toJSON   Number   jQuery   noConflictU   _enableSerializeForm/r.fn.sgmSerializeForm!   sgmSerializeForm	   Date   delayDate   getTimeE   Can't initialize delayed actions: 9   Can't read delayed actions:    setItemg   Segmentify Persistent Data (Local Storage) Update:    : i   Can't store Persistent Data (Local Storage) Update:    string%   encodeURIComponent   setTime   ; expires=   toGMTString   ; domain=   ; path=/Y   Segmentify Persistent Data (Cookie) Update: [   Can't store Persistent Data (Cookie) Update: 	   timeI   Can't initialize delayed campaigns: =   Can't read delayed campaigns:    _device   segmentify   utm_source   utm_campaign   utm_medium   utm_content   _sgm_campaign   _sgm_action   _sgm_source/   Sending tracked event:     - #   event:interaction   0!   push:interaction   clickE   <div class="sgm-test-mode-header">   <a href="http://www.segmentify.com" target="_blank" class="sgm-logo"> </a>w  <a href="https://chrome.google.com/webstore/detail/segmentify/dhcffckfimabfhbbjdngnajhnlohfjeo" target="_blank" class="sgm-ext"><span>Get <strong>Chrome Extension</strong> Now!</span></a>   <span class="sgm-test-mode-Show-Hide" data-hide="Hide" data-show="Show"></span>?   <div class="sgm-test-mode-key">   <h2 id="sgm-test-mode-message"> Your browser is in<strong>Segmentify Test Mode</strong> </h2>C   <div class="sgm-test-mode-radio">   <input class="sgm-tgl sgm-tgl-ios" id="sgm-cb1" type="checkbox" checked>c   <label class="sgm-tgl-btn" for="sgm-cb1"></label>   </div>   _setTestMode/<   _sgm_test   exists	   true	   join   
;   Can't show test mode header:    on-   #sgm-test-mode-message	   htmlo   Your browser is in<strong>Segmentify Test Mode</strong>	   find   strong   css   color   #50BC61=   Segmentify Test Mode activated   offc   <strong>Segmentify Test Mode</strong> is disabled	   #fffA   Segmentify Test Mode deactivated   false   alert   You are out of Segmentify Test Mode, you will not see test campaigns.;   Can't read extension status:    slice   apply   concat#   Event triggered:    Error-   Can't convert command(=   ) into request data. Details:    getFunction/<   loglevel   variables   userid   view:page   view:product   basket:add   basket:remove   basket:clear   checkout:basket#   checkout:customer!   checkout:payment#   checkout:purchase   user:signin   user:signout   user:signup   user:subscribe!   user:unsubscribe   user:update   event:custom   user:form#   banner:impression   banner:click   banner:update!   bannergroup:view%   bannergroup:detail)   impression:promotion   view:promotion   Api Key: _   Account specific style is disabled, skipping...   /segmentify.cssG   Loading account specific css file: ;   _loadCSS/n.onreadystatechange	   link   text/css   preload   rel   style   as   stylesheet   screen   media	   href   shift	   data   eventName   userId   sessionId9   Can't read next page queue: 1   Can't read retry queue: !   qamobile.n11.com   qaurun.n11   All Pages!   Promotion Detail   Product Detail   Basket Page   Order Success   pageType   pageName	   home   Home Page   other!   promotion-detail   ecommerce   promoImage   promoStartDate   -   reverse   promoEndDate   promoName   promoUrl   impressions    >    relationship%   promotionDetailErr   promotion-list   Promotion List   .panelContent%   .imgBoxInsetShadow   my-account   Orders List!   Product Category   pCatMain   pCat1   pCat2   pCat3   pCat4   product	   cart   searchresults+   Product Search Result#   segSearchCategory   gaEventCategory   0 Search Result   Empty Search   #error404   404 Page   purchase   segErr   couponId   sgmM   All Pages/window.customerSegmentLoaded   All Pages/g<9   All Pages/window.getSegments   All Pages/<   nextPage   errorMessage   gclid%   seg_tracking_gclid   loginStatusM   https://www.n11.com/siparis/iade/yeni/u   https://www.n11.com/hesabim/siparislerim?notification=truew   https://www.n11.com/hesabim/siparislerim?notification=false]   https://www.n11.com/hesabim/iptal-degisim-iade'   siparis_iade_anketi   sgf_coupon   login   member   isMember   bId   birthYear   N/A   getFullYear   age   bEmail   email   bPerm)   Campaign Not Allowed   1!   Campaign Allowed+   customerSegmentLoaded   ACTIONMAN#   PARENTSWITHBABIES   ADULT%   AUTOMOBILE_FANCIER   GAMER   MYKITCHEN%   FASHIONLOVER_SHOES3   STATIONARY_OFFICESUPPLIES   KIDPARENT)   FASHIONLOVER_CLOTHES   WELL_GROOMED   SPORTIVE1   FASHIONLOVER_ACCESSORIES   BIG_CHANGES   BIG_SIZE   HOME_CLEAN   PET_OWNER'   HOMETEXTILE_PRODCUT#   MOTORCYLE_FANCIER   REPAIRMAN#   SMARTPHONE_ADDICT)   ELECTRONIC_CONSUMERS   MUSICIAN   PHOTOGRAPHER#   BOOKWORM_HOBBIEST   TRAVELER   MARKET_CUSTOMER   ORGANIZATION   CONSERVATIVE   setInterval   getSegments   ajaxComplete   parseFloat   chrome_version   ie_version   firefox_version   safari_version   opera_version   yandex_version   error_handler    g     g %         g /* Last Update: Mon, 11 Nov 2019 17:51:28 GMT */
var segNamespace="Segmentify";function waitSegmentifyAndjQuery(){window._SgmntfY_&&window._SgmntfY_._getJq()?(window.segJquery=window._SgmntfY_._getJq(),segJquery(document).ready(function(){document.location.href.indexOf("qamobile.n11.com")<0&&document.location.href.indexOf("qaurun.n11")<0&&SegmentifyIntegration(window.segJquery).init()})):setTimeout(waitSegmentifyAndjQuery,100)}window.SegmentifyTrackingObject=segNamespace,window[segNamespace]=window[segNamespace]||function(){(window[segNamespace].q=window[segNamespace].q||[]).push(arguments)},window[segNamespace].config={segmentifyApiUrl:"//dcetr4.segmentify.com/",domain:"n11.com",constants:{retryLimit:0}},Segmentify("apikey","4c90b154-53f1-4762-9177-f535de5c4e42");var SegmentifyIntegration=function(e){var t=function(e,t){Segmentify("view:page",{category:e,subCategory:t})},r=function(e){Segmentify("view:product",e)},a=function(e){Segmentify("checkout:basket",e)},i=function(e){Segmentify("checkout:purchase",e)},n=function(e){Segmentify("basket:add",e)},o=function(e){Segmentify("basket:remove",e)},s=function(e,t,r){try{if(!e||""==e||!t)return null;for(var a=null,i=0;i<t.length;i++){var n=t[i];if(n.hasOwnProperty(e)&&!r)return n;n.hasOwnProperty(e)&&r&&(a=n)}return a}catch(e){return null}},c=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},d={category:"",subCategory:"",categories:[]},p={"All Pages":function(){""!==_SgmntfY_._getQueryParameter("gclid")&&_SgmntfY_._storePersistentData("seg_tracking_gclid",_SgmntfY_._getSessionId());var e=s("loginStatus",dataLayer),r=document.location.href;(r.indexOf("https://www.n11.com/siparis/iade/yeni/")>=0||r.indexOf("https://www.n11.com/hesabim/siparislerim?notification=true")>=0||r.indexOf("https://www.n11.com/hesabim/siparislerim?notification=false")>=0||r.indexOf("https://www.n11.com/hesabim/iptal-degisim-iade")>=0)&&Segmentify("event:custom",{type:"siparis_iade_anketi",params:{category:"siparis_iade_anketi"}});var a={isLogin:!1,isRegistered:!1,custom:{},segments:[]};""!=_SgmntfY_._getPersistentData("sgf_coupon")&&(a.params={couponId:_SgmntfY_._getPersistentData("sgf_coupon")}),"login"==e.loginStatus?a.isLogin=!0:a.isLogin="false","member"==e.isMember&&(a.isRegistered=!0),e.bId&&(a.username=e.bId.toString()),e.birthYear&&"N/A"!=e.birthYear&&(a.age=(new Date).getFullYear()-e.birthYear),e.gender&&(a.gender=e.gender),e.bEmail&&(a.email=e.bEmail),e.sgm&&(a.custom={sgm:e.sgm}),"0"==e.bPerm&&(a.segments=["Campaign Not Allowed"]),"1"==e.bPerm&&(a.segments=["Campaign Allowed"]);var i="";window.customerSegmentLoaded=function(){if("undefined"!=typeof dataLayer)for(var e=0;e<dataLayer.length;++e)if(void 0!==dataLayer[e].sgm&&"undefined"!=dataLayer[e].sgm){i=dataLayer[e].sgm;break}getSegments()};var p=[];p[0]="ACTIONMAN",p[1]="PARENTSWITHBABIES",p[2]="ADULT",p[3]="AUTOMOBILE_FANCIER",p[4]="GAMER",p[5]="MYKITCHEN",p[6]="FASHIONLOVER_SHOES",p[7]="STATIONARY_OFFICESUPPLIES",p[8]="KIDPARENT",p[9]="FASHIONLOVER_CLOTHES",p[10]="WELL_GROOMED",p[11]="SPORTIVE",p[12]="FASHIONLOVER_ACCESSORIES",p[13]="BIG_CHANGES",p[14]="BIG_SIZE",p[15]="HOME_CLEAN",p[16]="PET_OWNER",p[17]="HOMETEXTILE_PRODCUT",p[18]="MOTORCYLE_FANCIER",p[19]="REPAIRMAN",p[20]="SMARTPHONE_ADDICT",p[21]="ELECTRONIC_CONSUMERS",p[22]="MUSICIAN",p[23]="PHOTOGRAPHER",p[24]="BOOKWORM_HOBBIEST",p[25]="TRAVELER",p[26]="MARKET_CUSTOMER",p[27]="ORGANIZATION",p[28]="CONSERVATIVE";var u=0,g=setInterval(function(){10==u?clearInterval(g):"undefined"!=typeof dataLayer?(customerSegmentLoaded(),clearInterval(g)):++u},100);window.getSegments=function(){i?"undefined"!=typeof Storage&&localStorage.setItem("__sgf_userdata",i):i=localStorage.getItem("__sgf_userdata");try{var e=i.split(","),r=a.segments;for(var n in e)if(e.hasOwnProperty(n)){var o=e[n].split("="),c=parseInt(o[0]);if(c>=7&&c<=35)parseInt(o[1])>=50&&r.push(p[c-7])}if(r)(u=s("loginStatus",dataLayer)).bId&&Segmentify("userid",u.bId.toString()),Segmentify("user:update",a),t(d.category,d.subCategory)}catch(e){var u;(u=s("loginStatus",dataLayer)).bId&&Segmentify("userid",u.bId.toString()),Segmentify("user:update",a),t(d.category,d.subCategory)}},window.jQuery(document).ajaxComplete(function(e,t,r){if(r&&r.url&&(r.url.indexOf("/sepet/ekle")>=0||r.url.indexOf("/sepet/hemenal")>=0)&&200==t.status&&0==t.responseJSON.statusCode){var a="&"+r.data,i=c("quantity",a),s=c("productId",a);n({quantity:i,productId:s,nextPage:!1})}if(r&&r.url&&r.url.indexOf("/sepet/guncelle")>=0&&200==t.status){var d=dataLayer[dataLayer.length-1];if("decreaseCount"==d.event)for(var p=0;p<d.decreasedProducts.length;p++){var u=d.decreasedProducts[p];o({quantity:u.dQuantity,productId:u.dId,nextPage:!1})}else if("increaseCount"==d.event)for(p=0;p<d.increasedProducts.length;p++){u=d.increasedProducts[p];n({quantity:u.iQuantity,productId:u.iId,nextPage:!1})}}if(r&&r.url&&r.url.indexOf("/sepet/sil")>=0&&200==t.status){a="&"+r.data,i=c("quantity",a),s=c("productId",a);o({quantity:i,productId:s,nextPage:!1})}});try{"Chrome"===window.bowser.name&&parseFloat(window.bowser.version)<30?Segmentify("event:custom",{type:"chrome_version",nextPage:"false"}):"Internet Explorer"===window.bowser.name&&parseFloat(window.bowser.version)<11?Segmentify("event:custom",{type:"ie_version",nextPage:"false"}):"Firefox"===window.bowser.name&&parseFloat(window.bowser.version)<27?Segmentify("event:custom",{type:"firefox_version",nextPage:"false"}):"Safari"===window.bowser.name&&parseFloat(window.bowser.version)<7?Segmentify("event:custom",{type:"safari_version",nextPage:"false"}):"Opera"===window.bowser.name&&parseFloat(window.bowser.version)<17?Segmentify("event:custom",{type:"opera_version",nextPage:"false"}):"Yandex Browser"===window.bowser.name&&parseFloat(window.bowser.version)<16.3&&Segmentify("event:custom",{type:"yandex_version",nextPage:"false"})}catch(e){Segmentify("event:custom",{type:"error_handler",params:{errorMessage:e.toString()}})}},"Promotion Detail":function(){s("pageType",dataLayer)},"Product Detail":function(){var t="PC"!=window._SgmntfY_._variables.ua.type,a=s("pageType",dataLayer),i={};i.brand=a.pBrand||"",i.title=a.title||"",i.productId=a.pId||"",i.image=a.pImageUrl||"",i.inStock="1"==a.pIsInStock,i.productUrl=a.pURL||"",i.categories=[],i.params={stockCount:e("input.stockCount:first").val()||"",imageCount:e(".proImgHolder .thumbsHolder > ul > li").length||e(".proImgHolder .thumbsHolder  ul.slidesjs-slide > li").length||"",commentCount:parseInt(e(".reviewNum").text()),storeScore:e(".sellers-products-shown .shopPoint .point").text().replace("%",""),sellerId:e(".sellerId").val()},i.categories.indexOf(a.pCatMain)<0&&""!=a.pCatMain&&i.categories.push(a.pCatMain),i.categories.indexOf(a.pCat1)<0&&""!=a.pCat1&&i.categories.push(a.pCat1),i.categories.indexOf(a.pCat2)<0&&""!=a.pCat2&&i.categories.push(a.pCat2),i.categories.indexOf(a.pCat3)<0&&""!=a.pCat3&&i.categories.push(a.pCat3),i.categories.indexOf(a.pCat4)<0&&""!=a.pCat4&&i.categories.push(a.pCat4),e(".dailyDealBadge:first").length&&(i.categories=["Günün Fırsatı"]),e(".data[itemprop='color']").length&&(i.colors=[e(".data[itemprop='color']").eq(0).text()]),parseFloat(a.pOriginalPrice)==parseFloat(a.pDiscountedPrice)?i.price=parseFloat(a.pOriginalPrice).toFixed(2)||0:parseFloat(a.pOriginalPrice)>parseFloat(a.pDiscountedPrice)&&(i.price=parseFloat(a.pDiscountedPrice).toFixed(2)||0,i.oldPrice=parseFloat(a.pOriginalPrice).toFixed(2)||""),i.noUpdate=t,i.source=function(){if(document.URL||document.referrer){if(_SgmntfY_._getQueryParameter("gclid").length)return"ADWORDS";var e=_SgmntfY_._getQueryParameter("utm_source");if("n11_mail"===e)return"EMAIL";if(e.indexOf("bilio")>-1||e.indexOf("ucuzu")>-1||e.indexOf("cimri")>-1||e.indexOf("akakce")>-1)return"LISTING";if(0===e.lastIndexOf("Aff_",0)||0===e.lastIndexOf("aff_",0))return"AFFILIATE";if(e.indexOf("sociomantic")>-1||e.indexOf("criteo")>-1||e.indexOf("rtbhouse")>-1||e.indexOf("rtg_")>-1)return"RETARGETING";if("social"===_SgmntfY_._getQueryParameter("utm_medium"))return"SOCIAL";var t=document.referrer.replace("https://","").replace("http://","");if(-1!=(t=t.substring(0,t.indexOf("/"))).indexOf("facebook")||-1!=t.indexOf("twitter")||-1!=t.indexOf("t.co")||-1!=t.indexOf("instagram")||-1!=t.indexOf("pinterest"))return"SOCIAL"}return"REFERRAL"}(),i.category=i.categories.join(" > "),r(i)},"Basket Page":function(){var e=s("ecommerce",dataLayer)||"",t="",r=[],i=!0;if(e){t=e.basketTotal;for(var n=e.basketProducts.length-1;n>=0;n--){var o=e.basketProducts[n];r.push({quantity:o.pQuantity,productId:o.pId,price:parseFloat(o.pDiscountedPrice/o.pQuantity).toFixed(2)||""}),"NaN"!==e.basketProducts[n].pOriginalPrice.toString()&&"0"!==e.basketProducts[n].pQuantity.toString()||(i=!1)}i&&a({totalPrice:t,productList:r})}},"Order Success":function(){var e=s("ecommerce",dataLayer)||"",t="",r=[];if(e){var a=e.transactionId||"";t=e.transactionTotal;for(var n=0;n<e.transactionProducts.length;n++){var o=e.transactionProducts[n];r.push({quantity:o.pQuantity,productId:o.pId,price:parseFloat(o.pDiscountedPrice/o.pQuantity).toFixed(2)||""})}var c={orderNo:a,totalPrice:t,productList:r};parseFloat(t)>0&&i(c)}}};return{init:function(){!function(){try{var t="",r="";if((a=s("pageType",dataLayer))&&(t=a.pageType||"",r=a.pageName||""),"home"==t)return void(d.category="Home Page");if("other"==t&&"promotion-detail"==r){d.category="Promotion Detail";var a=s("pageType",dataLayer),i=s("ecommerce",dataLayer);try{var n=a.promoImage.split("/").slice(-1)[0].split(".")[0],o=a.promoStartDate.split("-");o=o.reverse().join("-");var c=a.promoEndDate.split("-");c=c.reverse().join("-");var p=PromotionifyIntegration(e),u={code:n,title:a.promoName,url:a.promoUrl,mUrl:a.promoUrl,image:a.promoImage,startDate:o,endDate:c},g=i.ecommerce.impressions[0].category.split("/").join(" > ");p.relationship(g,"category",u)}catch(e){window.promotionDetailErr=e}return}if("other"==t&&"promotion-list"==r){if(d.category="Promotion List","PC"===_SgmntfY_._variables.ua.type){var l=e(".panelContent");segTilePromotionifyHandler(l,".imgBoxInsetShadow")}return}if("other"==t&&"my-account"==r)return void(d.category="Orders List");if("category"==t)return d.category="Product Category",a=s("pageType",dataLayer),d.categories.indexOf(a.pCatMain)<0&&""!=a.pCatMain&&d.categories.push(a.pCatMain),d.categories.indexOf(a.pCat1)<0&&""!=a.pCat1&&d.categories.push(a.pCat1),d.categories.indexOf(a.pCat2)<0&&""!=a.pCat2&&d.categories.push(a.pCat2),d.categories.indexOf(a.pCat3)<0&&""!=a.pCat3&&d.categories.push(a.pCat3),d.categories.indexOf(a.pCat4)<0&&""!=a.pCat4&&d.categories.push(a.pCat4),void(d.subCategory=d.categories.join(" > ")||"");if("product"==t)return d.category="Product Detail",a=s("pageType",dataLayer),d.categories.indexOf(a.pCatMain)<0&&""!=a.pCatMain&&d.categories.push(a.pCatMain),d.categories.indexOf(a.pCat1)<0&&""!=a.pCat1&&d.categories.push(a.pCat1),d.categories.indexOf(a.pCat2)<0&&""!=a.pCat2&&d.categories.push(a.pCat2),d.categories.indexOf(a.pCat3)<0&&""!=a.pCat3&&d.categories.push(a.pCat3),d.categories.indexOf(a.pCat4)<0&&""!=a.pCat4&&d.categories.push(a.pCat4),void(d.subCategory=d.categories.join(" > ")||"");if("cart"==t)return void(d.category="Basket Page");if("searchresults"==t){d.category="Product Search Result",d.subCategory="string"==typeof segSearchCategory?segSearchCategory:"";var f=s("gaEventCategory",dataLayer);return void(f&&"0 Search Result"===f.gaEventCategory&&(d.subCategory="Empty Search"))}if(e("#error404").length)return void(d.category="404 Page");"purchase"==t&&(d.category="Order Success")}catch(e){window.segErr=e}}(),function(e){try{e&&p.hasOwnProperty(e)&&p[e](),p["All Pages"]()}catch(e){window.segErr=e}}(d.category)}}};waitSegmentifyAndjQuery();try{window._formatNameN11=function(e){var t="",r="",a=!1,i=!1,n=e.split(" ");jQuery.each(n,function(e,n){!a&&t.length+n.length<20?t+=n+" ":!i&&r.length+n.length<17?(a=!0,r+=n+" "):i=!0});var o=(t+"<br>"+r).trim();return o.replace("<br>","")!==e&&(o+="..."),o},window._resizeImageN11=function(e){var t=e;return t.indexOf("/1024/")>=0?t=t.replace("/1024/","/70/"):t.indexOf("/450/")>=0&&(t=t.replace("/450/","/70/")),t},window._formatPriceN11=function(e){try{var t=e.toString().split("."),r=t[0].replace(/(\d)(?=(\d{3})+$)/g,"$1.")+",";return r+=((t[1]||"00").length>1?t[1]||"00":t[1]+"0")+" TL"}catch(e){}},window._todaysDealN11=function(e,t){if(t.length){var r=t[0];if("undefined"!=typeof dataLayer&&dataLayer[0].pId===r.productId)return;if(r.categories.indexOf("Günün Fırsatı")<0)return;var a="";r.oldPrice&&(a=Math.ceil((r.oldPrice-r.price)/r.oldPrice*100));var i=r.params||{},n=jQuery("<div/>",{class:"sgf-todaysdeal"});n.append(jQuery("<div/>",{class:"sgf-todaysdeal-header"}).append(jQuery("<span/>",{text:e}))).append(jQuery("<div/>",{class:"sgf-todaysdeal-firstrow"}).append(jQuery("<a/>",{href:r.url,title:r.name,"data-id":r.productId,itemprop:"url"}).append(jQuery("<img/>",{src:_resizeImageN11(r.image)})).append(jQuery("<h2/>",{class:"sgf-product-name",itemprop:"name",html:_formatNameN11(r.name)})).append(jQuery("<span/>",{class:"sgf-stock-info",html:'<i class="icon iconWarning"></i>Stokta kalan <strong>son '+i.stockCount+" ürün!</strong>"})))).append(jQuery("<div/>",{class:"sgf-todaysdeal-secondrow"}).append(jQuery("<div/>",{class:"sgf-discount"}).append(jQuery("<span/>",{text:"%"+a})).append(jQuery("<span/>",{text:"İNDİRİM"}))).append(jQuery("<div/>",{class:"sgf-price"}).append(jQuery("<div/>",{class:"oldPrice",text:_formatPriceN11(r.oldPrice)})).append(jQuery("<div/>",{class:"newPrice",text:_formatPriceN11(r.price),itemProp:"price"}))).append(jQuery("<div/>",{class:"sgf-btnholder"}).append(jQuery("<a/>",{href:r.url,class:"btn btnBlack",text:"Ürüne Git",title:"Ürüne Git"}))));var o={minHeight:10,width:328,height:177,autoSize:!1,autoWidth:!1,autoHeight:!1,topRatio:1,leftRatio:.94,closeBtn:!0,content:n,wrapCSS:"fancybox-seamless",helpers:{overlay:null},beforeShow:function(){jQuery(".fancybox-segmentify .fancybox-skin").attr("style","padding: 0!important; border: 1px solid #dedede!important"),jQuery(".fancybox-segmentify .fancybox-close").attr("style","top: 5px!important")},beforeClose:function(){var e="_sgm_campaign".replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(r.url),a=null===t?"":decodeURIComponent(t[1].replace(/\+/g," "));Segmentify("event:interaction",{type:"close",interactionId:"blank_intentionally",instanceId:a})},afterClose:function(){jQuery(".fancybox-segmentify").remove()}};_SgmntfY_._getJq().fancybox(o),setTimeout(function(){jQuery(".fancybox-segmentify .fancybox-close").attr("style","top: 5px!important")},500)}}}catch(e){window.segAddjsErr=e}function PromotionifyIntegration(e){var t=function(e){Segmentify("impression:promotion",e)},r=function(e){Segmentify("view:promotion",e)};window.checkNewPromotions=setInterval(function(){e(".seg-promotion-wrapper:not(.impressed)").each(function(){if(e(this).addClass("impressed"),e(this).find(".slick-slide").length>0){SliderPromotionifyHandler(e(this),".slick-slide:not(.slick-cloned)")}else{segTilePromotionifyHandler(e(this),".mt10")}})},2500);var a={propertiesHasValue:function(e,t){for(var r in e)if(!e.hasOwnProperty(r)||!e[r]&&(t||[]).indexOf(r)<0)return!1;return!0},isScrolledIntoView:function(t){try{var r=e(t),a=e(window),i=a.scrollTop(),n=i+a.height(),o=r.offset().top;return o+Math.floor(r.height()/2)<=n&&o>=i}catch(e){return window.bannerifyErr=e,!1}},makeUrlAbsolute:function(e){var t=document.location.origin;return"string"==typeof e&&e?0==e.indexOf("/")&&e.indexOf("//")<0?t+e:0==e.indexOf("//")?document.location.protocol+e:0!=e.indexOf("/")&&0!=e.indexOf("//")&&e.indexOf(t)<0&&e.indexOf("http://")<0&&e.indexOf("https://")<0?t+"/"+e:e:""},sendPromotionImpression:function(r,i){try{window.paramsPS=r;var n=[];setInterval(function(){if(void 0!==r)for(var o=0;o<r.banners.length;o++){var s=r.banners[o];if(a.isScrolledIntoView(e(s.banner))&&"none"!=e(s.banner).css("display")&&0!=e(s.banner).css("opacity")&&"hidden"!=e(s.banner).css("visibility")&&n.indexOf(s.code)<0)if(!1!==i&&s.banner.hasClass(i)){var c={code:s.code};t(c),n.push(s.code)}else if(!1===i){c={code:s.code};t(c),n.push(s.code)}}},250)}catch(e){window.promotionErr=e}},promotionRelationship:function(e,i,n){try{setTimeout(function(){if(e&&i)if(window._SgmntfY_){var o={};"product"==i.toLowerCase()?o.productIds=e:"category"==i.toLowerCase()?o.categories=e:"label"==i.toLowerCase()?o.labels=e:"brand"==i.toLowerCase()&&(o.brands=e),void 0!==n.code&&(o.code=n.code),void 0!==n.title&&(o.title=n.title),void 0!==n.url&&(o.url=n.url),void 0!==n.mUrl&&(o.mUrl=n.mUrl),void 0!==n.image&&(o.image=n.image),void 0!==n.startDate&&(o.startDate=n.startDate),void 0!==n.endDate&&(o.endDate=n.endDate),void 0!==n.publishTime&&(o.publishTime=n.publishTime),t(o,!1),r(o),_SgmntfY_._storePersistentData("_sgf_clicked_promotions","",1)}else a.promotionRelationship(e,i)},150)}catch(e){window.promotionErr=e}}};return{impression:a.sendPromotionImpression,relationship:a.promotionRelationship}}function segTilePromotionifyHandler(e,t){try{var r=jQuery(e);if(!r.length||!e)return;var a=r.find(t),i=PromotionifyIntegration(jQuery),n={banners:[]};jQuery.each(a,function(e,t){var r=jQuery(t),a=r.find("img").first();r.click(function(){var e={code:jQuery(t).find("img").attr("src").split("/").slice(-1)[0].split(".")[0]},r=JSON.stringify(e);_SgmntfY_._storePersistentData("_sgf_clicked_promotions",r,1)});var i={banner:r,code:(a.attr("src").split("/").slice(-1)[0].split(".")[0]||"").trim()};i.title&&n.banners.push(i)}),n.banners.length>0&&i.impression(n,!1)}catch(e){window.promotionErr=e}}function SliderPromotionifyHandler(e,t){try{var r=jQuery(e);if(!r.length||!e)return;var a=r.find(t),i=PromotionifyIntegration(jQuery);window.promotions={banners:[]},jQuery.each(a,function(e,t){var r=jQuery(t),a=r.find("img").first();r.find("a").first().click(function(){var e={code:jQuery(t).find("img").attr("src").split("/").slice(-1)[0].split(".")[0]},r=JSON.stringify(e);_SgmntfY_._storePersistentData("_sgf_clicked_promotions",r,1)});var i={banner:r,code:(a.attr("src").split("/").slice(-1)[0].split(".")[0]||"").trim()};i.title&&promotions.banners.push(i)}),promotions.banners.length>0&&i.impression(promotions,"slick-active")}catch(e){window.promotionErr=e}}
/* DateTime: 2019-08-13, 06:51:21 */
function initializeMustache(Y){var t=Object.prototype.toString,b=Array.isArray||function(e){return"[object Array]"===t.call(e)};function m(e){return"function"==typeof e}function E(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}var n=RegExp.prototype.test;var a=/\S/;function I(e){return!function(e,t){return n.call(e,t)}(a,e)}var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var O=/\s*/,C=/\s+/,w=/\s*=/,A=/\s*\}/,T=/#|\^|\/|>|\{|&|=|!/;function L(e){this.string=e,this.tail=e,this.pos=0}function i(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function e(){this.cache={}}L.prototype.eos=function(){return""===this.tail},L.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},L.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},i.prototype.push=function(e){return new i(e,this)},i.prototype.lookup=function(e){var t,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{for(var a,r,i=this,s=!1;i;){if(0<e.indexOf("."))for(t=i.view,a=e.split("."),r=0;null!=t&&r<a.length;)r===a.length-1&&(s=o(t,a[r])),t=t[a[r++]];else t=i.view[e],s=o(i.view,e);if(s)break;i=i.parent}n[e]=t}return m(t)&&(t=t.call(this.view)),t},e.prototype.clearCache=function(){this.cache={}},e.prototype.parse=function(e,t){var n=this.cache,a=n[e];return null==a&&(a=n[e]=function(e,t){if(!e)return[];var n,a,r,i=[],s=[],o=[],c=!1,m=!1;function _(){if(c&&!m)for(;o.length;)delete s[o.pop()];else o=[];m=c=!1}function g(e){if("string"==typeof e&&(e=e.split(C,2)),!b(e)||2!==e.length)throw new Error("Invalid tags: "+e);n=new RegExp(E(e[0])+"\\s*"),a=new RegExp("\\s*"+E(e[1])),r=new RegExp("\\s*"+E("}"+e[1]))}g(t||Y.tags);for(var d,f,l,u,p,S,v=new L(e);!v.eos();){if(d=v.pos,l=v.scanUntil(n))for(var y=0,h=l.length;y<h;++y)I(u=l.charAt(y))?o.push(s.length):m=!0,s.push(["text",u,d,d+1]),d+=1,"\n"===u&&_();if(!v.scan(n))break;if(c=!0,f=v.scan(T)||"name",v.scan(O),"="===f?(l=v.scanUntil(w),v.scan(w),v.scanUntil(a)):"{"===f?(l=v.scanUntil(r),v.scan(A),v.scanUntil(a),f="&"):l=v.scanUntil(a),!v.scan(a))throw new Error("Unclosed tag at "+v.pos);if(p=[f,l,d,v.pos],s.push(p),"#"===f||"^"===f)i.push(p);else if("/"===f){if(!(S=i.pop()))throw new Error('Unopened section "'+l+'" at '+d);if(S[1]!==l)throw new Error('Unclosed section "'+S[1]+'" at '+d)}else"name"===f||"{"===f||"&"===f?m=!0:"="===f&&g(l)}if(S=i.pop())throw new Error('Unclosed section "'+S[1]+'" at '+v.pos);return function(e){for(var t,n=[],a=n,r=[],i=0,s=e.length;i<s;++i)switch((t=e[i])[0]){case"#":case"^":a.push(t),r.push(t),a=t[4]=[];break;case"/":r.pop()[5]=t[2],a=0<r.length?r[r.length-1][4]:n;break;default:a.push(t)}return n}(function(e){for(var t,n,a=[],r=0,i=e.length;r<i;++r)(t=e[r])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(a.push(t),n=t));return a}(s))}(e,t)),a},e.prototype.render=function(e,t,n){var a=this.parse(e),r=t instanceof i?t:new i(t);return this.renderTokens(a,r,n,e)},e.prototype.renderTokens=function(e,t,n,a){for(var r,i,s,o="",c=0,m=e.length;c<m;++c)s=void 0,"#"===(i=(r=e[c])[0])?s=this.renderSection(r,t,n,a):"^"===i?s=this.renderInverted(r,t,n,a):">"===i?s=this.renderPartial(r,t,n,a):"&"===i?s=this.unescapedValue(r,t):"name"===i?s=this.escapedValue(r,t):"text"===i&&(s=this.rawValue(r)),void 0!==s&&(o+=s);return o},e.prototype.renderSection=function(e,t,n,a){var r=this,i="",s=t.lookup(e[1]);if(s){if(b(s))for(var o=0,c=s.length;o<c;++o)i+=this.renderTokens(e[4],t.push(s[o]),n,a);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)i+=this.renderTokens(e[4],t.push(s),n,a);else if(m(s)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(t.view,a.slice(e[3],e[5]),function(e){return r.render(e,t,n)}))&&(i+=s)}else i+=this.renderTokens(e[4],t,n,a);return i}},e.prototype.renderInverted=function(e,t,n,a){var r=t.lookup(e[1]);if(!r||b(r)&&0===r.length)return this.renderTokens(e[4],t,n,a)},e.prototype.renderPartial=function(e,t,n){if(n){var a=m(n)?n(e[1]):n[e[1]];return null!=a?this.renderTokens(this.parse(a),t,n,a):void 0}},e.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},e.prototype.escapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return Y.escape(n)},e.prototype.rawValue=function(e){return e[1]},Y.name="mustache.js",Y.version="2.2.1",Y.tags=["{{","}}"];var s=new e;Y.clearCache=function(){return s.clearCache()},Y.parse=function(e,t){return s.parse(e,t)},Y.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+function(e){return b(e)?"array":typeof e}(e)+'" was given as the first argument for mustache#render(template, view, partials)');return s.render(e,t,n)},Y.to_html=function(e,t,n,a){var r=Y.render(e,t,n);if(!m(a))return r;a(r)},Y.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return r[e]})},Y.Scanner=L,Y.Context=i,Y.Writer=e}!function(e){e.bowser=function(){var w=true;function s(n){function e(e){var t=n.match(e);return t&&t.length>1&&t[1]||""}function t(e){var t=n.match(e);return t&&t.length>1&&t[2]||""}var a=e(/(ipod|iphone|ipad)/i).toLowerCase(),r=/like android/i.test(n),i=!r&&/android/i.test(n),s=/nexus\s*[0-6]\s*/i.test(n),o=!s&&/nexus\s*[0-9]+/i.test(n),c=/CrOS/.test(n),m=/silk/i.test(n),_=/sailfish/i.test(n),g=/tizen/i.test(n),d=/(web|hpw)os/i.test(n),f=/windows phone/i.test(n),l=/SamsungBrowser/i.test(n),u=!f&&/windows/i.test(n),p=!a&&!m&&/macintosh/i.test(n),S=!i&&!_&&!g&&!d&&/linux/i.test(n),v=t(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),y=e(/version\/(\d+(\.\d+)?)/i),h=/tablet/i.test(n)&&!/tablet pc/i.test(n),Y=!h&&/[^-]mobi/i.test(n),b=/xbox/i.test(n),E;if(/opera/i.test(n)){E={name:"Opera",opera:w,version:y||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}}else if(/opr\/|opios/i.test(n)){E={name:"Opera",opera:w,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||y}}else if(/SamsungBrowser/i.test(n)){E={name:"Samsung Internet for Android",samsungBrowser:w,version:y||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}}else if(/coast/i.test(n)){E={name:"Opera Coast",coast:w,version:y||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}}else if(/yabrowser/i.test(n)){E={name:"Yandex Browser",yandexbrowser:w,version:y||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}}else if(/ucbrowser/i.test(n)){E={name:"UC Browser",ucbrowser:w,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}}else if(/mxios/i.test(n)){E={name:"Maxthon",maxthon:w,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}}else if(/epiphany/i.test(n)){E={name:"Epiphany",epiphany:w,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}}else if(/puffin/i.test(n)){E={name:"Puffin",puffin:w,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}}else if(/sleipnir/i.test(n)){E={name:"Sleipnir",sleipnir:w,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}}else if(/k-meleon/i.test(n)){E={name:"K-Meleon",kMeleon:w,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}}else if(f){E={name:"Windows Phone",osname:"Windows Phone",windowsphone:w};if(v){E.msedge=w;E.version=v}else{E.msie=w;E.version=e(/iemobile\/(\d+(\.\d+)?)/i)}}else if(/msie|trident/i.test(n)){E={name:"Internet Explorer",msie:w,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}}else if(c){E={name:"Chrome",osname:"Chrome OS",chromeos:w,chromeBook:w,chrome:w,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}}else if(/edg([ea]|ios)/i.test(n)){E={name:"Microsoft Edge",msedge:w,version:v}}else if(/vivaldi/i.test(n)){E={name:"Vivaldi",vivaldi:w,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||y}}else if(_){E={name:"Sailfish",osname:"Sailfish OS",sailfish:w,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}}else if(/seamonkey\//i.test(n)){E={name:"SeaMonkey",seamonkey:w,version:e(/seamonkey\/(\d+(\.\d+)?)/i)}}else if(/firefox|iceweasel|fxios/i.test(n)){E={name:"Firefox",firefox:w,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)};if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(n)){E.firefoxos=w;E.osname="Firefox OS"}}else if(m){E={name:"Amazon Silk",silk:w,version:e(/silk\/(\d+(\.\d+)?)/i)}}else if(/phantom/i.test(n)){E={name:"PhantomJS",phantom:w,version:e(/phantomjs\/(\d+(\.\d+)?)/i)}}else if(/slimerjs/i.test(n)){E={name:"SlimerJS",slimer:w,version:e(/slimerjs\/(\d+(\.\d+)?)/i)}}else if(/blackberry|\bbb\d+/i.test(n)||/rim\stablet/i.test(n)){E={name:"BlackBerry",osname:"BlackBerry OS",blackberry:w,version:y||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}}else if(d){E={name:"WebOS",osname:"WebOS",webos:w,version:y||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(n)&&(E.touchpad=w)}else if(/bada/i.test(n)){E={name:"Bada",osname:"Bada",bada:w,version:e(/dolfin\/(\d+(\.\d+)?)/i)}}else if(g){E={name:"Tizen",osname:"Tizen",tizen:w,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||y}}else if(/qupzilla/i.test(n)){E={name:"QupZilla",qupzilla:w,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||y}}else if(/chromium/i.test(n)){E={name:"Chromium",chromium:w,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||y}}else if(/chrome|crios|crmo/i.test(n)){E={name:"Chrome",chrome:w,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}}else if(i){E={name:"Android",version:y}}else if(/safari|applewebkit/i.test(n)){E={name:"Safari",safari:w};if(y){E.version=y}}else if(a){E={name:a=="iphone"?"iPhone":a=="ipad"?"iPad":"iPod"};if(y){E.version=y}}else if(/googlebot/i.test(n)){E={name:"Googlebot",googlebot:w,version:e(/googlebot\/(\d+(\.\d+))/i)||y}}else{E={name:e(/^(.*)\/(.*) /),version:t(/^(.*)\/(.*) /)}}if(!E.msedge&&/(apple)?webkit/i.test(n)){if(/(apple)?webkit\/537\.36/i.test(n)){E.name=E.name||"Blink";E.blink=w}else{E.name=E.name||"Webkit";E.webkit=w}if(!E.version&&y){E.version=y}}else if(!E.opera&&/gecko\//i.test(n)){E.name=E.name||"Gecko";E.gecko=w;E.version=E.version||e(/gecko\/(\d+(\.\d+)?)/i)}if(!E.windowsphone&&(i||E.silk)){E.android=w;E.osname="Android"}else if(!E.windowsphone&&a){E[a]=w;E.ios=w;E.osname="iOS"}else if(p){E.mac=w;E.osname="macOS"}else if(b){E.xbox=w;E.osname="Xbox"}else if(u){E.windows=w;E.osname="Windows"}else if(S){E.linux=w;E.osname="Linux"}function I(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return undefined}}var O="";if(E.windows){O=I(e(/Windows ((NT|XP)( \d\d?.\d)?)/i))}else if(E.windowsphone){O=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i)}else if(E.mac){O=e(/Mac OS X (\d+([_\.\s]\d+)*)/i);O=O.replace(/[_\s]/g,".")}else if(a){O=e(/os (\d+([_\s]\d+)*) like mac os x/i);O=O.replace(/[_\s]/g,".")}else if(i){O=e(/android[ \/-](\d+(\.\d+)*)/i)}else if(E.webos){O=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i)}else if(E.blackberry){O=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i)}else if(E.bada){O=e(/bada\/(\d+(\.\d+)*)/i)}else if(E.tizen){O=e(/tizen[\/\s](\d+(\.\d+)*)/i)}if(O){E.osversion=O}var C=!E.windows&&O.split(".")[0];if(h||o||a=="ipad"||i&&(C==3||C>=4&&!Y)||E.silk){E.tablet=w}else if(Y||a=="iphone"||a=="ipod"||i||s||E.blackberry||E.webos||E.bada){E.mobile=w}if(E.msedge||E.msie&&E.version>=10||E.yandexbrowser&&E.version>=15||E.vivaldi&&E.version>=1||E.chrome&&E.version>=20||E.samsungBrowser&&E.version>=4||E.firefox&&E.version>=20||E.safari&&E.version>=6||E.opera&&E.version>=10||E.ios&&E.osversion&&E.osversion.split(".")[0]>=6||E.blackberry&&E.version>=10.1||E.chromium&&E.version>=20){E.a=w}else if(E.msie&&E.version<10||E.chrome&&E.version<20||E.firefox&&E.version<20||E.safari&&E.version<6||E.opera&&E.version<10||E.ios&&E.osversion&&E.osversion.split(".")[0]<6||E.chromium&&E.version<20){E.c=w}else E.x=w;return E}var o=s(typeof navigator!=="undefined"?navigator.userAgent||"":"");function a(e){return e.split(".").length}function r(e,t){var n=[],a;if(Array.prototype.map){return Array.prototype.map.call(e,t)}for(a=0;a<e.length;a++){n.push(t(e[a]))}return n}function c(e){var n=Math.max(a(e[0]),a(e[1]));var t=r(e,function(e){var t=n-a(e);e=e+new Array(t+1).join(".0");return r(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});while(--n>=0){if(t[0][n]>t[1][n]){return 1}else if(t[0][n]===t[1][n]){if(n===0){return 0}}else{return-1}}}function i(e,t,n){var a=o;if(typeof t==="string"){n=t;t=void 0}if(t===void 0){t=false}if(n){a=s(n)}var r=""+a.version;for(var i in e){if(e.hasOwnProperty(i)){if(a[i]){if(typeof e[i]!=="string"){throw new Error("Browser version in the minVersion map should be a string: "+i+": "+String(e))}return c([r,e[i]])<0}}}return t}function e(e,t,n){return!i(e,t,n)}return o.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in o)return!0}return!1},o.isUnsupportedBrowser=i,o.compareVersions=c,o.check=function(e,t,n){return!i(e,t,n)},o._detect=s,o}()}(this),function(){var _SgmntfY_=window._SgmntfY_={LOG_LEVELS:{SILENT:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},_variables:{jq:window.SegmentifyjQuery||null,mustache:null,domain:window.SegmentifyDomain||window.location.hostname,ua:{agentString:window.navigator.userAgent,type:null,name:null,version:null,os:null,osversion:null},userStorageKey:"_sgf_user_id",sessionStorageKey:"_sgf_session_id",testMode:"_sgf_test_mode",tracking:"_sgf_tracking",storage:{delayedActions:{key:"_sgf_delayed_actions",local:!0},delayedCampaigns:{key:"_sgf_delayed_campaigns",local:!0},retryQueue:{key:"_sgf_rq",local:!0},extensionStatus:{key:"segmentifyExtension",local:!0},clickedBanners:{key:"_sgf_clicked_banners",local:!1},nextPageQueue:{key:"_sgf_npq",local:!0},user:{key:"_sgf_user_id",local:!1},session:{key:"_sgf_session_id",local:!1}},logLevel:"ERROR",segmentifyObj:null,recommendedProducts:[],recommendedPromotions:[],waitingKeys:!1,apiKey:null,skipProductDetail:{device:[]},offerRecommendedProducts:!1,offerRecommendedPromotions:!1,runTimer:null,initTimer:null,initTryCount:0,initTryLimit:50,isUnload:!1,cssPreload:!1,constants:{frequency:100,redirectDelay:1e3,retryLimit:3,eventTimeout:10,clickedBannersLimit:20,recommendationSelectorFindLimit:50},ga:{enabled:!1},requiredParams:{PAGE_VIEW:[],PRODUCT_VIEW:["productId"],BASKET_OPERATIONS:["productId","basketId","step"],CHECKOUT:["totalPrice","basketId","step"],USER_OPERATIONS:["step"],FORM:["formName","fields"],CUSTOM_EVENT:["type"],INTERACTION:["type"],BANNER_OPERATIONS:["type","title","group","order"],BANNER_GROUP_VIEW:["group"],INTERNAL_BANNER_GROUP:["group"],USER_CHANGE:["oldUserId"],PROMOTION:["type","code"]},optionalParams:{PAGE_VIEW:["category","subCategory"],PRODUCT_VIEW:["title","url","mUrl","image","imageXS","imageS","imageM","imageL","imageXL","additionalImages","category","categories","price","oldPrice","specialPrice","lastUpdateTime","inStock","stockCount","stockRatio","stockStatus","brand","gender","labels","sizes","colors","publishTime","source","noUpdate","activeBanners","groupId"],BASKET_OPERATIONS:["price","quantity","activeBanners"],CHECKOUT:["productList","orderNo","paymentType","activeBanners","cartUrl","totalDiscount","discounts","shipment","tax"],USER_OPERATIONS:["username","fullName","phone","gender","birthDate","segments","memberSince","service","isRegistered","isLogin","location","emailNtf","mailTest","pushTest","custom"],FORM:[],CUSTOM_EVENT:[],INTERACTION:["interactionId","instanceId"],BANNER_OPERATIONS:["productId","category","brand","label"],BANNER_GROUP_VIEW:[],INTERNAL_BANNER_GROUP:["banners"],USER_CHANGE:[],PROMOTION:["title","url","mUrl","image","mImage","startDate","endDate","categories","brands","labels","productIds","publishTime"]},segmentifyApiUrl:"//rest.segmentify.com/",segmentifyCDNUrl:"//cdn.segmentify.com/",jQueryUrl:"//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js",dataLayer:"sgfLayer",consumeDataLayer:!0,dataLayerConfig:{},categoryHierarchy:!1,disableNextPage:!1,language:"EN",currency:"",region:""},_loadJavascript:function(e,t,n){var a=document.createElement("script");return a.type="text/javascript",a.async=t,n&&"function"==typeof n&&(void 0!==a.onreadystatechange?a.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||(n(),a.onreadystatechange=null)}:a.onload=n),a.src=e,document.getElementsByTagName("head")[0].appendChild(a),a},_loadCSS:function(e,t){var n=document.createElement("link");return n.type="text/css",_SgmntfY_._variables.cssPreload?(n.rel="preload",n.as="style"):n.rel="stylesheet",n.media="screen",t&&"function"==typeof t&&(void 0!==n.onreadystatechange?n.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||(t(),n.onreadystatechange=null)}:n.onload=t),n.href=e,document.getElementsByTagName("head")[0].appendChild(n),n},_actions:{_notificationWindow:function(params){var config={title:params.notificationTitle,vertical:"middle",horizontal:"center"},title=params.notificationTitle;switch(params.windowPosition){case"top":config.vertical="top";break;case"bottom":config.vertical="bottom";break;case"left":config.horizontal="left";break;case"right":config.horizontal="right";break;case"top-left":config.vertical="top",config.horizontal="left";break;case"top-right":config.vertical="top",config.horizontal="right";break;case"bottom-left":config.vertical="bottom",config.horizontal="left";break;case"bottom-right":config.vertical="bottom",config.horizontal="right"}var outerHtml=_SgmntfY_._getJq()('<div class="seg-popup seg-[[vertical]]-[[horizontal]] segFadeInUp fancybox-segmentify"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>'),notificationBody=_SgmntfY_._getJq()('<div class="fancybox-body" />').appendTo(outerHtml.find(".fancybox-inner"));params.html instanceof _SgmntfY_._getJq()?notificationBody.append(params.html):notificationBody.html(params.html);for(var button_overlay=_SgmntfY_._getJq()("<div />").appendTo(notificationBody),buttons=params.buttons||[],i=0;i<buttons.length;i++)_SgmntfY_._getJq()('<button data-newWindow="'+buttons[i].newWindow+'" data-target="'+buttons[i].buttonUrl+'" class="fancybox-button '+buttons[i].buttonColor+'">'+buttons[i].buttonTitle+"</button>").appendTo(button_overlay);"seamless"===params.windowStyle&&(title&&_SgmntfY_._getJq()('<div class="overlay-area-title" ><span>'+title+"</span></div>").appendTo(notificationBody),button_overlay.addClass("overlay-area-buttons").addClass("right"),title=null),"false"===params.isModal&&_SgmntfY_._getJq()('<span class="seg-popup-close"></span>').appendTo(outerHtml);var renderedHtml=_SgmntfY_._getMustache().render(outerHtml.prop("outerHTML"),config);_SgmntfY_._getJq()("body").prepend(renderedHtml),"true"===params.overlay&&(_SgmntfY_._getJq()('<div class="seg-popup-overlay"></div>').prependTo(_SgmntfY_._getJq()("body")),_SgmntfY_._getJq()(".seg-popup-overlay").show()),"false"===params.isModal&&_SgmntfY_._getJq()(".seg-popup-close").bind("click",function(){var e=_SgmntfY_._getJq()(this);e.parent(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"close",instanceId:params.instanceId,interactionId:params.instanceId})}),params.cssCode&&_SgmntfY_._getJq()("<style />").html(params.cssCode).prependTo(_SgmntfY_._getJq()("body"));try{params.javascriptCode&&eval(params.javascriptCode)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing javascript code: "+e)}if(_SgmntfY_._getJq()(".seg-popup").find("form")){var $inner=_SgmntfY_._getJq()(".seg-popup .fancybox-body"),$form=$inner.find("form").eq(0);$form.bind("submit",function(e){e.preventDefault(),_SgmntfY_.LOG_MESSAGE("DEBUG","Popup Form button click for actionId: "+params.actionId),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"submit",interactionId:params.formName,instanceId:params.instanceId}),_SgmntfY_._variables.segmentifyObj("user:form",{formName:params.formName,fields:$form.sgmSerializeForm()}),$inner.html(params.successHtml),setTimeout(function(){$inner.parents(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),$inner.parents(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3)})}var redirectFn=function(e){function t(e,t){window.open(e.data("target"),t),e.parents(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3)}"true"===e.data("newwindow")||!0===e.data("newwindow")?t(e,"_blank"):setTimeout(function(){t(e,"_self")},_SgmntfY_._variables.constants.redirectDelay)};_SgmntfY_._getJq()(".seg-popup .fancybox-button").click(function(){_SgmntfY_.LOG_MESSAGE("DEBUG","Notification Window button click for actionId: "+params.actionId),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",interactionId:_SgmntfY_._getJq()(this).text(),instanceId:params.instanceId}),redirectFn(_SgmntfY_._getJq()(this))}),_SgmntfY_._getJq()(".seg-popup a img").bind("click",function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",instanceId:params.instanceId,interactionId:params.instanceId})}),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:params.instanceId,interactionId:params.instanceId})},notificationBanner:function(t){var n=[];try{t.buttons&&(n=JSON.parse(t.buttons))}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Cannot parse buttons json, str: "+t.buttons),n=[]}t.buttons=n,t.html=_SgmntfY_._getJq()('<div><a href="'+t.redirectUrl+'"><img id="sgm_img" src="'+t.imageUrl+'"></a></div>'),_SgmntfY_._actions._notificationWindow(t)},notificationMessage:function(t){var n=[];try{t.buttons&&(n=JSON.parse(t.buttons))}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Cannot parse buttons json, str: "+t.buttons),n=[]}t.html=t.notificationText,t.buttons=n,_SgmntfY_._actions._notificationWindow(t)},visitorForm:function(e){switch(e.actionType){case"INPAGE_WIDGET":(function e(){var t=this.params,n=this.selectorCount,a=t.selector;if(a&&_SgmntfY_._getJq()(a).length)try{a.addClass("sgm-recommendation sgm-clearcss").html(t.formHtml);var r=a.find("form").eq(0);r.submit(function(e){e.preventDefault(),_SgmntfY_.LOG_MESSAGE("DEBUG","In-page Form button click for actionId: "+t.actionId),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"submit",interactionId:t.formName,instanceId:t.instanceId}),_SgmntfY_._variables.segmentifyObj("user:form",{formName:t.formName,fields:r.sgmSerializeForm()}),setTimeout(function(){a.html(t.successHtml)},1e3)})}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Error in filling target element["+t.selector+"] with visitor form: "+e)}else if(_SgmntfY_.LOG_MESSAGE("WARN","Error in finding target element["+target+"], element does not exist"),n<_SgmntfY_._variables.constants.recommendationSelectorFindLimit){++this.selectorCount;var i=e.bind(this);setTimeout(i,100)}}).bind({params:e,selectorCount:1})();break;case"POPUP_WINDOW":default:e.html=e.formHtml,_SgmntfY_._actions._notificationWindow(e)}},recommendProducts:function(params,request){var previousMetadata={productId:request.originalParams.productId,productUrl:request.originalParams.productUrl,instanceId:params.instanceId};function dynamicItemKey(e){var t=e.recommendationSource;return void 0!==e.timeFrame&&_SgmntfY_._isNotEmpty(e.timeFrame)&&(t+="|"+e.timeFrame,void 0!==e.score&&_SgmntfY_._isNotEmpty(e.score)&&(t+="|"+e.score)),t}function checkDynamicItemCount(e,t){for(var n=0;n<e.length;++n)if(dynamicItemKey(e[n])===t)return e[n].itemCount;return null}function checkProductInList(e,t){for(var n=0;n<e.length;n++)if(e[n].productId==t)return!0;return!1}function isElemVisible(e){try{if(_SgmntfY_._exists(e)&&"none"!==e.css("display")){var t=_SgmntfY_._getJq()(window),n=t.scrollTop(),a=n+t.height();e instanceof HTMLElement?e=_SgmntfY_._getJq()(e):e instanceof HTMLCollection&&(e=_SgmntfY_._getJq()(e[0]));var r=e.offset().top;return r+100<=a&&n<=r}return!1}catch(e){return!1}}function decodeHtml(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function checkSelectorAndRender(){var params=this.params,selectorCount=this.selectorCount,target=params.selector;if(target&&_SgmntfY_._getJq()(target).length){var renderIdx=0,reConf={title:notificationTitle,products:productList,index:function(){return++renderIdx},discount:function(){try{var e=this.price,t=this.oldPrice;if(!e||!t||e==t)return null;var n=100-100*e/t;return 0<n&&Math.round(n)}catch(e){return null}},commaFormatPrice:function(){return this.toFixed(2).toString().replace(/\./g,",")},dotFormatPrice:function(){return this.toFixed(2).toString()}};try{if(params.preJsCode){eval(params.preJsCode);var retVal=preRenderConf(reConf);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation pre js code: "+e)}reConf.brandingEnabled&&(reConf.title+='<a target="_blank" class="seg-rec-logo" href="//www.segmentify.com">Recommended by <img src="//cdn.segmentify.com/images/sgm-logo.svg" /></a>');var renderedHtml=_SgmntfY_._getMustache().render(params.recommendationTemplate,reConf);try{var targetElement=_SgmntfY_._getJq()(target).first();if("SELF"===params.insertType)targetElement.html(renderedHtml),wvCB&&wvCB(targetElement);else{var $div=_SgmntfY_._getJq()("<div/>",{class:"seg-reco-wrapper seg-clear"});"AFTER"===params.insertType||"BEFORE"===params.insertType?"AFTER"===params.insertType?$div.html(renderedHtml).insertAfter(targetElement):$div.html(renderedHtml).insertBefore(targetElement):"APPEND"!==params.insertType&&"PREPEND"!==params.insertType||("APPEND"===params.insertType?$div.html(renderedHtml).appendTo(targetElement):$div.html(renderedHtml).prependTo(targetElement)),wvCB&&wvCB($div)}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in filling target element["+target+"] with product recommendations: "+e)}try{params.postJsCode&&eval(params.postJsCode)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation post js code: "+e)}}else if(_SgmntfY_.LOG_MESSAGE("WARN","Error in finding target element["+target+"], element does not exist"),selectorCount<_SgmntfY_._variables.constants.recommendationSelectorFindLimit){++this.selectorCount;var binded=checkSelectorAndRender.bind(this);setTimeout(binded,100)}}var productList=[],recommendedProducts=params.recommendedProducts||{},dynamicItems=JSON.parse(params.dynamicItems)||[];if("SHUFFLE"===params.ordering){function allNull(e){for(var t in e)if(e.hasOwnProperty(t)&&(void 0!==e[t]||null!==e[t]))return!1;return!0}function arrayRandom(){return parseInt(100*Math.random())}function randomInt(e,t){return Math.floor(Math.random()*(t-e))+e}var itemCounts=[],dynamicLengths=[];for(var idx in dynamicItems)if(dynamicItems.hasOwnProperty(idx)){itemCounts.push(parseInt(dynamicItems[idx].itemCount||0));var source=dynamicItemKey(dynamicItems[idx]);recommendedProducts.hasOwnProperty(source)?dynamicLengths.push(recommendedProducts[source].length):dynamicLengths.push(0)}var firstLevel=[],firstLevelTotal=itemCounts.reduce(function(e,t){return e+t},0);for(idx in itemCounts)if(itemCounts.hasOwnProperty(idx)){var _idx=parseInt(idx);if(_idx===itemCounts.length-1)firstLevel.push(100);else{var pct=parseInt(itemCounts[idx]/firstLevelTotal*100);0===_idx?firstLevel.push(pct):firstLevel.push(firstLevel[firstLevel.length-1]+pct)}}var secondLevel=[];for(var dl in dynamicLengths)if(dynamicLengths.hasOwnProperty(dl)){for(var len=dynamicLengths[dl],sumOfSquares=len*(len+1)*(2*len+1)/6,tmpArr=[],l=len;0<l;--l)1===l?tmpArr.push(100):(pct=parseInt(Math.pow(l,2)/sumOfSquares*100),l===len?tmpArr.push(pct):tmpArr.push(tmpArr[tmpArr.length-1]+pct));secondLevel.push(tmpArr)}for(var dynamicProducts=[],iteration=0;!(1e4<++iteration||dynamicProducts.length>=firstLevelTotal);){var allNullCheck=!0;for(idx in dynamicItems)if(dynamicItems.hasOwnProperty(idx)){source=dynamicItemKey(dynamicItems[idx]);var tmpCheck=!0;if(recommendedProducts.hasOwnProperty(source)&&(tmpCheck=allNull(recommendedProducts[source])),!tmpCheck){allNullCheck=!1;break}}if(allNullCheck)break;var rand=arrayRandom(),firstLevelIndex=-1;for(var fl in firstLevel)if(firstLevel.hasOwnProperty(fl)&&rand<firstLevel[fl]){firstLevelIndex=parseInt(fl);break}if(-1!==firstLevelIndex&&dynamicItems.hasOwnProperty(firstLevelIndex.toString())){source=dynamicItemKey(dynamicItems[firstLevelIndex]),rand=arrayRandom();var secondLevelIndex=-1;for(var sl in secondLevel[firstLevelIndex])if(secondLevel[firstLevelIndex].hasOwnProperty(sl)&&rand<secondLevel[firstLevelIndex][sl]){secondLevelIndex=parseInt(sl);break}if(-1!==secondLevelIndex&&recommendedProducts[source].hasOwnProperty(secondLevelIndex.toString())){var candidate=recommendedProducts[source].splice(secondLevelIndex,1)[0];if(null!=candidate){recommendedProducts[source].splice(secondLevelIndex,0,null);var eliminationFuncRetVal=!1;if(params.eliminationFunction){var func=_SgmntfY_._getObjectByString(window,params.eliminationFunction);if("function"==typeof func)try{eliminationFuncRetVal=func.call(null,candidate)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation elimination js function: "+e)}}if(!eliminationFuncRetVal){candidate.name=decodeHtml(candidate.name);var sourceLastVisited="RECOMMENDATION_SOURCE_LAST_VISITED"===dynamicItems[firstLevelIndex].recommendationSource||"RECOMMENDATION_EVENT_DATA"===dynamicItems[firstLevelIndex].recommendationSource;switch(params.elimination){case"ELIMINATE_DUPLICATES":case"ELIMINATE_PREVIOUS":checkProductInList(productList,candidate.productId)||!sourceLastVisited&&_SgmntfY_._containsRecommendedProduct(candidate.productId)&&!_SgmntfY_._variables.offerRecommendedProducts||(productList.push(candidate),dynamicProducts.push(candidate),sourceLastVisited||_SgmntfY_._addRecommendedProduct(candidate.productId));break;case"NO_ELIMINATION":default:productList.push(candidate),dynamicProducts.push(candidate),sourceLastVisited||_SgmntfY_._addRecommendedProduct(candidate.productId)}}}}}}for(var i=0;i<recommendedProducts.RECOMMENDATION_SOURCE_STATIC_ITEMS.length;++i){var elm=recommendedProducts.RECOMMENDATION_SOURCE_STATIC_ITEMS[i];checkProductInList(productList,elm.productId)||productList.splice(randomInt(0,productList.length),0,elm)}}else{for(var missingCount=0,i=0;i<recommendedProducts.RECOMMENDATION_SOURCE_STATIC_ITEMS.length;++i){var elm=recommendedProducts.RECOMMENDATION_SOURCE_STATIC_ITEMS[i];checkProductInList(productList,elm.productId)||productList.push(elm)}for(var ri=0;ri<dynamicItems.length;++ri){var curRecommendationSource=dynamicItemKey(dynamicItems[ri]),curCatItemCount=parseInt(checkDynamicItemCount(dynamicItems,curRecommendationSource));if(isNaN(curCatItemCount)&&(curCatItemCount=0),recommendedProducts.hasOwnProperty(curRecommendationSource)&&curCatItemCount){missingCount+=curCatItemCount;for(var index=0,i=0;i<recommendedProducts[curRecommendationSource].length;++i){var elm=recommendedProducts[curRecommendationSource][i];if(elm.name=decodeHtml(elm.name),curCatItemCount<=index&&0===missingCount)break;var eliminationFnRetVal=!1;if(params.eliminationFunction){var fx=_SgmntfY_._getObjectByString(window,params.eliminationFunction);if("function"==typeof fx)try{eliminationFnRetVal=fx.call(null,elm)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation elimination js function: "+e)}}if(!eliminationFnRetVal){var sourceLastVisited="RECOMMENDATION_SOURCE_LAST_VISITED"===dynamicItems[ri].recommendationSource||"RECOMMENDATION_EVENT_DATA"===dynamicItems[ri].recommendationSource;switch(params.elimination){case"ELIMINATE_DUPLICATES":case"ELIMINATE_PREVIOUS":checkProductInList(productList,elm.productId)||!sourceLastVisited&&_SgmntfY_._containsRecommendedProduct(elm.productId)&&!_SgmntfY_._variables.offerRecommendedProducts||(productList.push(elm),sourceLastVisited||_SgmntfY_._addRecommendedProduct(elm.productId),++index,--missingCount);break;case"NO_ELIMINATION":default:productList.push(elm),sourceLastVisited||_SgmntfY_._addRecommendedProduct(elm.productId),++index,--missingCount}}}}}}var notificationTitleMap=JSON.parse(params.notificationTitleMap||"{}"),notificationTitle=notificationTitleMap[request.data.lang]||params.notificationTitle;if(0!==productList.length){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",interactionId:params.actionId,instanceId:params.instanceId});var wvInteractionId=params.interactionId,wvInstanceId=params.instanceId,wvCB=function(e){var t=!1;if(!t&&isElemVisible(e))_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:wvInteractionId,instanceId:wvInstanceId}),t=!0;else if(!t)var n=setInterval(function(){!t&&isElemVisible(e)&&(_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:wvInteractionId,instanceId:wvInstanceId}),t=!0,window.clearInterval(n))},100)};switch(params.actionType){case"CALLBACK":request.recommendationCallback&&request.recommendationCallback(notificationTitle,productList,previousMetadata,wvCB);break;case"INPAGE_WIDGET":var binded_context=checkSelectorAndRender.bind({params:params,selectorCount:1});binded_context();break;case"JAVASCRIPT_FUNCTION":var fx=_SgmntfY_._getObjectByString(window,params.jsFunction);if("function"==typeof fx)try{fx.call(null,notificationTitle,productList,previousMetadata,wvCB)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation js function: "+e)}else _SgmntfY_.LOG_MESSAGE("WARN","Product Recommendation javascript function("+params.jsFunction+") does not exist");break;case"POPUP_RECO":var config={title:params.notificationTitle,vertical:params.verticalPosition,horizontal:params.horizontalPosition};if(productList.length<3)return;config.products=productList;try{if(params.preJsCode){eval(params.preJsCode);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var _products=[],_productId="";request.originalParams&&request.originalParams.params&&(_productId=request.originalParams.params.productId||"");for(var i=0;i<config.products.length&&3!==_products.length;++i){var _product=config.products[i];_product.productId!==_productId&&_products.push(_product)}if(3!==_products.length)return;config.products=_products;var renderedHtml=_SgmntfY_._getMustache().render(params.recommendationTemplate,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),params.cssCode&&_SgmntfY_._getJq()("<style />").html(params.cssCode).prependTo(_SgmntfY_._getJq()("body"));try{params.postJsCode&&eval(params.postJsCode)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}"true"===params.overlay&&_SgmntfY_._getJq()(".seg-popup-overlay").show(),_SgmntfY_._getJq()(".seg-popup-close").bind("click",function(){var e=_SgmntfY_._getJq()(this);e.parent(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3)}),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:params.interactionId,instanceId:params.instanceId})}}else"CALLBACK"===params.actionType&&request.recommendationCallback&&request.recommendationCallback(notificationTitle,[],previousMetadata,null)},recommendPromotion:function(params,request){var metadata={title:params.notificationTitle};function checkDynamicItemCount(e,t){for(var n=0;n<e.length;++n)if(e[n].recommendationSource+"|"+e[n].timeFrame===t)return e[n].itemCount;return null}function checkPromotionInList(e,t){for(var n=0;n<e.length;n++)if(e[n].code===t)return!0;return!1}function isElemVisible(e){try{if(_SgmntfY_._exists(e)){var t=_SgmntfY_._getJq()(window),n=t.scrollTop(),a=n+t.height();e instanceof HTMLElement?e=_SgmntfY_._getJq()(e):e instanceof HTMLCollection&&(e=_SgmntfY_._getJq()(e[0]));var r=e.offset().top;return r+100<=a&&n<=r}return!1}catch(e){return!1}}function decodeHtml(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function checkSelectorAndRender(){var params=this.params,selectorCount=this.selectorCount,target=params.selector;if(target&&_SgmntfY_._getJq()(target).length){var renderIdx=0,reConf={title:params.notificationTitle,promotionList:promotionList,index:function(){return++renderIdx}};try{if(params.preJsCode){eval(params.preJsCode);var retVal=preRenderConf(reConf);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing promotion recommendation pre js code: "+e)}reConf.brandingEnabled&&(reConf.title+='<a target="_blank" class="seg-rec-logo" href="//www.segmentify.com">Recommended by <img src="//cdn.segmentify.com/images/sgm-logo.svg" /></a>');var renderedHtml=_SgmntfY_._getMustache().render(params.recommendationTemplate,reConf);try{var targetElement=_SgmntfY_._getJq()(target).first();if("SELF"===params.insertType)targetElement.addClass("seg-promotion-wrapper").html(renderedHtml),wvCB&&wvCB(targetElement);else{var $div=_SgmntfY_._getJq()("<div/>",{class:"seg-promotion-wrapper"});"AFTER"===params.insertType||"BEFORE"===params.insertType?"AFTER"===params.insertType?$div.html(renderedHtml).insertAfter(targetElement):$div.html(renderedHtml).insertBefore(targetElement):"APPEND"!==params.insertType&&"PREPEND"!==params.insertType||("APPEND"===params.insertType?$div.html(renderedHtml).appendTo(targetElement):$div.html(renderedHtml).prependTo(targetElement)),wvCB&&wvCB($div)}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in filling target element["+target+"] with promotion recommendations: "+e)}try{params.postJsCode&&eval(params.postJsCode)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing promotion recommendation post js code: "+e)}}else if(_SgmntfY_.LOG_MESSAGE("WARN","Error in finding target element["+target+"], element does not exist"),selectorCount<_SgmntfY_._variables.constants.recommendationSelectorFindLimit){++this.selectorCount;var binded=checkSelectorAndRender.bind(this);setTimeout(binded,100)}}for(var promotionList=[],recommendedPromotions=params.recommendedPromotions||{},dynamicItems=JSON.parse(params.dynamicItems)||[],i=0;i<recommendedPromotions.RECOMMENDATION_SOURCE_STATIC_ITEMS.length;++i){var elm=recommendedPromotions.RECOMMENDATION_SOURCE_STATIC_ITEMS[i];checkPromotionInList(promotionList,elm.code)||promotionList.push(elm)}for(var missingCount=0,ri=0;ri<dynamicItems.length;++ri){void 0===dynamicItems[ri].timeFrame&&(dynamicItems[ri].timeFrame="null");var curRecommendationSource=dynamicItems[ri].recommendationSource+"|"+dynamicItems[ri].timeFrame,curCatItemCount=parseInt(checkDynamicItemCount(dynamicItems,curRecommendationSource));if(isNaN(curCatItemCount)&&(curCatItemCount=0),recommendedPromotions.hasOwnProperty(curRecommendationSource)&&curCatItemCount){missingCount+=curCatItemCount;for(var index=0,i=0;i<recommendedPromotions[curRecommendationSource].length;++i){var elm=recommendedPromotions[curRecommendationSource][i];if(elm.name=decodeHtml(elm.name),curCatItemCount<=index&&0==missingCount)break;var eliminationFnRetVal=!1;if(params.eliminationFunction){var fx=_SgmntfY_._getObjectByString(window,params.eliminationFunction);if("function"==typeof fx)try{eliminationFnRetVal=fx.call(null,elm)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing promotion recommendation elimination js function: "+e)}}if(!eliminationFnRetVal)switch(params.elimination){case"ELIMINATE_DUPLICATES":case"ELIMINATE_PREVIOUS":checkPromotionInList(promotionList,elm.code)||_SgmntfY_._containsRecommendedPromotion(elm.code)&&!_SgmntfY_._variables.offerRecommendedPromotions||(promotionList.push(elm),_SgmntfY_._addRecommendedPromotion(elm.code),++index,--missingCount);break;case"NO_ELIMINATION":default:promotionList.push(elm),_SgmntfY_._addRecommendedPromotion(elm.code),++index,--missingCount}}}}if(0!==promotionList.length){"SHUFFLE"===params.ordering&&(promotionList=_SgmntfY_._shuffle(promotionList)),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",interactionId:params.actionId,instanceId:params.instanceId});var wvInteractionId=params.interactionId,wvInstanceId=params.instanceId,wvCB=function(e){var t=!1;if(!t&&isElemVisible(e))_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:wvInteractionId,instanceId:wvInstanceId}),t=!0;else if(!t)var n=setInterval(function(){!t&&isElemVisible(e)&&(_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:wvInteractionId,instanceId:wvInstanceId}),t=!0,window.clearInterval(n))},100)};switch(params.actionType){case"CALLBACK":request.recommendationCallback&&request.recommendationCallback(promotionList,metadata,wvCB);break;case"INPAGE_WIDGET":var binded_context=checkSelectorAndRender.bind({params:params,selectorCount:1});binded_context()}}else"CALLBACK"===params.actionType&&request.recommendationCallback&&request.recommendationCallback([],metadata,null)},recommendKeyword:function(params,request){var metadata={title:params.notificationTitle};function checkDynamicItemCount(e,t){for(var n=0;n<e.length;++n)if(e[n].recommendationSource+"|"+e[n].timeFrame==t)return e[n].itemCount;return null}function checkKeywordInList(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}function isElemVisible(e){try{if(_SgmntfY_._exists(e)){var t=_SgmntfY_._getJq()(window),n=t.scrollTop(),a=n+t.height();e instanceof HTMLElement?e=_SgmntfY_._getJq()(e):e instanceof HTMLCollection&&(e=_SgmntfY_._getJq()(e[0]));var r=e.offset().top;return r+100<=a&&n<=r}return!1}catch(e){return!1}}function decodeHtml(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function checkSelectorAndRender(){var params=this.params,keywordList=this.keywordList,selectorCount=this.selectorCount,target=params.selector;if(target&&_SgmntfY_._getJq()(target).length){for(var keywords=[],k=0;k<keywordList.length;++k)keywords.push({name:keywordList[k],url:""});var recoTitle=params.notificationTitle,renderIdx=0,reConf={title:recoTitle,keywords:keywords,index:function(){return++renderIdx}};try{if(params.preJsCode){eval(params.preJsCode);var retVal=preRenderConf(reConf);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation pre js code: "+e)}var renderedHtml=_SgmntfY_._getMustache().render(params.recommendationTemplate,reConf);try{var targetElement=_SgmntfY_._getJq()(target).first();if("SELF"===params.insertType)targetElement.html(renderedHtml),wvCB&&wvCB(targetElement);else{var $div=_SgmntfY_._getJq()("<div/>",{class:"seg-reco-wrapper seg-clear"});"AFTER"===params.insertType||"BEFORE"===params.insertType?"AFTER"===params.insertType?$div.html(renderedHtml).insertAfter(targetElement):$div.html(renderedHtml).insertBefore(targetElement):"APPEND"!==params.insertType&&"PREPEND"!==params.insertType||("APPEND"===params.insertType?$div.html(renderedHtml).appendTo(targetElement):$div.html(renderedHtml).prependTo(targetElement)),wvCB&&wvCB($div)}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in filling target element["+target+"] with product recommendations: "+e)}try{params.postJsCode&&eval(params.postJsCode)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing product recommendation post js code: "+e)}_SgmntfY_._getJq()(".seg-label a").on("click",function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",interactionId:params.actionId,instanceId:params.instanceId})})}else if(_SgmntfY_.LOG_MESSAGE("WARN","Error in finding target element["+target+"], element does not exist"),selectorCount<_SgmntfY_._variables.constants.recommendationSelectorFindLimit){++this.selectorCount;var binded=checkSelectorAndRender.bind(this);setTimeout(binded,100)}}for(var keywordList=[],recommendedKeywords=params.recommendedKeywords||{},dynamicItems=JSON.parse(params.dynamicItems)||[],i=0;i<recommendedKeywords.RECOMMENDATION_SOURCE_STATIC_ITEMS.length;++i){var elm=recommendedKeywords.RECOMMENDATION_SOURCE_STATIC_ITEMS[i];checkKeywordInList(keywordList,elm)||keywordList.push(elm)}for(var missingCount=0,ri=0;ri<dynamicItems.length;++ri){void 0===dynamicItems[ri].timeFrame&&(dynamicItems[ri].timeFrame="null");var curRecommendationSource=dynamicItems[ri].recommendationSource+"|"+dynamicItems[ri].timeFrame,curCatItemCount=parseInt(checkDynamicItemCount(dynamicItems,curRecommendationSource));if(isNaN(curCatItemCount)&&(curCatItemCount=0),recommendedKeywords.hasOwnProperty(curRecommendationSource)&&curCatItemCount){missingCount+=curCatItemCount;for(var index=0,i=0;i<recommendedKeywords[curRecommendationSource].length;++i){var elm=recommendedKeywords[curRecommendationSource][i];if(elm.name=decodeHtml(elm.name),curCatItemCount<=index&&0==missingCount)break;keywordList.push(elm),++index,--missingCount}}}if(0!==keywordList.length){"SHUFFLE"===params.ordering&&(keywordList=_SgmntfY_._shuffle(keywordList)),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",interactionId:params.actionId,instanceId:params.instanceId});var wvInteractionId=params.interactionId,wvInstanceId=params.instanceId,wvCB=function(e){var t=!1;if(!t&&isElemVisible(e))_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:wvInteractionId,instanceId:wvInstanceId}),t=!0;else if(!t)var n=setInterval(function(){!t&&isElemVisible(e)&&(_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",interactionId:wvInteractionId,instanceId:wvInstanceId}),t=!0,window.clearInterval(n))},100)};switch(params.actionType){case"CALLBACK":request.recommendationCallback&&request.recommendationCallback(keywordList,metadata,wvCB);break;case"INPAGE_WIDGET":var binded_context=checkSelectorAndRender.bind({params:params,keywordList:keywordList,selectorCount:1});binded_context()}}else request.recommendationCallback&&request.recommendationCallback([],metadata,null)},webNotification:function(e){},redirectUrl:function(e){_SgmntfY_.LOG_MESSAGE("DEBUG","Redirecting action to url: "+e.redirectUrl),window.location=e.redirectUrl},jsFunctionCall:function(e){e.actionType="JAVASCRIPT_FUNCTION",_SgmntfY_._actions.jsAction(e)},jsAction:function(params){var actionType=params.actionType;switch(actionType){case"JAVASCRIPT_EVENT":var event=params.event,parameters=[];try{params.parameters&&(parameters=JSON.parse(params.parameters))}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Js Action (Event Trigger) - Cannot parse parameters json, str: "+params.parameters),parameters=[]}parameters.push(function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"js_success",interactionId:params.actionId,instanceId:params.instanceId})}),parameters.push(function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"js_reject",interactionId:params.actionId,instanceId:params.instanceId})}),_SgmntfY_._getJq()(document).trigger(event,parameters),_SgmntfY_.LOG_MESSAGE("DEBUG","Js Action (Event Trigger) - Triggered Event: "+event);break;case"JAVASCRIPT_CODE":try{eval(params.javascriptCode),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"js_success",interactionId:params.actionId,instanceId:params.instanceId}),_SgmntfY_.LOG_MESSAGE("DEBUG","Js Action (Execute Code) successfully executed")}catch(e){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"js_reject",interactionId:params.actionId,instanceId:params.instanceId}),_SgmntfY_.LOG_MESSAGE("WARN","Error in JS Action (Execute Code): "+e)}break;case"JAVASCRIPT_FUNCTION":default:var fx=window[params.function],parameters=[];if("function"==typeof fx){try{params.parameters&&(parameters=JSON.parse(params.parameters))}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Js Action (Function Call) - Cannot parse parameters json, str: "+params.parameters),parameters=[]}parameters.push(function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"js_success",interactionId:params.actionId,instanceId:params.instanceId})}),parameters.push(function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"js_reject",interactionId:params.actionId,instanceId:params.instanceId})}),fx.apply(null,parameters),_SgmntfY_.LOG_MESSAGE("DEBUG","Js Action (Function Call) successfully run for function: "+params.function)}else _SgmntfY_.LOG_MESSAGE("WARN","Js Action (Function Call) failed, non existing function: "+params.function)}},jsCountdownTimer:function(e){var t=e.timeout;_SgmntfY_.LOG_MESSAGE("DEBUG","Starting countdown timer with "+1e3*(t||0)+" second(s)"),setTimeout(function(){_SgmntfY_.LOG_MESSAGE("DEBUG","Countdown timer finished after "+1e3*(t||0)+" second(s)"),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"timeout",interactionId:e.actionId,instanceId:e.instanceId})},1e3*(t||0))},sendBannerDetails:function(e,t){var n=t.originalParams;n.group=e.group;var a=[],r=_SgmntfY_._functions.bannerGroupDetail(n);r&&a.push(r),_SgmntfY_._sendRequestToServer(a)}},_campaigns:{NEWSLETTER:function(campaign,request){var config={title:campaign.title,description:campaign.description,placeholder:campaign.placeholder,termsUrl:campaign.termsUrl,termsText:campaign.termsText,buttonSubmitText:campaign.buttonSubmitText,buttonThanksText:campaign.buttonThanksText,buttonBgColor:campaign.buttonBgColor,buttonTextColor:campaign.buttonTextColor,vertical:campaign.verticalPosition,horizontal:campaign.horizontalPosition};try{if(campaign.preJs){eval(campaign.preJs);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var renderedHtml=_SgmntfY_._getMustache().render(campaign.html,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),campaign.css&&_SgmntfY_._getJq()("<style />").html(campaign.css).prependTo(_SgmntfY_._getJq()("body"));try{campaign.postJs&&eval(campaign.postJs)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}_SgmntfY_.LOG_MESSAGE("DEBUG","Newsletter popup appended to html body for campaign("+campaign.instanceId+")"),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),_SgmntfY_._getJq()(".seg-popup-close").bind("click",function(){var e=_SgmntfY_._getJq()(this);e.parent(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove()},1e3)}),_SgmntfY_._getJq()(".seg-form-submit").bind("click",function(e){_SgmntfY_._getJq()(".seg-form-input").removeClass("seg-form-invalid"),_SgmntfY_._getJq()(".seg-email-collection .seg-checkbox").removeClass("seg-form-invalid"),e.preventDefault();var t=_SgmntfY_._getJq()(".seg-form-input"),n=_SgmntfY_._getJq()('.seg-email-collection .seg-form-footer input[type="checkbox"]');if(isEmail(t.val())&&1==n.is(":checked")){_SgmntfY_._getJq()(this).addClass("seg-sending"),_SgmntfY_._getJq()(this).css({"pointer-events":"none"}),setTimeout(function(){_SgmntfY_._getJq()(".seg-email-collection").addClass("seg-popup-thanks").removeClass("segFadeInUp")},1300),setTimeout(function(){_SgmntfY_._getJq()(".seg-email-collection").addClass("segFadeOutDown")},3e3),setTimeout(function(){_SgmntfY_._getJq()(".seg-email-collection").remove()},6e3);var a=_SgmntfY_._getJq()("#seg-email-collection");0<a.length&&(_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"submit",interactionId:campaign.name,instanceId:campaign.instanceId}),_SgmntfY_._variables.segmentifyObj("user:form",{formName:campaign.name,fields:a.sgmSerializeForm()}))}isEmail(t.val())||t.addClass("seg-form-invalid"),0==n.is(":checked")&&_SgmntfY_._getJq()(".seg-terms .seg-checkbox").addClass("seg-form-invalid")});var isEmail=function(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}},FORM:function(campaign,request){for(var config={title:campaign.title,description:campaign.description,buttonSubmitText:campaign.buttonSubmitText,vertical:campaign.verticalPosition,horizontal:campaign.horizontalPosition},fields=campaign.fields||[],i=0;i<fields.length;++i){var field=fields[i];config["ff"+i+"_required"]=field.required,"INPUT"===field.type?(config["ff"+i+"_name"]=field.name,config["ff"+i+"_placeholder"]=field.placeholder,config["ff"+i+"_inputType"]=field.inputType,field.name?config["ff"+i+"_fieldName"]=field.name:config["ff"+i+"_fieldName"]="input-"+i):"TEXT_AREA"===field.type?(config["ff"+i+"_name"]=field.name,config["ff"+i+"_placeholder"]=field.placeholder,field.name?config["ff"+i+"_fieldName"]=field.name:config["ff"+i+"_fieldName"]="textarea-"+i):"CHECKBOX"!==field.type&&"RADIO_BUTTON"!==field.type||(config["ff"+i+"_groupTitle"]=field.groupTitle,config["ff"+i+"_options"]=field.options,field.groupTitle?config["ff"+i+"_fieldName"]=field.groupTitle:"CHECKBOX"===field.type?config["ff"+i+"_fieldName"]="checkbox-"+i:config["ff"+i+"_fieldName"]="radiobutton-"+i)}try{if(campaign.preJs){eval(campaign.preJs);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var renderedHtml=_SgmntfY_._getMustache().render(campaign.html,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),campaign.css&&_SgmntfY_._getJq()("<style />").html(campaign.css).prependTo(_SgmntfY_._getJq()("body"));try{campaign.postJs&&eval(campaign.postJs)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}_SgmntfY_.LOG_MESSAGE("DEBUG","Form popup appended to html body for campaign("+campaign.instanceId+")"),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),_SgmntfY_._getJq()(".seg-form-survey").each(function(){var e=_SgmntfY_._getJq()(this);-1===e.attr("class").indexOf("cmp_")&&e.addClass(campaign.instanceId)}),"true"===campaign.overlay&&_SgmntfY_._getJq()(".seg-popup-overlay").show(),_SgmntfY_._getJq()("."+campaign.instanceId+" .seg-popup-close").bind("click",function(){var e=_SgmntfY_._getJq()(this);e.parent(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3)}),_SgmntfY_._getJq()("."+campaign.instanceId+" .seg-form-submit").bind("click",function(e){e.preventDefault();var t=_SgmntfY_._getJq()(this),n=_SgmntfY_._getJq()("."+campaign.instanceId+".seg-form-survey"),a=n.find(".seg-form");checkValidity(a)&&(t.addClass("seg-sending"),t.css({"pointer-events":"none"}),setTimeout(function(){n.addClass("seg-popup-thanks").removeClass("segFadeInUp")},1300),setTimeout(function(){n.addClass("segFadeOutDown")},3e3),setTimeout(function(){n.remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},6e3),0<a.length&&(_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"submit",interactionId:campaign.name,instanceId:campaign.instanceId}),_SgmntfY_._variables.segmentifyObj("user:form",{formName:campaign.name,fields:a.sgmSerializeForm()})))});var checkValidity=function(e){try{e.find(".seg-form-invalid").removeClass("seg-form-invalid");for(var t=e.find("input,textarea"),n=!0,a=0;a<t.length;++a){var r=t[a],i=_SgmntfY_._getJq()(r);"checkbox"!==i.attr("type")&&(r.checkValidity()||("radio"===i.attr("type")?i.parent().addClass("seg-form-invalid"):i.addClass("seg-form-invalid"),n=!1))}var s=e.find('input[type="checkbox"]'),o=[];s.each(function(){-1==o.indexOf(this.name)&&o.push(this.name)});for(var c=0;c<o.length;++c)0<e.find('input[name="'+o[c]+'"]:required').length&&0==e.find('input[name="'+o[c]+'"]:checked').length&&(e.find('input[name="'+o[c]+'"]').parent().addClass("seg-form-invalid"),n=!1);return n}catch(e){return!0}}},POPUP_BANNER:function(campaign,request){var config={title:campaign.title,image:campaign.image,url:campaign.url,vertical:campaign.verticalPosition,horizontal:campaign.horizontalPosition};try{if(campaign.preJs){eval(campaign.preJs);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var renderedHtml=_SgmntfY_._getMustache().render(campaign.html,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),campaign.css&&_SgmntfY_._getJq()("<style />").html(campaign.css).prependTo(_SgmntfY_._getJq()("body"));try{campaign.postJs&&eval(campaign.postJs)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}"true"===campaign.overlay&&_SgmntfY_._getJq()(".seg-popup-overlay").show(),_SgmntfY_._getJq()(".seg-popup-close").bind("click",function(){var e=_SgmntfY_._getJq()(this);e.parent(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"close",instanceId:campaign.instanceId,interactionId:campaign.instanceId})}),_SgmntfY_._getJq()(".seg-banner-container img").bind("click",function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",instanceId:campaign.instanceId,interactionId:campaign.instanceId})}),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:campaign.instanceId,interactionId:campaign.instanceId})},POPUP_RECOMMENDATION:function(campaign,request){for(var config={title:campaign.title,vertical:campaign.verticalPosition,horizontal:campaign.horizontalPosition},productsList=campaign.productsList||[],products=[],i=0;i<productsList.length;++i)for(var j=0;j<productsList[i].length;++j)products.push(productsList[i][j]);if(!(products.length<3)){"SHUFFLE"===campaign.ordering&&(products=_SgmntfY_._shuffle(products)),config.products=products;try{if(campaign.preJs){eval(campaign.preJs);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var _products=[],_productId="";request.originalParams&&request.originalParams.params&&(_productId=request.originalParams.params.productId||"");for(var i=0;i<config.products.length&&3!==_products.length;++i){var _product=config.products[i];_product.productId!==_productId&&_products.push(_product)}if(3===_products.length){config.products=_products;var renderedHtml=_SgmntfY_._getMustache().render(campaign.html,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),campaign.css&&_SgmntfY_._getJq()("<style />").html(campaign.css).prependTo(_SgmntfY_._getJq()("body"));try{campaign.postJs&&eval(campaign.postJs)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}"true"===campaign.overlay&&_SgmntfY_._getJq()(".seg-popup-overlay").show(),_SgmntfY_._getJq()(".seg-popup-close").bind("click",function(){var e=_SgmntfY_._getJq()(this);e.parent(".seg-popup").removeClass("segFadeInUp").addClass("segFadeOutDown"),window.setTimeout(function(){e.parent(".seg-popup").remove(),_SgmntfY_._getJq()(".seg-popup-overlay").remove()},1e3),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"close",instanceId:campaign.instanceId,interactionId:campaign.instanceId})}),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"widget-view",instanceId:campaign.instanceId,interactionId:campaign.instanceId})}}},NOTIFICATION_BAR:function(campaign,request){var config={title:campaign.title,image:campaign.image,bgColor:campaign.bgColor,textColor:campaign.textColor,url:campaign.url,instanceId:campaign.instanceId,divClass:"sgf-notif-bar-"+(campaign.verticalPosition||"top")};try{if(campaign.preJs){eval(campaign.preJs);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var renderedHtml=_SgmntfY_._getMustache().render(campaign.html,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),campaign.css&&_SgmntfY_._getJq()("<style />").html(campaign.css).prependTo(_SgmntfY_._getJq()("body"));try{campaign.postJs&&eval(campaign.postJs)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}_SgmntfY_.LOG_MESSAGE("DEBUG","Notification Bar appended to html body for campaign("+campaign.instanceId+")"),"true"===campaign.sticky&&(_SgmntfY_._getJq()(".seg-notification-bar").addClass("seg-notification-bar-sticky"),_SgmntfY_._getJq()(".seg-notification-bar-sticky:not([data-loaded])").each(function(){var e=_SgmntfY_._getJq()(this);if(e.attr("data-loaded","true"),e.find("img").length){var t=e.find("img:first"),n=t.attr("src")||t.attr("data-src");t.on("load",function(){var e=_SgmntfY_._getJq()(this).parents(".seg-notification-bar:first"),t=parseInt(_SgmntfY_._getJq()("body").css("padding-top").replace("px","")),n=parseInt(_SgmntfY_._getJq()("body").css("padding-bottom").replace("px",""));e.hasClass("sgf-notif-bar-top")?t+=e.height():e.hasClass("sgf-notif-bar-bottom")&&(n+=e.height()),_SgmntfY_._getJq()("body").css("padding-top",t).css("padding-bottom",n)}),t[0].src=n}})),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),_SgmntfY_._getJq()(".seg-notification-bar-v2-"+campaign.instanceId).length?_SgmntfY_._getJq()(".seg-notification-bar-v2-"+campaign.instanceId).bind("click",function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",instanceId:campaign.instanceId,interactionId:campaign.instanceId})}):_SgmntfY_._getJq()(".sgf-link").bind("click",function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",instanceId:campaign.instanceId,interactionId:campaign.instanceId})})},PUSH_PERMISSION:function(campaign,request){var config={title:campaign.title,text:campaign.text,icon:campaign.icon,buttonLaterText:campaign.buttonLaterText,buttonAllowText:campaign.buttonAllowText},pushFadeUp=function(e){_SgmntfY_._getJq()(".seg-popup-push").addClass("seg-fade-up"),window.setTimeout(function(){_SgmntfY_._getJq()(".seg-popup-push").remove()},e)};try{if(campaign.preJs){eval(campaign.preJs);var retVal=preRenderConf(config);if(void 0!==retVal&&!retVal)return void _SgmntfY_.LOG_MESSAGE("WARN","preRenderConf returned false exiting!")}}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign pre js code: "+e)}var renderedHtml=_SgmntfY_._getMustache().render(campaign.html,config);_SgmntfY_._getJq()("body").prepend(renderedHtml),campaign.css&&_SgmntfY_._getJq()("<style />").html(campaign.css).prependTo(_SgmntfY_._getJq()("body"));try{campaign.postJs&&eval(campaign.postJs)}catch(e){_SgmntfY_.LOG_MESSAGE("WARN","Error in executing campaign post js code: "+e)}_SgmntfY_.LOG_MESSAGE("DEBUG","Push Permission appended to html body for campaign("+campaign.instanceId+")"),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"impression",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),_SgmntfY_._getJq()(".seg-popup-push-bttn-later").click(function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"later",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),pushFadeUp(500)}),_SgmntfY_._getJq()(".seg-popup-push-bttn-allow").click(function(){_SgmntfY_._variables.segmentifyObj("event:interaction",{type:"click",instanceId:campaign.instanceId,interactionId:campaign.instanceId}),pushFadeUp(500);var e=_SgmntfY_._variables.apiKey,t=_SgmntfY_._getUserId(),n=campaign.instanceId||"";if(e&&t){var a=(campaign.url||"https://"+e.split("-").join("")+".app.segmentify.com/push/ecommerce.en.html")+"?apiKey="+e+"&userId="+t+"&instanceId="+n;campaign.dataCenterNo&&(a+="&dcn="+campaign.dataCenterNo),window.open(a,"Push Permission","width=600,height=350")}})}},_functions:{getFunction:function(t){switch(t.toLowerCase()){case"apikey":return _SgmntfY_._functions.setApiKey;case"loglevel":return _SgmntfY_._functions.setLogLevel;case"variables":return _SgmntfY_._functions.setVariables;case"userid":return _SgmntfY_._functions.setUserId;case"view:page":return _SgmntfY_._functions.pageView;case"view:product":return _SgmntfY_._functions.productView;case"basket:add":return _SgmntfY_._functions.addToBasket;case"basket:remove":return _SgmntfY_._functions.removeFromBasket;case"basket:clear":return _SgmntfY_._functions.clearBasket;case"checkout:basket":return _SgmntfY_._functions.checkoutViewBasket;case"checkout:customer":return _SgmntfY_._functions.checkoutCustomerInfo;case"checkout:payment":return _SgmntfY_._functions.checkoutPaymentInfo;case"checkout:purchase":return _SgmntfY_._functions.checkoutPurchase;case"user:signin":return _SgmntfY_._functions.userSignIn;case"user:signout":return _SgmntfY_._functions.userSignOut;case"user:signup":return _SgmntfY_._functions.userSignUp;case"user:subscribe":return _SgmntfY_._functions.userSubscribe;case"user:unsubscribe":return _SgmntfY_._functions.userUnsubscribe;case"user:update":return _SgmntfY_._functions.userInfoUpdate;case"event:custom":return _SgmntfY_._functions.customEvent;case"event:interaction":return _SgmntfY_._functions.interaction;case"user:form":return _SgmntfY_._functions.userForm;case"banner:impression":return _SgmntfY_._functions.bannerImpression;case"banner:click":return _SgmntfY_._functions.bannerClick;case"banner:update":return _SgmntfY_._functions.bannerUpdate;case"bannergroup:view":return _SgmntfY_._functions.bannerGroupView;case"bannergroup:detail":return _SgmntfY_._functions.bannerGroupDetail;case"impression:promotion":return _SgmntfY_._functions.promotionImpression;case"view:promotion":return _SgmntfY_._functions.promotionView;case"push:interaction":return _SgmntfY_._functions.pushInteraction;default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected Command: "+t)}}},getDataLayerFunction:function(t,e){switch(t.toLowerCase()){case"page":return _SgmntfY_._functions.pageView;case"product":return _SgmntfY_._functions.productView;case"basket":switch(e.step.toLowerCase()){case"add":return _SgmntfY_._functions.addToBasket;case"remove":return _SgmntfY_._functions.removeFromBasket;case"clear":return _SgmntfY_._functions.clearBasket;default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected Basket Operations Step: "+e.step)}}case"checkout":switch(e.step.toLowerCase()){case"basket":return _SgmntfY_._functions.checkoutViewBasket;case"customer":return _SgmntfY_._functions.checkoutCustomerInfo;case"payment":return _SgmntfY_._functions.checkoutPaymentInfo;case"purchase":return _SgmntfY_._functions.checkoutPurchase;default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected Checkout Step: "+e.step)}}case"user":switch(e.step.toLowerCase()){case"signin":return _SgmntfY_._functions.userSignIn;case"signout":return _SgmntfY_._functions.userSignOut;case"signup":return _SgmntfY_._functions.userSignUp;case"subscribe":return _SgmntfY_._functions.userSubscribe;case"unsubscribe":return _SgmntfY_._functions.userUnsubscribe;case"update":return _SgmntfY_._functions.userInfoUpdate;default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected User Operations Step: "+e.step)}}case"interaction":return _SgmntfY_._functions.interaction;case"form":return _SgmntfY_._functions.userForm;case"banners":return _SgmntfY_._functions.bannerGroupView;case"banner":switch(e.type.toLowerCase()){case"impression":return _SgmntfY_._functions.bannerImpression;case"click":return _SgmntfY_._functions.bannerClick;case"update":return _SgmntfY_._functions.bannerUpdate;default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected Banner Operations Type: "+e.type)}}case"custom":return _SgmntfY_._functions.customEvent;case"promotion":switch(e.type.toLowerCase()){case"impression":return _SgmntfY_._functions.promotionImpression;case"view":return _SgmntfY_._functions.promotionView;default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected Promotion Type: "+e.type)}}default:return function(e){_SgmntfY_.LOG_MESSAGE("WARN","Unexpected Command: "+t)}}},callFunction:function(e){var t=[];e=e||[];for(var n=0;n<e.length;n++){var a=e[n],r=_SgmntfY_._functions.getFunction(a[0]),i=Array.prototype.slice.call(a,1);try{var s=r.apply(null,i);s&&(t=t.concat(s)),_SgmntfY_.LOG_MESSAGE("INFO","Event triggered: "+a[0])}catch(e){_SgmntfY_.LOG_MESSAGE("Error","Can't convert command("+a[0]+") into request data. Details: "+e)}}_SgmntfY_._sendRequestToServer(t)},setApiKey:function(e,t){if(_SgmntfY_._variables.apiKey=e,_SgmntfY_.LOG_MESSAGE("DEBUG","Api Key: "+e),t)_SgmntfY_.LOG_MESSAGE("INFO","Account specific style is disabled, skipping...");else{var n=_SgmntfY_._variables.segmentifyCDNUrl+e+"/segmentify.css";_SgmntfY_.LOG_MESSAGE("INFO","Loading account specific css file: "+n),_SgmntfY_._loadCSS(n)}_SgmntfY_._isNotEmpty(_SgmntfY_._variables.apiKey)&&(_SgmntfY_._consumeNextPageQueue(),_SgmntfY_._consumeRetryQueue())},setLogLevel:function(e){var t=_SgmntfY_.LOG_LEVELS[e];void 0!==t&&(_SgmntfY_._variables.logLevel=t,_SgmntfY_.LOG_MESSAGE("DEBUG","Segmentify Log Level Changed to: "+e))},setVariables:function(e){e=e||{},_SgmntfY_._extend(_SgmntfY_._variables,e),_SgmntfY_.LOG_MESSAGE("DEBUG","Segmentify Variables are updated - New Values: "+e)},setUserId:function(e){var t=_SgmntfY_._getUserId();if(_SgmntfY_._storePersistentData(_SgmntfY_._variables.userStorageKey,e,390,_SgmntfY_._variables.storage.user.local),_SgmntfY_.LOG_MESSAGE("DEBUG","Segmentify User Id Changed to: "+e),t!==e){var n={};return n.oldUserId=t||"",_SgmntfY_._prepareRequest(n,"USER_CHANGE")}},pageView:function(e){return e=e||{},_SgmntfY_._prepareRequest(e,"PAGE_VIEW")},productView:function(e){if((e=e||{}).url=e.url||document.URL,e.productUrl=e.productUrl||e.url||document.URL,"number"==typeof e.productId&&(e.productId=e.productId.toString()),"string"==typeof e.categories)if(-1!==e.categories.indexOf("|")){var t=e.categories.split("|");for(var n in e.categories=[],t)t.hasOwnProperty(n)&&e.categories.push(t[n].trim())}else e.categories=[e.categories];else for(var a in e.categories)e.categories.hasOwnProperty(a)&&"string"==typeof e.categories[a]&&(e.categories[a]=e.categories[a].trim());e.categories=(e.categories||[]).filter(_SgmntfY_._null),e.source=e.source||_SgmntfY_._sourceOfUrl();var r=_SgmntfY_._getClickedBanners();if(0<r.length){var i=[];for(a=0;a<r.length;++a){var s=_SgmntfY_._split(r[a],":",4);4!==s.length||isNaN(parseInt(s[2]))||i.push({title:s[0],group:s[1],order:parseInt(s[2])})}e.activeBanners=i}return 0<=_SgmntfY_._variables.skipProductDetail.device.indexOf(_SgmntfY_._variables.ua.type)&&(e.noUpdate=["all"]),_SgmntfY_._prepareRequest(e,"PRODUCT_VIEW")},addToBasket:function(e){(e=e||{}).step="add",e.quantity=e.quantity||1;var t=_SgmntfY_._getClickedBanners();if(0<t.length){for(var n=[],a=0;a<t.length;++a){var r=_SgmntfY_._split(t[a],":",4);4!==r.length||isNaN(parseInt(r[2]))||n.push({title:r[0],group:r[1],order:parseInt(r[2])})}e.activeBanners=n}return _SgmntfY_._variables.disableNextPage||void 0!==e.nextPage||(e.nextPage=!0),e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),_SgmntfY_._prepareRequest(e,"BASKET_OPERATIONS")},removeFromBasket:function(e){return(e=e||{}).step="remove",_SgmntfY_._variables.disableNextPage||void 0!==e.nextPage||(e.nextPage=!0),e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),_SgmntfY_._prepareRequest(e,"BASKET_OPERATIONS")},clearBasket:function(e){return(e=e||{}).step="clear",_SgmntfY_._variables.disableNextPage||void 0!==e.nextPage||(e.nextPage=!0),e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),_SgmntfY_._prepareRequest(e,"BASKET_OPERATIONS")},checkoutViewBasket:function(e){if((e=e||{}).step="view-basket",e.hasOwnProperty("productList"))for(var t=0;t<e.productList.length;++t)e.productList[t].quantity=e.productList[t].quantity||1;return e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),_SgmntfY_._prepareRequest(e,"CHECKOUT")},checkoutCustomerInfo:function(e){return(e=e||{}).step="customer-info",e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),_SgmntfY_._prepareRequest(e,"CHECKOUT")},checkoutPaymentInfo:function(e){return(e=e||{}).step="payment-info",e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),_SgmntfY_._prepareRequest(e,"CHECKOUT")},checkoutPurchase:function(e){if((e=e||{}).step="purchase",e.basketId=e.basketId||"basket_"+_SgmntfY_._getUserId(),e.hasOwnProperty("productList"))for(var t=0;t<e.productList.length;++t)e.productList[t].quantity=e.productList[t].quantity||1;var n=_SgmntfY_._getClickedBanners();if(0<n.length){for(var a=[],r=0;r<n.length;++r){var i=_SgmntfY_._split(n[r],":",4);4!==i.length||isNaN(parseInt(i[2]))||a.push({title:i[0],group:i[1],order:parseInt(i[2])})}e.activeBanners=a}return _SgmntfY_._prepareRequest(e,"CHECKOUT")},userSignIn:function(e){return(e=e||{}).step="signin",e.isLogin=!0,e.isRegistered=!0,_SgmntfY_._prepareRequest(e,"USER_OPERATIONS")},userSignOut:function(e){return(e=e||{}).step="signout",e.isLogin=!1,_SgmntfY_._prepareRequest(e,"USER_OPERATIONS")},userSignUp:function(e){return(e=e||{}).step="signup",e.isRegistered=!0,_SgmntfY_._prepareRequest(e,"USER_OPERATIONS")},userSubscribe:function(e){return(e=e||{}).step="subscribe",_SgmntfY_._prepareRequest(e,"USER_OPERATIONS")},userUnsubscribe:function(e){return(e=e||{}).step="unsubscribe",_SgmntfY_._prepareRequest(e,"USER_OPERATIONS")},userInfoUpdate:function(e){(e=e||{}).step="update",void 0!==e.isLogin&&(e.isRegistered="true"===e.isLogin||!0===e.isLogin?"true":e.isRegistered);var t=JSON.stringify(e),n=_SgmntfY_._getPersistentData("sgfUserUpdateData",!0);if(void 0===n||t!==n)return _SgmntfY_._storePersistentData("sgfUserUpdateData",t,-1,!0),_SgmntfY_._prepareRequest(e,"USER_OPERATIONS")},userForm:function(e){return e=e||{},_SgmntfY_._prepareRequest(e,"FORM")},customEvent:function(e){return e=e||{},_SgmntfY_._prepareRequest(e,"CUSTOM_EVENT")},interaction:function(e){return e=e||{},_SgmntfY_._variables.disableNextPage||void 0!==e.nextPage||(e.nextPage=!0),"impression"!==e.type&&"widget-view"!==e.type||(e.nextPage=!1),_SgmntfY_._prepareRequest(e,"INTERACTION")},bannerImpression:function(e){return(e=e||{}).async="false",e.type="impression",_SgmntfY_._prepareRequest(e,"BANNER_OPERATIONS")},bannerClick:function(e){return(e=e||{}).async="false",e.type="click",_SgmntfY_._variables.disableNextPage||void 0!==e.nextPage||(e.nextPage=!0),_SgmntfY_._addClickedBanner(e.title,e.group,e.order,e.url),_SgmntfY_._prepareRequest(e,"BANNER_OPERATIONS")},bannerUpdate:function(e){return(e=e||{}).async="false",e.type="update",_SgmntfY_._prepareRequest(e,"BANNER_OPERATIONS")},bannerGroupView:function(e){return e=e||{},_SgmntfY_._prepareRequest(e,"BANNER_GROUP_VIEW")},bannerGroupDetail:function(e){return e=e||{},_SgmntfY_._prepareRequest(e,"INTERNAL_BANNER_GROUP")},promotionImpression:function(e){return(e=e||{}).type="impression","string"==typeof e.categories&&(e.categories=[e.categories]),e.categories=(e.categories||[]).filter(_SgmntfY_._null),"string"==typeof e.brands&&(e.brands=[e.brands]),e.brands=(e.brands||[]).filter(_SgmntfY_._null),"string"==typeof e.labels&&(e.labels=[e.labels]),e.labels=(e.labels||[]).filter(_SgmntfY_._null),"string"==typeof e.productIds&&(e.productIds=[e.productIds]),e.productIds=(e.productIds||[]).filter(_SgmntfY_._null),_SgmntfY_._prepareRequest(e,"PROMOTION")},promotionView:function(e){return(e=e||{}).type="view","string"==typeof e.categories&&(e.categories=[e.categories]),e.categories=(e.categories||[]).filter(_SgmntfY_._null),"string"==typeof e.brands&&(e.brands=[e.brands]),e.brands=(e.brands||[]).filter(_SgmntfY_._null),"string"==typeof e.labels&&(e.labels=[e.labels]),e.labels=(e.labels||[]).filter(_SgmntfY_._null),"string"==typeof e.productIds&&(e.productIds=[e.productIds]),e.productIds=(e.productIds||[]).filter(_SgmntfY_._null),_SgmntfY_._prepareRequest(e,"PROMOTION")},pushInteraction:function(a){var r={data:null,url:_SgmntfY_._variables.segmentifyApiUrl+"interaction/notification?apiKey="+_SgmntfY_._variables.apiKey+"&instanceId="+a.instanceId+"&userId="+_SgmntfY_._getUserId()+"&type="+a.type+"&segmentify=true&device="+a._device};_SgmntfY_._getJq().ajax({contentType:"text/plain",processData:!1,type:"GET",url:r.url,timeout:1e3*_SgmntfY_._variables.constants.eventTimeout}).done(function(e,t,n){_SgmntfY_._ajaxSuccess(r,e,t),_SgmntfY_._storePersistentData(a.instanceId,"1",.006),_SgmntfY_.LOG_MESSAGE("INFO","Push campaign interaction is sent for campaign: "+a.instanceId)}).fail(function(e,t,n){_SgmntfY_._ajaxError(r,e,t,n)})}},_prepareRequest:function(e,t,n){if(void 0===e.noSend||"true"!==e.noSend)if(_SgmntfY_._getJq()("html").hasClass("translated-ltr")||_SgmntfY_._getJq()("html").hasClass("translated-rtl"))_SgmntfY_.LOG_MESSAGE("DEBUG","Page is translated, ignoring event");else if(navigator&&navigator.language&&"c"===navigator.language)_SgmntfY_.LOG_MESSAGE("DEBUG","This is a bot, ignoring event");else if(_SgmntfY_._isEmpty(_SgmntfY_._variables.apiKey))_SgmntfY_.LOG_MESSAGE("ERROR","Api Key is not set, not sending event: "+t);else if(_SgmntfY_._isEmpty(_SgmntfY_._getUserId()))_SgmntfY_.LOG_MESSAGE("ERROR","userId is not set, not sending event: "+t);else{if(!_SgmntfY_._isEmpty(_SgmntfY_._getSessionId())){if(void 0===n&&(n=!1),!n&&"boolean"==typeof e.nextPage&&!0===e.nextPage)return _SgmntfY_._addToNextPageQueue({eventName:t,params:e}),null;var a=new Date,r={data:{name:t,userId:_SgmntfY_._getUserId(),sessionId:_SgmntfY_._getSessionId(),testMode:_SgmntfY_._getTestMode()||"false",device:_SgmntfY_._variables.ua.type||"PC",noProcess:e.noProcess||!1,tryCount:0,nextPage:e.nextPage||!1,params:e.params||{},recommendIds:(e.recommendIds||[]).filter(_SgmntfY_._null),pageUrl:e.pageUrl||document.URL,referrer:e.referrer||document.referrer,browser:e.browser||_SgmntfY_._variables.ua.name,os:e.os||_SgmntfY_._variables.ua.os,osversion:e.osversion||_SgmntfY_._variables.ua.osversion,userAgent:e.userAgent||_SgmntfY_._variables.ua.agentString,lang:e.lang||_SgmntfY_._variables.language,currency:e.currency||_SgmntfY_._variables.currency,region:e.region||_SgmntfY_._variables.region,async:e.async||"true",email:e.email||"",ft:_SgmntfY_._getFireTime(a)||"",tz:_SgmntfY_._getTimeZone(a)||""},originalParams:e,eventName:t};"function"==typeof e.recommendationCallback&&_SgmntfY_._getJq().extend(r,{recommendationCallback:e.recommendationCallback});for(var i=_SgmntfY_._variables.requiredParams[t],s=0;s<i.length;++s){if(!_SgmntfY_._isNotEmpty(e[i[s]]))return void _SgmntfY_.LOG_MESSAGE("ERROR","Missing parameter["+i[s]+"] in event: "+t);r.data[i[s]]=e[i[s]],"string"==typeof r.data[i[s]]&&(r.data[i[s]]=_SgmntfY_._clearNullByte(r.data[i[s]]).trim())}var o=_SgmntfY_._variables.optionalParams[t];for(s=0;s<o.length;++s)_SgmntfY_._isNotEmpty(e[o[s]])&&(r.data[o[s]]=e[o[s]],"string"==typeof r.data[o[s]]&&(r.data[o[s]]=_SgmntfY_._clearNullByte(r.data[o[s]]).trim()));return r}_SgmntfY_.LOG_MESSAGE("ERROR","sessionId is not set, not sending event: "+t)}else _SgmntfY_.LOG_MESSAGE("DEBUG","No send flag is set for event: "+t+", ignoring event")},_storePersistentData:function(t,n,e,a){if("undefined"!=typeof Storage&&a)try{localStorage.setItem(t,n),_SgmntfY_.LOG_MESSAGE("DEBUG","Segmentify Persistent Data (Local Storage) Update: "+t+": "+n)}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't store Persistent Data (Local Storage) Update: "+t+": "+n)}else{"string"==typeof n&&(n=encodeURIComponent(n));var r,i,s="",o="";e&&((r=new Date).setTime(r.getTime()+24*e*60*60*1e3),s="; expires="+r.toGMTString()),_SgmntfY_._variables.domain&&2<=_SgmntfY_._variables.domain.split(".").length&&(o="; domain="+_SgmntfY_._variables.domain),i=t+"="+n+s+o+"; path=/";try{document.cookie=i,_SgmntfY_.LOG_MESSAGE("DEBUG","Segmentify Persistent Data (Cookie) Update: "+i)}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't store Persistent Data (Cookie) Update: "+i)}}},_getPersistentData:function(t,e){if("undefined"!=typeof Storage&&e)try{return localStorage.getItem(t)}catch(e){return _SgmntfY_.LOG_MESSAGE("ERROR","Can't get Persistent Data (Local Storage): "+t),null}else{var n=t+"=";try{for(var a=document.cookie.split(";"),r=0;r<a.length;r++){var i=a[r].trim();if(0===i.indexOf(n))return decodeURIComponent(i.substring(n.length,i.length))}return null}catch(e){return _SgmntfY_.LOG_MESSAGE("ERROR","Can't get Persistent Data (Cookie): "+t),null}}},_clearProductUrl:function(e){return _SgmntfY_._stripQueryParameters(e,["_sgm_source","_sgm_campaign","_sgm_action","_sgm_type","_sgm_test","utm_source","utm_medium","utm_term","utm_content","utm_campaign","utm_type","p_id","gclid","ds_p","ds_eid","ds_aid","ds_e","ds_c","ds_cid","ds_ag","ds_agid","ds_k","ds_kid","ds_kids","ds_kidnl","gclick","gsrc","gclsrc"])},_stripQueryParameters:function(e,t){if(void 0===t||!t)return e;"string"==typeof t&&(t=[t]);var n=(e||"").split("?");if(2<=n.length){for(var a=[],r=0;r<(t||[]).length;r++)a.push(encodeURIComponent(t[r])+"=");var i=n[1].split(/[&;]/g);for(r=i.length;0<r--;)for(var s=0;s<a.length;s++)if(-1!==i[r].lastIndexOf(a[s],0)){i.splice(r,1);break}return 0<i.length?n[0]+"?"+i.join("&"):n[0]}return e},_getQueryParameter:function(e,t){var n=location.search;void 0!==t&&(n=t),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(n);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},_sendTrackedEvent:function(e){var t,n,a;if(a="segmentify"===_SgmntfY_._getQueryParameter("utm_source",e)?(t=_SgmntfY_._getQueryParameter("utm_campaign",e),n=_SgmntfY_._getQueryParameter("utm_medium",e),_SgmntfY_._getQueryParameter("utm_content",e)):(t=_SgmntfY_._getQueryParameter("_sgm_campaign",e),n=_SgmntfY_._getQueryParameter("_sgm_action",e),_SgmntfY_._getQueryParameter("_sgm_source",e)),t&&n&&a&&(_SgmntfY_.LOG_MESSAGE("DEBUG","Sending tracked event: "+n+" - "+t+" - "+a),_SgmntfY_._variables.segmentifyObj("event:interaction",{type:n,interactionId:a,instanceId:t})),"push"===n){var r=_SgmntfY_._getPersistentData(t);(_SgmntfY_._isEmpty(r)||_SgmntfY_._isNotEmpty(r)&&"0"===r)&&_SgmntfY_._variables.segmentifyObj("push:interaction",{type:"click",interactionId:a,instanceId:t,_device:_SgmntfY_._variables.ua.type||"PC"})}},_setTestMode:function(e){var t=e||_SgmntfY_._getQueryParameter("_sgm_test");if(_SgmntfY_._toggleTestMode(t),"exists"!==_SgmntfY_._getExtensionStatus()&&"true"===_SgmntfY_._getTestMode())try{var n=['<div class="sgm-test-mode-header">','<a href="http://www.segmentify.com" target="_blank" class="sgm-logo"> </a>','<a href="https://chrome.google.com/webstore/detail/segmentify/dhcffckfimabfhbbjdngnajhnlohfjeo" target="_blank" class="sgm-ext"><span>Get <strong>Chrome Extension</strong> Now!</span></a>','<span class="sgm-test-mode-Show-Hide" data-hide="Hide" data-show="Show"></span>','<div class="sgm-test-mode-key">','<h2 id="sgm-test-mode-message"> Your browser is in<strong>Segmentify Test Mode</strong> </h2>','<div class="sgm-test-mode-radio">','<input class="sgm-tgl sgm-tgl-ios" id="sgm-cb1" type="checkbox" checked>','<label class="sgm-tgl-btn" for="sgm-cb1"></label>',"</div>","</div>","</div>"].join("\n");setTimeout(function(){_SgmntfY_._getJq()("body").prepend(n),"chrome"!==_SgmntfY_._variables.ua.name.toLowerCase()&&_SgmntfY_._getJq()(".sgm-test-mode-header .sgm-ext").hide(),_SgmntfY_._getJq()("body").addClass("sgm-test-body"),_SgmntfY_._getJq()("#sgm-cb1").change(function(){var e=_SgmntfY_._getJq()(this);setTimeout(function(){_SgmntfY_._toggleTestMode(e.is(":checked")?"on":"off")},400)}),_SgmntfY_._getJq()(".sgm-test-mode-Show-Hide").click(function(){_SgmntfY_._getJq()("body").toggleClass("sgm-test-header-open")})},800)}catch(e){_SgmntfY_.LOG_MESSAGE("DEBUG","Can't show test mode header: "+e)}},_getTestMode:function(){return _SgmntfY_._getPersistentData(_SgmntfY_._variables.testMode)},_toggleTestMode:function(e){"on"===e?(_SgmntfY_._getJq()("#sgm-test-mode-message").html("Your browser is in<strong>Segmentify Test Mode</strong>"),_SgmntfY_._getJq()("#sgm-test-mode-message").find("strong").css("color","#50BC61"),_SgmntfY_.LOG_MESSAGE("INFO","Segmentify Test Mode activated"),_SgmntfY_._storePersistentData(_SgmntfY_._variables.testMode,"true",180)):"off"===e&&(_SgmntfY_._getJq()("#sgm-test-mode-message").html("<strong>Segmentify Test Mode</strong> is disabled"),_SgmntfY_._getJq()("#sgm-test-mode-message").find("strong").css("color","#fff"),_SgmntfY_.LOG_MESSAGE("INFO","Segmentify Test Mode deactivated"),_SgmntfY_._storePersistentData(_SgmntfY_._variables.testMode,"false",180),window.alert("You are out of Segmentify Test Mode, you will not see test campaigns."),window.location=_SgmntfY_._stripQueryParameters(document.URL,"_sgm_test"))},_getTracking:function(){var e=_SgmntfY_._getPersistentData(_SgmntfY_._variables.tracking);return _SgmntfY_._isNotEmpty(e)&&_SgmntfY_._setTracking(e),e},_setTracking:function(e){"disabled"!==e&&(e="enabled"),_SgmntfY_._storePersistentData(_SgmntfY_._variables.tracking,e,390)},_getSessionId:function(){var e=_SgmntfY_._getPersistentData(_SgmntfY_._variables.sessionStorageKey,_SgmntfY_._variables.storage.session.local);return e?e.trim():""},_getUserId:function(){var e=_SgmntfY_._getPersistentData(_SgmntfY_._variables.userStorageKey,_SgmntfY_._variables.storage.user.local);return e?e.trim():""},_shuffle:function(e){for(var t,n,a=e.length;a;t=Math.floor(Math.random()*a),n=e[--a],e[a]=e[t],e[t]=n);return e},_getClickedBanners:function(){try{var e=_SgmntfY_._variables.storage.clickedBanners;return JSON.parse(_SgmntfY_._getPersistentData(e.key,e.local))||[]}catch(e){_SgmntfY_.LOG_MESSAGE("DEBUG","Can't read clicked banners: "+e)}return[]},_addClickedBanner:function(e,t,n,a){if(void 0!==e&&void 0!==t&&void 0!==n&&void 0!==a){var r=e+":"+t+":"+n+":"+a,i=_SgmntfY_._getClickedBanners();-1===i.indexOf(r)&&i.push(r),i.length>_SgmntfY_._variables.constants.clickedBannersLimit&&(i=i.splice(i.length-_SgmntfY_._variables.constants.clickedBannersLimit));var s=_SgmntfY_._variables.storage.clickedBanners;_SgmntfY_._storePersistentData(s.key,JSON.stringify(i),0,s.local)}},_getDelayedActions:function(){try{var e=_SgmntfY_._variables.storage.delayedActions;return JSON.parse(_SgmntfY_._getPersistentData(e.key,e.local))||[]}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't read delayed actions: "+e)}return[]},_setDelayedActions:function(e){var t=_SgmntfY_._variables.storage.delayedActions;_SgmntfY_._storePersistentData(t.key,JSON.stringify(e),0,t.local)},_addDelayedAction:function(a){for(var e=_SgmntfY_._getDelayedActions(),t=0;t<e.length;t++)if(e[t].params.actionId===a.params.actionId)return!1;var n=new Date;if(a.delayDate.getTime()<n.getTime())return!1;var r=a.type,i=_SgmntfY_._actions[a.type],s=a.params,o=a.request;return setTimeout(function(){for(var e=_SgmntfY_._getDelayedActions(),t=!1,n=0;n<e.length;n++)e[n].params.actionId===a.params.actionId&&(t=!0);t&&(_SgmntfY_.LOG_MESSAGE("INFO","Action("+r+") is triggered after delay"),i.call(null,s,o),_SgmntfY_._removeDelayedAction(s.actionId))},a.delayDate.getTime()-n.getTime()+Math.floor(750*Math.random())),e.push(a),_SgmntfY_._setDelayedActions(e),!0},_removeDelayedAction:function(e){for(var t=_SgmntfY_._getDelayedActions(),n=0;n<t.length;n++)if(t[n].params.actionId===e)return t.splice(n,1),void _SgmntfY_._setDelayedActions(t)},_getRetryQueue:function(){try{var e=_SgmntfY_._variables.storage.retryQueue;return JSON.parse(_SgmntfY_._getPersistentData(e.key,e.local))||[]}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't read retry queue: "+e)}return[]},_setRetryQueue:function(e){var t=_SgmntfY_._variables.storage.retryQueue;_SgmntfY_._storePersistentData(t.key,JSON.stringify(e),0,t.local)},_addToRetryQueue:function(e){for(var t=_SgmntfY_._getRetryQueue();0<e.length;){var n=e.shift();if("CHECKOUT"===n.eventName||"BASKET_OPERATIONS"===n.eventName||"INTERACTION"===n.eventName){var a=n.data.tryCount||0;a<_SgmntfY_._variables.constants.retryLimit&&(n.data.tryCount=a+1,_SgmntfY_._variables.isUnload&&(n.originalParams.discardResponse="true"),t.push(n))}}_SgmntfY_._setRetryQueue(t)},_consumeRetryQueue:function(){var e=_SgmntfY_._getRetryQueue();if(e&&0<e.length){for(var t=[];0<e.length;){var n=e.shift();n.data.userId=_SgmntfY_._getUserId(),n.data.sessionId=_SgmntfY_._getSessionId(),t.push(n)}_SgmntfY_._sendRequestToServer(t),_SgmntfY_._setRetryQueue([])}},_getDataLayer:function(){return window[_SgmntfY_._variables.dataLayer]},_consumeDataLayer:function(){if(_SgmntfY_._variables.consumeDataLayer){function e(e,t){if(!t.hasOwnProperty("__processed__")||!0!==t.__processed__){var n=_SgmntfY_._extend(t,i),a=_SgmntfY_._functions.getDataLayerFunction(e,n).apply(null,[n]);a&&r.push(a)}}function t(e,t){var n=JSON.parse(JSON.stringify(t)),a=_SgmntfY_._variables.dataLayerConfig[e]||{};for(var r in a)if(a.hasOwnProperty(r)){var i=a[r];if(n.hasOwnProperty(i)){var s=n[i];delete n[i],n[r]=s}}return n}var r=[],n=_SgmntfY_._getDataLayer()||{},i=t("common",n.common||{});for(var a in i.hasOwnProperty("userId")&&_SgmntfY_._functions.setUserId(i.userId),n)if(n.hasOwnProperty(a)){if("common"===a)continue;if(_SgmntfY_._getJq().isArray(n[a]))for(var s=0;s<n[a].length;++s)e(a,t(a,n[a][s])),_SgmntfY_._getDataLayer()[a][s].__processed__=!0;else e(a,t(a,n[a])),_SgmntfY_._getDataLayer()[a].__processed__=!0}0<r.length&&_SgmntfY_._sendRequestToServer(r)}},_getNextPageQueue:function(){try{var e=_SgmntfY_._variables.storage.nextPageQueue;return JSON.parse(_SgmntfY_._getPersistentData(e.key,e.local))||[]}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't read next page queue: "+e)}return[]},_setNextPageQueue:function(e){var t=_SgmntfY_._variables.storage.nextPageQueue;_SgmntfY_._storePersistentData(t.key,JSON.stringify(e),0,t.local)},_addToNextPageQueue:function(e){var t=_SgmntfY_._getNextPageQueue();t.push(e),_SgmntfY_._setNextPageQueue(t)},_consumeNextPageQueue:function(){var e=_SgmntfY_._getNextPageQueue();if(e&&0<e.length){for(var t=[];0<e.length;){var n=e.shift();n.hasOwnProperty("data")||(n=_SgmntfY_._prepareRequest(n.params,n.eventName,!0)),n.data.userId=_SgmntfY_._getUserId(),n.data.sessionId=_SgmntfY_._getSessionId(),t.push(n)}_SgmntfY_._sendRequestToServer(t),_SgmntfY_._setNextPageQueue([])}},_addRecommendedProduct:function(e){_SgmntfY_._variables.recommendedProducts.push(e)},_containsRecommendedProduct:function(e){return 0<=_SgmntfY_._variables.recommendedProducts.indexOf(e)},_addRecommendedPromotion:function(e){_SgmntfY_._variables.recommendedPromotions.push(e)},_containsRecommendedPromotion:function(e){return 0<=_SgmntfY_._variables.recommendedPromotions.indexOf(e)},_getExtensionStatus:function(){try{var e=_SgmntfY_._variables.storage.extensionStatus;return _SgmntfY_._getPersistentData(e.key,e.local)||""}catch(e){_SgmntfY_.LOG_MESSAGE("DEBUG","Can't read extension status: "+e)}return""},_getDelayedCampaigns:function(){try{var e=_SgmntfY_._variables.storage.delayedCampaigns;return JSON.parse(_SgmntfY_._getPersistentData(e.key,e.local))||[]}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't read delayed campaigns: "+e)}return[]},_setDelayedCampaigns:function(e){var t=_SgmntfY_._variables.storage.delayedCampaigns;_SgmntfY_._storePersistentData(t.key,JSON.stringify(e),0,t.local)},_addDelayedCampaign:function(a){for(var e=_SgmntfY_._getDelayedCampaigns(),t=0;t<e.length;++t)if(e[t].campaign.instanceId===a.campaign.instanceId)return!1;var n=new Date;if(a.time.getTime()<n.getTime())return!1;var r=a.campaign,i=a.request,s=_SgmntfY_._campaigns[r.type];return setTimeout(function(){for(var e=_SgmntfY_._getDelayedCampaigns(),t=!1,n=0;n<e.length;++n)e[n].campaign.instanceId===a.campaign.instanceId&&(t=!0);t&&(_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+r.type+") triggered after delay"),s.call(null,r,i),_SgmntfY_._removeDelayedCampaign(r.instanceId))},a.time.getTime()-n.getTime()+Math.floor(750*Math.random())),e.push(a),_SgmntfY_._setDelayedCampaigns(e),!0},_removeDelayedCampaign:function(e){for(var t=_SgmntfY_._getDelayedCampaigns(),n=0;n<t.length;n++)if(t[n].campaign.instanceId===e)return t.splice(n,1),void _SgmntfY_._setDelayedCampaigns(t)},_getFireTime:function(e){function t(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n}try{return e.getFullYear()+"."+t(e.getMonth(),2)+"."+t(e.getDate(),2)+" "+t(e.getHours(),2)+":"+t(e.getMinutes(),2)+":"+t(e.getSeconds(),2)+"."+t(e.getMilliseconds(),3)}catch(e){return""}},_getTimeZone:function(e){try{return e.getTimezoneOffset().toString()}catch(e){return""}},_getJq:function(){return _SgmntfY_._variables.jq},_getMustache:function(){return _SgmntfY_._variables.mustache},_getObjectByString:function(e,t){for(var n=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),a=0,r=n.length;a<r;++a){var i=n[a];if(!(i in e))return;e=e[i]}return e},_isUndefined:function(e){return void 0===e},_notNull:function(e){return void 0!==e&&null!=e},_isEmpty:function(e){return void 0===e||null==e||""===e},_isNotEmpty:function(e){return!_SgmntfY_._isEmpty(e)},_isPlainObject:function(e){if("object"!=typeof e||null===e)return!1;if("function"!=typeof Object.getPrototypeOf)return"[object Object]"==Object.prototype.toString.call(e);var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t},_exists:function(e){return e instanceof HTMLElement?null!==e:(e instanceof HTMLCollection||e instanceof _SgmntfY_._getJq()||e instanceof jQuery||e instanceof $)&&0<e.length},_extend:function(){var e,t,n,a,r,i=arguments[0]||{},s=1,o=arguments.length,c=!1;for("boolean"==typeof i&&(c=i,i=arguments[s]||{},s++);s<o;s++)if(null!=(e=arguments[s]))for(t in e)if(e.hasOwnProperty(t)){if(n=i[t],i===(a=e[t]))continue;c&&a&&_SgmntfY_._isPlainObject(a)?(r=n&&"object"==typeof n&&null!==n?n:{},i[t]=_SgmntfY_._extend(c,r,a)):void 0!==a&&(i[t]=a)}return i},_split:function(e,t,n){if(e&&"string"==typeof e){var a,r=e.split(t);for(a=0;a<r.length;a++)r[a]=r[a].trim();if(n&&n<r.length){var i=r.splice(0,n-1);i.push(r.join(t)),r=i}return r}return null},_parseFloat:function(e){return null==e?e:void 0===e?null:"number"==typeof e?e:"string"==typeof e?parseFloat(e):e},_parseBoolean:function(e){return void 0===e?null:"number"==typeof e?0===e?"false":"true":"string"==typeof e?"0"===e||"false"===e.toLowerCase()?"false":"true":"boolean"==typeof e?e.toString():e},_null:function(e){return null!=e&&""!=e},_clearNullByte:function(e){return e.replace(/\0/g,"")},_checkVersion:function(e,t){var n=t.split("."),a=e.split(".");prevs=[];for(var r=0,i=Math.max(n.length,a.length);r<i;r++){if(n[r]=parseInt(n[r]),isNaN(n[r])&&(n[r]=0),a[r]=parseInt(a[r]),isNaN(a[r])&&(a[r]=0),n[r]<a[r])return!1;if(n[r]>a[r])return!0}return!0},_updateBrowserAndDeviceInfo:function(){if(void 0!==window.bowser){var e=window.bowser._detect(_SgmntfY_._variables.ua.agentString);null==_SgmntfY_._variables.ua.type&&(e.tablet?_SgmntfY_._variables.ua.type="tablet":e.mobile?_SgmntfY_._variables.ua.type="mobile":_SgmntfY_._variables.ua.type="PC",e.chromium?_SgmntfY_._variables.ua.name="Chrome":_SgmntfY_._variables.ua.name=e.name,_SgmntfY_._variables.ua.version=e.version),null==_SgmntfY_._variables.ua.os&&(_SgmntfY_._variables.ua.os=e.osname||"Other",_SgmntfY_._variables.ua.osversion=e.osversion)}},_addLeavePageHandler:function(e,t){var n=e.type,a=e.params,r=_SgmntfY_._actions[n];_SgmntfY_.LOG_MESSAGE("INFO","Action("+n+") will be triggered when user leaves page");var i=function(e){e.clientY<0&&(_SgmntfY_.LOG_MESSAGE("INFO","Action("+n+") is triggered at user leave page"),_SgmntfY_._getJq()(document).unbind("mouseleave",i),r.call(null,a,t))};_SgmntfY_._getJq()(document).bind("mouseleave",i)},_addWaitPageHandler:function(e,t){var n=e.type,a=e.params,r=e.delayAction||null,i=_SgmntfY_._actions[n],s=parseInt(r.time);_SgmntfY_.LOG_MESSAGE("INFO","Action("+n+") will be triggered after "+s+" second(s) delay on same page"),setTimeout(function(){_SgmntfY_.LOG_MESSAGE("INFO","Action("+n+") is triggered after delay"),i.call(null,a,t)},1e3*s)},_addScrollHandler:function(e,t){var n=e.type,a=e.delayAction,r=parseInt(a.time)||0;_SgmntfY_.LOG_MESSAGE("INFO","Action ("+n+") will be triggered after "+r+"% of page is scrolled");var i=function(){r<=_SgmntfY_._getScrollPercent()&&(_SgmntfY_.LOG_MESSAGE("INFO","Action ("+n+") triggered after "+r+"% of page is scrolled"),_SgmntfY_._getJq()(document).unbind("scroll",i),_SgmntfY_._actions[n].call(null,e.params,t))};_SgmntfY_._getJq()(document).bind("scroll",i)},_addCampaignDelayHandler:function(e,t){var n=e.type,a=e.timing,r=parseInt(a.param);_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+n+") will be triggered after "+r+" second(s) delay on same page"),window.setTimeout(function(){_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+n+") triggered after "+r+" delay"),_SgmntfY_._campaigns[n].call(null,e,t)},1e3*r)},_addCampaignDelayAllPagesHandler:function(e,t){var n=e.timing||"0",a={campaign:e,request:t,time:new Date((new Date).getTime()+1e3*parseInt(n.param))};_SgmntfY_._addDelayedCampaign(a)?_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+e.instanceId+") added for delayed campaign in future"):_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+e.instanceId+") already added for delayed campaign")},_addCampaignScrollHandler:function(e,t){var n=e.type,a=e.timing,r=parseInt(a.param);_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+n+") will be triggered after "+r+"% of page is scrolled");var i=function(){r<=_SgmntfY_._getScrollPercent()&&(_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+n+") triggered after "+r+"% of page is scrolled"),_SgmntfY_._getJq()(document).unbind("scroll",i),_SgmntfY_._campaigns[n].call(null,e,t))};_SgmntfY_._getJq()(document).bind("scroll",i)},_addCampaignLeaveHandler:function(t,n){var a=t.type;_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+a+") will be triggered when user leaves page");var r=function(e){e.clientY<0&&(_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+a+") triggered at user leave page"),_SgmntfY_._getJq()(document).unbind("mouseleave",r),_SgmntfY_._campaigns[a].call(null,t,n))};_SgmntfY_._getJq()(document).bind("mouseleave",r)},_addCampaignInteractionHandler:function(e,t){},_getScrollPercent:function(){var e=document.documentElement,t=document.body,n="scrollTop",a="scrollHeight";return(e[n]||t[n])/((e[a]||t[a])-e.clientHeight)*100},_updateUserAndSessionId:function(r){_SgmntfY_._variables.waitingKeys=!0;var i={data:null,url:_SgmntfY_._variables.segmentifyApiUrl+"/get/key/v1.json?count="+r};_SgmntfY_._getJq().ajax({contentType:"text/plain",processData:!1,type:"GET",url:i.url,timeout:1e3*_SgmntfY_._variables.constants.eventTimeout}).done(function(e,t,n){_SgmntfY_._ajaxSuccess(i,e,t),2===r&&_SgmntfY_._storePersistentData(_SgmntfY_._variables.userStorageKey,e[1],390,_SgmntfY_._variables.storage.user.local);var a=_SgmntfY_._getUserId();_SgmntfY_._isEmpty(a)?_SgmntfY_.LOG_MESSAGE("ERROR","Can't update User Id"):(_SgmntfY_.LOG_MESSAGE("INFO","User Id Changed: "+a),_SgmntfY_._storePersistentData(_SgmntfY_._variables.sessionStorageKey,e[0],0,_SgmntfY_._variables.storage.session.local),_SgmntfY_._isEmpty(_SgmntfY_._getSessionId())?_SgmntfY_.LOG_MESSAGE("ERROR","Can't update User Session"):(_SgmntfY_.LOG_MESSAGE("INFO","User Session Changed: "+e[0]),_SgmntfY_._variables.waitingKeys=!1))}).fail(function(e,t,n){_SgmntfY_._ajaxError(i,e,t,n),_SgmntfY_._variables.waitingKeys=!1})},_sendRequestToServer:function(e){if(e&&!(e.length<=0)){for(var t=[],n=[],a=0;a<e.length;++a)"false"===e[a].data.async?t.push(e[a]):n.push(e[a]);0<t.length&&_SgmntfY_._syncRequest(t),0<n.length&&_SgmntfY_._asyncRequest(n)}},_syncRequest:function(a){for(var r=[],e=0;e<a.length;e++)r.push(a[e].data);_SgmntfY_._getJq().ajax({contentType:"text/plain",processData:!1,type:"POST",url:_SgmntfY_._variables.segmentifyApiUrl+"/sync/events/v1.json?apiKey="+_SgmntfY_._variables.apiKey,data:JSON.stringify(r),timeout:1e3*_SgmntfY_._variables.constants.eventTimeout}).done(function(e,t,n){_SgmntfY_._ajaxSuccess(r,e,t),"SUCCESS"!==e.statusCode&&_SgmntfY_.LOG_MESSAGE("WARN","Segmentify response is ("+e.statusCode+")")}).fail(function(e,t,n){_SgmntfY_._addToRetryQueue(a),_SgmntfY_._ajaxError(r,e,t,n)})},_asyncRequest:function(_){for(var g=[],e=0;e<_.length;e++)g.push(_[e].data);_SgmntfY_._getJq().ajax({contentType:"text/plain",processData:!1,type:"POST",url:_SgmntfY_._variables.segmentifyApiUrl+"/add/events/v1.json?apiKey="+_SgmntfY_._variables.apiKey,data:JSON.stringify(g),timeout:1e3*_SgmntfY_._variables.constants.eventTimeout}).done(function(e,t,n){_SgmntfY_._ajaxSuccess(g,e,t);var a=e.statusCode||"";if("SUCCESS"===a){var r=e.responses,i=e.campaigns;if(r.length===_.length&&i.length===_.length)for(var s=0;s<r.length;s++){var o=_[s],c=r[s],m=i[s];"true"!==o.originalParams.discardResponse?(_SgmntfY_._getResponse(o,c),_SgmntfY_._getCampaign(o,m)):_SgmntfY_.LOG_MESSAGE("DEBUG","Action("+o.eventName+") responses are discarded")}else _SgmntfY_.LOG_MESSAGE("WARN","Segmentify response length("+r.length+") doesn't match request length("+_.length+")")}else _SgmntfY_.LOG_MESSAGE("WARN","Segmentify response is ("+a+")"),"NO_SESSIONID"===a?_SgmntfY_._updateUserAndSessionId(1):"NO_USERID"===a&&_SgmntfY_._updateUserAndSessionId(2)}).fail(function(e,t,n){_SgmntfY_._addToRetryQueue(_),_SgmntfY_._ajaxError(g,e,t,n)})},_getResponse:function(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(a.hasOwnProperty("type")){var r=a.type,i=a.delayAction||null,s=a.params,o=(a.instanceId,_SgmntfY_._actions[r]);if(!1===s.isControlGroup){_SgmntfY_.LOG_MESSAGE("DEBUG","User is in control group for campaign: "+s.instanceId);continue}if("function"==typeof o)if(i&&"LEAVE_PAGE"===i.type)_SgmntfY_._addLeavePageHandler(a,e);else if(i&&"WAIT_SAME_PAGE"===i.type&&0<parseInt(i.time))_SgmntfY_._addWaitPageHandler(a,e);else if(i&&"WAIT_ALL_PAGES"===i.type&&0<parseInt(i.time)){var c={delayDate:new Date((new Date).getTime()+1e3*parseInt(i.time)),params:s,type:r,request:e};_SgmntfY_._addDelayedAction(c)?_SgmntfY_.LOG_MESSAGE("INFO","Action(id="+c.params.actionId+") is added for delayed action in future"):_SgmntfY_.LOG_MESSAGE("INFO","Action(id="+c.params.actionId+") is already added for delayed action")}else i&&"SCROLL"===i.type?_SgmntfY_._addScrollHandler(a,e):(_SgmntfY_.LOG_MESSAGE("INFO","Action("+r+") triggered immediately"),o.call(null,s,e));else _SgmntfY_.LOG_MESSAGE("WARN","Unknown action: "+r)}}},_getCampaign:function(e,t){for(var n=0;n<t.length;n++){var a=t[n]||{};if(a.hasOwnProperty("type")){var r=a.type,i=_SgmntfY_._campaigns[r];if("function"==typeof i){var s=a.timing||{};"DELAY"===s.type?_SgmntfY_._addCampaignDelayHandler(a,e):"DELAY_ALL_PAGES"===s.type?_SgmntfY_._addCampaignDelayAllPagesHandler(a,e):"SCROLL"===s.type?_SgmntfY_._addCampaignScrollHandler(a,e):"PAGELEAVE"===s.type?_SgmntfY_._addCampaignLeaveHandler(a,e):"INTERACTION"===s.type?_SgmntfY_._addCampaignInteractionHandler(a,e):(_SgmntfY_.LOG_MESSAGE("INFO","Campaign ("+r+") triggered immediately."),i.call(null,a,e))}else _SgmntfY_.LOG_MESSAGE("WARN","Unknown campaign: "+r)}}},_sourceOfUrl:function(){var e="";if(document.URL||document.referrer){if(_SgmntfY_._getQueryParameter("gclid").length)return"PAID";var t=_SgmntfY_._getQueryParameter("utm_medium");if(t.length)switch(t){case"social":e="SOCIAL";break;case"organic":e="SEARCH";break;case"cpc":case"cpm":case"ocpm":case"paid-media":case"affiliate":case"banner":case"retargeting":case"shopping":e="PAID";break;case"email":e="EMAIL"}if(!e.length){var n=document.referrer.replace("https://","").replace("http://","");-1!==(n=n.substring(0,n.indexOf("/"))).indexOf(_SgmntfY_._variables.domain)?e="INTERNAL":-1!==n.indexOf("facebook")||-1!==n.indexOf("twitter")||-1!==n.indexOf("t.co")||-1!==n.indexOf("instagram")||-1!==n.indexOf("pinterest")?e="SOCIAL":-1!==n.indexOf("google")||-1!==n.indexOf("g.co")||-1!==n.indexOf("bing")||-1!==n.indexOf("yandex")||-1!==n.indexOf("yahoo")?e="SEARCH":-1===n.indexOf("cimri.com")&&-1===n.indexOf("akakce.com")&&-1===n.indexOf("ucuzcu.com")&&-1===n.indexOf("bilio.com")&&-1===n.indexOf("auspreiser.de")&&-1===n.indexOf("billiger.de")&&-1===n.indexOf("dooyoo.de")&&-1===n.indexOf("geizhals.de")&&-1===n.indexOf("guenstiger.de")&&-1===n.indexOf("idealo.de")&&-1===n.indexOf("kelkoo.de")&&-1===n.indexOf("preis.de")&&-1===n.indexOf("preissuchmaschine.de")&&-1===n.indexOf("geizkragen.de")&&-1===n.indexOf("preisvergleich.de")&&-1===n.indexOf("preisroboter.de")&&-1===n.indexOf("vergelijk.be")&&-1===n.indexOf("pazaruvaj")&&-1===n.indexOf("nabava.net")&&-1===n.indexOf("ceneje.si")&&-1===n.indexOf("heureka")&&-1===n.indexOf("pricerunner")&&-1===n.indexOf("hinnavaatlus")&&-1===n.indexOf("skroutz.gr")&&-1===n.indexOf("agrep.hu")&&-1===n.indexOf("arukereso.hu")&&-1===n.indexOf("trovaprezzi.it")&&-1===n.indexOf("prisjakt.no")&&-1===n.indexOf("prisguiden.no")&&-1===n.indexOf("ceneo.pl")&&-1===n.indexOf("kuantokusta.pt")&&-1===n.indexOf("compari.ro")||(e="LISTING")}e.length||(e="OTHER")}return e},_enableSerializeForm:function(r){r.fn.sgmSerializeForm||(r.fn.sgmSerializeForm=function(){"use strict";var a={};return r.each(this.serializeArray(),function(e,t){var n=a[t.name];null!=n?r.isArray(n)?n.push(t.value):a[t.name]=[n,t.value]:a[t.name]=t.value}),r.each(a,function(e,t){null!=t&&r.isArray(t)&&(a[e]=t.join())}),a})},init:function(){_SgmntfY_._variables.namespace=window.SegmentifyTrackingObject,_SgmntfY_._variables.segmentifyObj=window[_SgmntfY_._variables.namespace];var e=_SgmntfY_._getQueryParameter("_sgm_tracking");if(_SgmntfY_._isNotEmpty(e)&&_SgmntfY_._setTracking(e),"disabled"!==_SgmntfY_._getTracking())if(_SgmntfY_._notNull(_SgmntfY_._variables.segmentifyObj)&&_SgmntfY_._notNull(_SgmntfY_._variables.segmentifyObj.q)){if(_SgmntfY_._variables.initTimer&&window.clearTimeout(_SgmntfY_._variables.initTimer),_SgmntfY_.modernize(),_SgmntfY_.LOG_MESSAGE("DEBUG","*** Segmentify is loading... ***"),_SgmntfY_._extend(!0,_SgmntfY_._variables,_SgmntfY_._variables.segmentifyObj.config),_SgmntfY_._functions.setLogLevel(_SgmntfY_._variables.logLevel),!(_SgmntfY_._variables.domain&&0<=document.URL.indexOf(_SgmntfY_._variables.domain)))return void console.error("Segmentify domain is not set properly: "+_SgmntfY_._variables.domain);if(window.onunload=_SgmntfY_._windowUnload,null==_SgmntfY_._variables.jq)_SgmntfY_._loadJavascript(_SgmntfY_._variables.jQueryUrl,!0,function(){_SgmntfY_._variables.jq=jQuery.noConflict(!0),_SgmntfY_._enableSerializeForm(_SgmntfY_._variables.jq),_SgmntfY_._initializeDelayedActions(),_SgmntfY_._initializeDelayedCampaigns(),_SgmntfY_._sendTrackedEvent(),_SgmntfY_._setTestMode()});else{if(!_SgmntfY_._checkVersion("1.7",_SgmntfY_._variables.jq.fn.jquery))return void console.error("Segmentify requires jQuery version >= 1.7");_SgmntfY_._enableSerializeForm(_SgmntfY_._variables.jq),_SgmntfY_._initializeDelayedActions(),_SgmntfY_._initializeDelayedCampaigns(),_SgmntfY_._sendTrackedEvent(),_SgmntfY_._setTestMode()}null==_SgmntfY_._variables.mustache&&(_SgmntfY_._variables.mustache={},initializeMustache(_SgmntfY_._variables.mustache),_SgmntfY_._variables.mustache.tags=["[[","]]"]),_SgmntfY_._updateBrowserAndDeviceInfo(),_SgmntfY_.LOG_MESSAGE("DEBUG","*** Running on a "+_SgmntfY_._variables.ua.type+" ***"),_SgmntfY_.LOG_MESSAGE("DEBUG","*** Segmentify loaded and started... ***"),_SgmntfY_.run(),_SgmntfY_._dispatchInitEvent()}else{if(++_SgmntfY_._variables.initTryCount,_SgmntfY_._variables.initTryCount>_SgmntfY_._variables.initTryLimit)return void window.clearTimeout(_SgmntfY_._variables.initTimer);window.clearTimeout(_SgmntfY_._variables.initTimer),_SgmntfY_._variables.initTimer=window.setTimeout(_SgmntfY_.init,100)}else _SgmntfY_.LOG_MESSAGE("DEBUG","End-user opted-out Segmentify tracking!")},_initializeDelayedActions:function(){try{var e=_SgmntfY_._getDelayedActions();_SgmntfY_._setDelayedActions([]);for(var t=new Date,n=0;n<e.length;n++)e[n].delayDate=new Date(e[n].delayDate),e[n].delayDate.getTime()>t.getTime()&&_SgmntfY_._addDelayedAction(e[n])}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't initialize delayed actions: "+e)}},_initializeDelayedCampaigns:function(){try{var e=_SgmntfY_._getDelayedCampaigns();_SgmntfY_._setDelayedCampaigns([]);for(var t=new Date,n=0;n<e.length;++n)e[n].time=new Date(e[n].time),e[n].time.getTime()>t.getTime()&&_SgmntfY_._addDelayedCampaign(e[n])}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Can't initialize delayed campaigns: "+e)}},_dispatchInitEvent:function(){try{if(window.dispatchEvent){var e={testMode:_SgmntfY_._getTestMode()};window.dispatchEvent(new CustomEvent("segmentifyInited",{detail:e}))}}catch(e){}},_ajaxError:function(e,t,n,a){_SgmntfY_.LOG_MESSAGE("WARN","Error in sending event:\nEvent Data: "+JSON.stringify(e.data)+"\nResponse: "+t.responseText+"\nStatus: "+n+"\nError: "+a)},_ajaxSuccess:function(e,t,n){_SgmntfY_.LOG_MESSAGE("DEBUG","Success in sending event:\nEvent Data: "+JSON.stringify(e)+"\nStatus: "+n+"\nResponse Data: "+JSON.stringify(t))},_windowUnload:function(){_SgmntfY_._variables.isUnload=!0,window.clearTimeout(_SgmntfY_._variables.runTimer);for(var e=[];0<_SgmntfY_._variables.segmentifyObj.q.length;)try{var t=_SgmntfY_._variables.segmentifyObj.q.shift(),n=_SgmntfY_._functions.getFunction(t[0]),a=Array.prototype.slice.call(t,1);(i=n.apply(null,a)).originalParams.discardResponse="true",e.push(i)}catch(e){}for(var r=_SgmntfY_._getRetryQueue();0<r.length;)try{var i;(i=r.shift()).originalParams.discardResponse="true",e.push(i)}catch(e){}_SgmntfY_._setRetryQueue(e)},run:function(){try{if(_SgmntfY_._variables.jq&&(_SgmntfY_._variables.segmentifyObj.q&&0<_SgmntfY_._variables.segmentifyObj.q.length||_SgmntfY_._getDataLayer())&&!_SgmntfY_._variables.waitingKeys){var e=0,t=_SgmntfY_._getUserId(),n=_SgmntfY_._getSessionId();if(_SgmntfY_._isEmpty(t)?e=2:_SgmntfY_._isEmpty(n)?e=1:_SgmntfY_._isNotEmpty(n)&&0<_SgmntfY_._variables.segmentifyObj.q.length&&(_SgmntfY_._storePersistentData(_SgmntfY_._variables.sessionStorageKey,n,0,_SgmntfY_._variables.storage.session.local),_SgmntfY_._storePersistentData(_SgmntfY_._variables.userStorageKey,t,390,_SgmntfY_._variables.storage.user.local)),0<e)_SgmntfY_._updateUserAndSessionId(e);else{if(_SgmntfY_._variables.segmentifyObj.q&&0<_SgmntfY_._variables.segmentifyObj.q.length){var a=_SgmntfY_._variables.segmentifyObj.q.splice(0,_SgmntfY_._variables.segmentifyObj.q.length);_SgmntfY_._functions.callFunction(a)}_SgmntfY_._getDataLayer()&&_SgmntfY_._consumeDataLayer()}}window.clearTimeout(_SgmntfY_._variables.runTimer),_SgmntfY_._variables.runTimer=window.setTimeout(_SgmntfY_.run,_SgmntfY_._variables.constants.frequency)}catch(e){_SgmntfY_.LOG_MESSAGE("ERROR","Error in run: "+e),window.clearTimeout(_SgmntfY_._variables.runTimer),_SgmntfY_._variables.runTimer=window.setTimeout(_SgmntfY_.run,_SgmntfY_._variables.constants.frequency)}},modernize:function(){"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return 0===this.lastIndexOf(e,0)}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),a=n.length>>>0;if(0==a)return-1;var r=+t||0;if(Math.abs(r)===1/0&&(r=0),a<=r)return-1;for(var i=Math.max(0<=r?r:a-Math.abs(r),0);i<a;){if(i in n&&n[i]===e)return i;i++}return-1}),Array.prototype.map||(Array.prototype.map=function(e,t){var n,a,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),s=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(n=t),a=new Array(s),r=0;r<s;){var o,c;r in i&&(o=i[r],c=e.call(n,o,r,i),a[r]=c),r++}return a});var i=JSON.stringify;if(JSON.stringify=function(e){var t=Array.prototype.toJSON,n=Number.prototype.toJSON,a=String.prototype.toJSON;delete Number.prototype.toJSON,delete Array.prototype.toJSON,delete String.prototype.toJSON;var r=void 0;try{r=i(e)}catch(e){r=void 0}return t&&(Array.prototype.toJSON=t),n&&(Number.prototype.toJSON=n),a&&(String.prototype.toJSON=a),r},"function"!=typeof window.CustomEvent){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}},LOG_MESSAGE:function(e,t){var n=_SgmntfY_._variables.logLevel,a=_SgmntfY_.LOG_LEVELS[e];void 0!==a&&a<=n&&console.log("Segmentify["+e+"]: "+t)}};_SgmntfY_.init()}(window);  7   https://cdn.segmentify.com/account-js/segmentify_n11.js   !!!!                               !!!!           o     O          >      !!!!               !!!!      T                        !!!!               ;
   W     }  g         E   V     ~                                           F   F   G      t W      ޼    F   F   G      t ,      ޼         F   t G	   t     ޤ   `P P 6P P*(P)P      
    5;   E   C   U   V   W   X   Y         "                                        F         ޼    F   G   t     O   	           F   G   t  K   ޼         t G   k   x                dx    ޤ A`P #P 
 "P)	_/P   P)'P   5!!!!         9  B  9  B     9    
   !! 9  :  9  :     9    
    5!! :  A:  :  A:     9    
    5!!  p:  p;  h:  p;     .:    
   !!  :  n;  :  n;     j:   
 
    55!! ;  ;  ;  ;     W;    
    5!! <  <  	<  <     ;    
    5!! <  =  <  =     <    
    5!! =  ?  =  ?     =    
   !!  4>  ?  ,>  ?     =    
    5!!!!!!!!   !!   !!	   5!! ?  B  ?  B     ?    
   !!  @  tB  ?  tB     ?    
    5!!!!!!!!
   !!   !!	   5!!
   !!   !!   !!   5!!!!         C  ?E  B  ?E     B    
   !! C  D  C  D     XC    
   !!  C  D  C  D     C    
    5!!   5!!!!!!!!	   5!!!!         aE  G  ?E  G     E    
   !! E  qG  E  qG     E    
   !!  JF  F  BF  F     F    
    5!!   55!!!!          H  \  G  \         $   !!!!                     	                                 
             !!!!    	     H  H  ~H  H          
    5!!!!    	     H  H  H  H          
    5!!!!    	     H  'I  H  'I          
    5!!!!    	     XI  I  NI  I     Z    
   !! kI  I  cI  I     m    
    55!!!!    	     <J  eJ  2J  eJ     >   
 
    5!!!!    	     oJ  J  eJ  J     q   
 
    5!!!!       
   J  J  J  J   
         !!!!   ,            !!!!            ;                                              ޾   5   K    ޤ& `P/P    
 
    5!!!!    	   VH  }H  NH  }H     X     
    5!!!!   !!!!       !!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!    !!!!   !!!!   !!!!   !!!!   !!!!   !!!!    	    J  J  J  J        
 
    5!!!!    	   K  K  K  K        
 
    5!!!!    	   K  xL  K  xL        
 
    5!!!!    	   L  L  L  L        
 
    5!!!!    	   L  M  L  M        
 
    5!!!!    	    N  "N  	N  "N        
 
    5!!!!    	   =N  ?T  5N  ?T     ?    
   !! {N  6T  sN  6T     }    
   !!	      N  N  N  N         
    5!!	     O  O  N  O         
    5!! R  S  R  S     
    
    5!! S  1T  S  1T         
    5!!!!!!	   !!   !!   !!   !!   !!   !!   55!!!!    	   [T  T  ST  T     ]   
 
    5!!!!    	   T  V  T  V        
 
    5!!!!    	   <V  *X  4V  *X     >    
   !! W  W  W  W         
    5!!!!!!   !!	   !!   5!!!!    	   NX  X  FX  X     P   
 
    5!!!!    	   X  6Y  X  6Y        
 
    5!!!!    	   ZY  Y  RY  Y     \    
    5!!!!    	   Y  Y  Y  Y         
    5!!!!    	   Z  Z  Y  Z         
    5!!!!    	    nZ  Z  fZ  Z     p    
    5!!!!    	   Z  Z  Z  Z         
    5!!!!    	   Z  [  Z  [         
   !! 6[  W[  .[  W[     8    
    55!!!!    	   [  \  [  \         
    5!!!!    	   !\  g\  \  g\     #    
   !! U\  e\  M\  e\     W    
    55;2             }  b                                         S                                       r            ?                               S    * k      k      k      k    
  k      k      k      ޼    F   F      ޼   F         k         ޼   F   F      j	    	  5
      9   	   9
      9      9      9      9      9      9      j      j      j      j      j      ޿   F   k   K   ޿   F   k   K   ޿   F   k   K   ޿   F   k   K   ޿   F   k   K   ޾   F   k   K   ޾   F   k   K   ޾   F   k   K   ޾   F   k   K   ޾   F   k   K    ޾   F   k   K!   ޾   F   k   K"   ޾   F   k   K#   ޾   F   k   K$   ޾   F   k   K%   ޿   &   K'   ޿   (   K)   ޿   e   *   f    +   f   K,   ޾          ޿   k   K   ޿   k    K   ޿   k!   K   ޿   k"   K-   ޿   k#   K.   ޿      K/   ޿      K0   ޿      K1   ޤ %`P `P   `P `P+G`P%******* `P+`P+`P+	`P+
`P+  `P 1       3  F 1   v  d         S [ .  ** `P `P / +   J X  /
P 5!!!!           V    V           !!!!   Q             ;   E       R   S   K                                    	    ޼       H       HF      	   e    
   K   G      x ޤ& `P 3P$P       5!!!!       !!   !!!!   !!!!    !!   !!!!       !!!   !!       !!!!     
    )  .  !  .           !!!!   
               	            $   "           !!!!    	 
   ;  t  3  t     
    
    5!!!!    	 
       w       N    
    5!!!!    	 
              z    
    5!!!!    	 
                    
    5!!!!    	 
	     *    *         
    5!!!!    	 
   5  W  -  W         
    5!!!!     
   b    Z         1     !!!!   
               	           !!!!       
            ;   a       (  c                                    #                  ޽ 	      
   
        ޗ
      J            H  ޾  G     t       ޽                 G     t !      ޽       ޾        ޾  .'  ޘX               ޳  Ϥϖ   % @`P  `P!  &v `P&`P&fP `P-`P.P. `P$E&`P.P `P R`P$.+`P!Y                                 N                     
    5!!!!    	 
   %               
    5!!!!       !!  !!!!U  !!!!  !!    !!!!       !!  !!!!  !!!!  !!!!  !!!!  !!    !!!!      
   #                 !!!!   
            "   #               !!!!       !!  !!!!)   !!    !!!!       !!  !!    !!!!       !!   !!!!  !!!!  !!!!  !!    !!!!            !!!!       !!  !!    !!!!       !!  !!    !!!!    	    
  a  
  a     
    
    5!!!!    	      j    j         
    5!!!!    	               Z    
    5!!!!    	                  
    5!!!!       !!  !!!!  !!    !!!!       !!  !!!!  !!    !!!!       !!  !!!!  !!    !!!!       !!  !!!!  !!    !!!!       !!  !!!!  !!    !!!!       !!  !!!!  !!    !!!!       
            !!!!       !!  !!!!)   !!    !!!!       !!  !!    ;i   a   C   9    5    @      W     }  g          D   f        )            6        H                              &          E                                                                          [                                            B	  u                   
       1            G      t .      ޼   G         G   t  t    ޿	         t    ޼	   F
   F     ޾  G      t `      ޾  G      t @      ޾  G      t        ޾  G      t !   @   "   ޼         5      9   5      9   9   t )   5   9   9   5   9   e    9             G      t 3   5   ޿   5      G      t 9   K   <         F      ?      K      A         K   C          F!      F   ޿   K   H   ޾   F"   (   J   ޿      F"   G#   t  K$   O   ޾   F%   P   Q   &      F%   6   T   ޿   '       G(   t     F%   &K)   \   ޾   F*      ^   ޿      F*   K*   a   ޾   F+      c   ޿      F+   K,   f   ޾   F-   (   h   ޿   5      F-   9-   K   m   .      F/   $   p   ޿   e   0   f    K   t   1      F/   $   w   ޿   e   2   f    K   {          ޼3   k   K4   e       ޿   5   M޿   6   M޿   7   M޿   8   M޿   9   M޿   :   M޿   ;   M޿   <   M޿   =   M޿   	>   M޿   
?   M޿   @   M޿   A   M޿   B   M޿   C   M޿   D   M޿   E   M޿   F   M޿   G   M޿   H   M޿   I   M޿   J   M޿   K   M޿   L   M޿   M   M޿   N   M޿   O   M޿   P   M޿   Q   M   ޼R   R   k   dt    ޼3   k	   KS   ޼3   GT   	   t GU   k
   x ޫ  V   3   FW   FX   *      ޼Y   Y   3   FW   FZ   t    :               5   [   9      9\   x      ]   3   FW   FX   *      ޼Y   Y   3   FW   FZ   t    :               5   ^   9      9\   x      _   3   FW   FX   *      ޼Y   Y   3   FW   FZ   t    :               5   `   9      9\   x      a   3   FW   FX   *      ޼Y   Y   3   FW   FZ   t    :              5   b   9      9\   x 	    c   3   FW   FX   *     ޼Y   Y   3   FW   FZ   t   :              5   d   9      9\   x      e   3   FW   FX   g     ޼Y   Y   3   FW   FZ   t 
L0@6   #  ޼         5   f   9      9\   t (  ޘX   (     ޳  ޼         5   g   9   5     G#   t  9h   9   x ϖ1    `P P [P#P)K`P P(`P `P P 8P LP MP Z*%/P)f`P%&&*
 `P P - P # 6 * P. )P*
P         `P+`P   `P+`P--......!.....!................`P'`P P)v`P  M P/P) 6`P P @**P nP @**P `P @**P dP ?**P bP @**P jP C**P L+`P *%+P-P*KP        K               5!!!!    	  
                 
    5!!!!    	  
    !    !         
   !!               b    
    55!!!!    	  
  !  "  !  "          
    5!!!!    	  
  "  1$  "  1$     "    
    5!!!!       !!  !!    !!!!      
   G$  .  ?$  .       $     !!!!               !!!!      `  S$  -  K$  -       $     !!!!               	         "   #      l   i             !!!!       !!T  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!    !!!!       
            !!!!       
            ;K   a                             L          7       T                        E           C   .                     g    S           U                                     
                            7     	               ޿ 	         t   P      ޾  F                   ޾  F      	       	     	                     K                                   	   K   ޿ 	         t   ޿ 	   
      t   ޫ    F   G      t G   t HG      t H  ޾  F   G      t   ޾  G   t  G      t   ޾  F   G      t   ޾  G   t  G      t   ޼         t   5     9     F   9     F   9     F   9     F   9     9     9     ޾  F
   F   HF   G      t G       t 	  ޾  G!   	       x ޘ(   I      ޳  ޼"     K#   ϖK    K            M   $     N   o   O      %   K   &   '   F(   F)   F*   4   W       +   t 
  ޼,   ,   
  -   x ޖ[    [            ]   .     ^      _      /   K   a         o  c      0   K   ޿ 	         t   ޿   F1   G2     F3   t B   o         F3   (   r   ޿   F1   G4     F3   t w   ޿   F1   G2     F5   t B   ~         F5   (      ޿   F1   G4     F5   t    ޿   F1   G2     F6   t B            F6   (      ޿   F1   G4     F6   t    ޿   F1   G2     F7   t B            F7   (      ޿   F1   G4     F7   t    ޿   F1   G2     F8   t B            F8   (      ޿   F1   G4     F8   t    ޿      F1   G       t              K9      :      o        ;   K   ޿ 	         t   ޿   F1   G2     F3   t B            F3   (      ޿   F1   G4     F3   t    ޿   F1   G2     F5   t B            F5   (      ޿   F1   G4     F5   t    ޿   F1   G2     F6   t B            F6   (      ޿   F1   G4     F6   t    ޿   F1   G2     F7   t B            F7   (      ޿   F1   G4     F7   t    ޿   F1   G2     F8   t B           F8   (     ޿   F1   G4     F8   t   ޿      F1   G       t            K9     <              =   K     >              ?   K   ޿   @   A         A      !      !  K9   ޿ 	   B      t   ޾  4   &  C     FB      )  ޿   D   K9   +  +      E   t JF      /     G   K   1  H         3  ޿   I   K   5  ޘ(   5     ޳  ޼"     KJ   ϖ7  % $+`P*`P*`P P    
`P   &3`P #`P $`P P(`P P-"`P P,P P*`P P(`P+P/
P(`P P(`P+P/
P(`P/P(`P%)....).`P $P/P(`P P %+`P `P! &i`P $`P  +`P+P(`P P)`P! &$`P `P   &i`P `P   P( P 4P) P .P) P .P) P .P) P .P)  P  &``P `P   P( P 4P) P .P) P .P) P .P) P .P)  P  &T`P 
`P   &`P `P #* 4`P P(`P    &`P+P `P  a&`P 4+`P P              	             #               	    
    5!!!!     `  -  .  -  .       -     !!!!   
            !!!!       
             ;       E        !                               
 T     6      ޿   G      t       ޿     It  
   ޿   G   x  ޘ(          ޳   ޼      K   ϖ   % -`P P P),P +`P P     a                 T     
    5;                                             k    t  k       F    x ޤ  $`P& 	aP% ZP$P 5;
   a     U                   \                                    k      k      k      k      k      k      k    	  k    
  5	       9       9   e    9      5
   k   9   k   9   k   9   k   9   k   9      5   k   9	     `P+D`P+,`P+/`P+1`P+*`P+-`P+  `P+  `P%** `P%* *7* 	 *   `P%* 	Q 5!!!!     %   T.  5/  L.  5/     .    
   !! .  .  .  .     `.    
    5!!   !!   !!   !!   5!!!!     &   U/  /  M/  /      /    
    5!!!!     '   /  0  /  0     /    
    5!!!!     (   0  9  0  9     y0    
   !!  6  7  6  7     6    
    5!!  7  8  7  8     x7    
    5!!  8  	9  8  	9     8    
    5!!  =9  9  59  9     8    
    5!!!!   5!!!!       
              !!!!      \  z  \  z           !!!!   
            !!!!      Z    \  z  \  z       	   !!!!                        
            !!!!          \  uv  \  uv           !!!!   	                              g      h   "            i   
   j   k      $      #   l             !!!!      
   \  ]  \  ]            !!!!   
              ;       a   ^                                        G      t    ޾   '      ޾   J      	   ޾   H
                 `P/P(	`P Q     
    5!!!!         ]  A]  ]  A]            !!!!   
              ;       a   _                                        G      t    ޾   (      ޾   J      	   ޾   H
                 `P/P(	`P Q    
    5!!!!         Dp  [q  :p  [q       F(     !!!!   
            ;                !  "  #  $  %  &  '  (  )  *  +  _   ,                                                                                                    	      ~   
      x      	   r      s                   
                                                     (Q`P `P%  &`P%  &-`P%  &G`P%  &_`P%  &y`P%  &`P%l&`P%U&`P%>&`P%$&`P%Q     
    5!!!!m   !!!!n   !!!!o   !!!!p   !!!!q   !!!!r    !!!!s   !!!!t   !!!!u   !!!!v   !!!!w   !!!!x   !!!!y   !!!!z   !!!!{   !!!!|   !!!!}   !!!!~   !!!!   !!!!   !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!x   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!       !!   !!!!   !!!!   !!!!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!       !!   !!!!   !!!!t   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!s   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!!!   !!    !!!!   !!!!       !!   !!!!   !!!!   !!!!   !!    !!!!   !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!!!   !!    !!!!   !!!!       !!   !!!!   !!!!u   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!       !!   !!!!   !!    !!!!   !!!!       !!   !!!!   !!    !!!!       !!   !!    !!!!   !!!!       !!   !!!!   !!!!   !!    !!!!   !!!!       !!   !!!!   !!    !!!!    !!!!    !!!!   !!!!   !!!!   !!!!   !!!!   !!!!   !!!!   !!!!   !!!!   !!!!   !!!!   !!!!   !!!!   !!!!   !!!!   ;i      b                                                                                                                     t                        s                                          u                                                 	  
  o                y     {     a           ~               X  K                               @k     k      k     ޾   j   t G    t    j   G      t   ޾     
   j   G      t      j   G      t   ޾        j   G      t      j	   G      t   j
   G      t   j   G      t 
  j   G      t   j   G      t   j   G      t   j   G      t   ޾     ,   j   G      t /     ޾  /   1   ޾     3   j   G      t 6     ޾  O   8   ޾
  ?   :   ޾  /   <   ޾     >   j   G      t A     ޾    j   t   ޾   j   t   j   G      t     G   j   G      t K   	  ޾	     M   j   G      t P     j   G      t   j   G      t S   W   5      9     9        \   ޾   j   t ]   9     ޘ  ^   j   G      t S   b   5      9     9      j   t    h   ޾  h   9     ޘ  i   j   G      t S   m   5       9     9        r   ޾   j!   t s   9     ޘ?  t   j"   G      t S   x   5#      9     9	        }   ޾   j$   t ~   9     ޘ     j%   G      t S      5&   
   9     9           ޾   j'   t    9     ޘg     j(   G      t ?      5)      9     9      j*   t 9     ޘ     j+   G      t ?      5,      9     9      j-   t 9     ޘ
     j.   G      t ?      5/      9     9      j0   t 9     ޘ_
     j1   G      t ?      52      9     9      j3   t 9     ޘ
     j4   G      t ?      55      9     9      j6   t 9     ޘ	     j7   G      t ?      58      9     9      j9   t 9     ޘW	             5:      9      9     9     ޾  ,          K   ޾    K   ޘ0          K   ޾     j;   t K   ޖ        j<   G      t ?      5=      9     9      j>   t 9     ޘ_       ]      5?      9      9     9      9!     9"      j@   t 9     ޘ     jA   G      t 6      5B   #   9     9     9     ޘ     jC   G      t S      5D   $   9     9%      jE   t       ޾     9     ޘ>     
  I      5F   &   9   '   9     9(      jG   t 9     ޘ    jH   G      t ?   
  5I   )   9     9*      jJ   t 9     ޘ    jK   G      t      5L   +   9     9,      jM   t 9     jN   G      t (         K-   ޾  .   K   ޖ!    !    ?   "  5O   /   9     90      jP   t 9     ޘ  (  jQ   G      t ?   ,  5R   1   9     92      jS   t 9     ޘ[  2  jT   G      t ?   6  5U   3   9     94      jV   t 9     ޘ  <  jW   G      t    @  jX   G      t C  ]   D  5Y   5   9   6   9     97        J  ޾   jZ   t K  9     ޘi  L       M  5[   8   9   8   9     99        S  ޾   j\   t T  9     j]   G      t    Y  ޾    K:   [  ޘ  [  j^   G      t I   _  5_   ;   9   ;   9     9<      j`   t 9     ޘn  f    ]   g  5a   =   9   =   9     9>      jb   t    n  ޾  n  9     ޘ  o  jc   G      t S   s  5d   ?   9     9@      je   t    y  ޾  y  9     ޘ  z  jf   G      t S   ~  5g   A   9     9B      jh   t      ޾    9     ޘ0    ji   G      t ?     5j      9     9"      jk   t 9     ޘ      ,     5l   C   9     9     ޘ    jm   G      t N     5n   D   9     9E     ޾           K   ޖ  <           5o     F        G   2       H        I        J     9     ޾           K   ޖ       jp   G      t S     5q   K   9     9L      jr   t      ޾    9     ޘ8     5s      jt   t 9       ju   t 9     ޖ    F        jv   G      t        jw   G      t F         F        M     K   ޾    KN   ޘA         F        O     K   ޾    KP   ޖ    F        ޾             K   ޖ         F        jx   G      t   q         F        Q     K   ޾    KR   ޾    F        ޾   jy   t   K   ޖ    F   #     ޾       ޾  F0     -         KS   ޾  C   K   ޘ7      F        ޾    <           M޾    KT   ޾  U   K   ޘ       -         KV   ޾  W   K   ޘ       -         KX   ޾  Y   K   ޘl       -         KZ   ޾  [   K   ޘ6       (         K\   ޾  ]   K   ޖ  ^     ޾  FZ   )           jz   t t   ޘ      F   !        j{   t   ޘy  	    FV   >        j|   t   ޾  G_   j}   `   t   ޘ-      >        j~   t   ޾  G_   j   `   t   ޘ       !        j   t   ޘ       F9   !        j   t   ޘ       F7   !        j   t   ޘ^       F<   !        j   t   ޘ/       F>           j   t   ޖ        !      Ka   ޖ"    FZ       %  ޾  Gb   `   t H(    ޾	     )  ޾  q   *  ޾  H   \   ,  ޾  4   -  ޾  "   /  ޾     1  ޾  2     3  ޾  F0   4     5      Kc   ޘ   7       8  ޾  F   o   :  ޾  d   Z   <  ޾  K   =  ޾  <   >  ޾  F7   (   @  ޾  F9      B  ޾  F<   C     D      Ke   ޖF    F   6  H  ޾  F      J  ޾  F   
L    M  ޾  F      O  ޾  F   Q    R  ޾  F%      T  ޾  F   V    W  ޾  F"      Y  ޾  F   [  w  \  ޾  F      ^  ޾  F   `  G  a  ޾  F,      c  ޾  F   e    f  ޾  FE      h  ޾  F   j     k  ޾  F      m  ޾  F   
o     p  ޾  FT   <   r  ޾  Fa   (   t  ޾  Fa   Gb   `   t Hy  b   z  ޾  F7      |  ޾  F   
333333$@~  +     ޾  FB        ޾  F              Kf   ޘ      F        ޾  F   
  @    ޾  F"        ޾  F         ޾  F,        ޾  F          ޾  FE        ޾  F          ޾  F        ޾  F   
       ޾  FT   <     ޾  Fa   (     ޾  Fa   Gb   `   t H  +     ޾  FB        ޾  F              Kg   ޘ         Kh   ޖ      I`P*P*P(`P P(
`P P-
`P P(
`P P-
`P P(
`P P(
`P P(
`P 	P(
`P P(
`P P(
`P P(
`P P-
`P  P-
`P    P-
`P*P($`P*P(`P 
P.	 P.
`P P-
`P P(`P 	P-	`P%** P 6`P P-	`P%***P 3`P P-	`P%*$* P 5`P 	P-	`P%** P ,`P P-	`P%** P 0`P P-	`P%***P 2`P 	P-	`P%**
*P .`P P-	`P%***P 1`P 
P-	`P%**	*P /`P P-	`P%***P 1`P P-	`P%**
*P 1`P.`P%**/`P.`P/`P `P/	`P.
P '`P P-	`P%***P *`P.`P%*****	*P 4`P P-	`P%**	 `P P-	`P%**
*P )`P.`P%****P 1`P P-	`P%***P (`P P-	`P%**
*P-8`P (P-	`P/`P `P.`P%***P #`P P-	`P%**
*P (`P P-	`P%**	*P '`P P P 	`P%*** P .`P.`P%*** P (`P P  `P P-	`P%****P %`P.`P%****P 6`P P-	`P%***P 4`P P-	`P%***P 4`P P-	`P%**	*P 4`P.`P%* `P P-	`P%*/`P.`P `P.`P% 6`P.`P `P P-	`P%***P '`P%*P(*P `P P `P P-	`P `P `P `P `P `P `P P 	`P `P/
`P P `P `P/`P `P `P/`P/`P `P.`P/`P `P.`P/	`P `P.`P/`P `P.`P/
`P  8`P*`P `P/P#P /`P `P*P 4`P `P*P("`P P `P.`P*P((`P P `P.`P*P )`P 	`P*P +`P `P*P -`P `P*P "`P 	`P*P-"`P.`P `P P/`P ! `P `P @`P `P   P L`P `P   P +`P `P `P$Q 5!!!!         v  v  v  v     .    
    5!!!!         v  jw  v  jw     .    
    5!!!!         tw  x  jw  x     v/    
   !! w  1x  w  1x     /    
   !! w  %x  w  %x     /    
    55!!!!!!!!!!!!	   5!!!!         x  y  x  y     0    
    5!!!!      
   y   z  y   z     1    
    5!!!!     \   z  qz  z  qz     2    
    5!!!!     ]   z  z  z  z     2    
    5;	   ^   _   `   a   b   c   d   e   f      4                                   k      k      k      k      k      k         ޿           .          F      	      	      	      	   t    ޿   k   K   ޿      K   ޿      K   ޿   k   K   ޿      K   ޿     `P' `P& P) `P  k   ) %Q 5;   [                                           k    t  K    ޤ  `P) >P)P    5!!!!       z  ^ z  ^     2     !!!!   C   Q   ,            !!!!    ]   !!-  !!!!.  !!!!/  !!!!0  !!!!1  !!!!2  !!!!3  !!!!4  !!!!5  !!!!6  !!!!7  !!!!8  !!!!9  !!!!:  !!!!;  !!!!<  !!!!=  !!!!>  !!!!?  !!!!@  !!!!A  !!!!B  !!!!C  !!!!D  !!!!E  !!!!F  !!!!G  !!!!H  !!!!I  !!!!J  !!!!K  !!!!L  !!!!M  !!!!N  !!!!O  !!!!P  !!!!Q  !!!!R  !!!!S  !!!!T  !!!!U  !!!!V  !!!!W  !!!!X  !!!!Y  !!!!Z  !!!![  !!!!\  !!!!]  !!!!U   !!!!^  !!!!_  !!!!`  !!!!a  !!!!b  !!!!c  !!!!d  !!!!e  !!!!f  !!!!g  !!!!h  !!!!i  !!!!j  !!!!k  !!!!l  !!!!m  !!!!n  !!!!o  !!!!p  !!!!q  !!!!r  !!!!s  !!!!t  !!!!u  !!!!v  !!!!w  !!!!x  !!!!y  !!!!z  !!!!{  !!!!|  !!!!}  !!!!~  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!    !!!!       !!  !!!!  !!!!  !!!!  !!!!  !!    !!!!    '   !!  !!!!  !!!!   !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!    !!!!  !!!!  !!!!  !!!!   !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!    !!!!       !!  !!!!  !!!!   !!!!   !!!!  !!!!  !!    !!!!       !!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!    !!!!       !!  !!!!  !!    !!!!       !!  !!!!  !!    !!!!       !!  !!!!  !!    !!!!       !!  !!!!  !!    !!!!       !!  !!!!  !!    !!!!       !!  !!!!  !!    !!!!       !!  !!!!  !!    !!!!       !!  !!!!  !!    !!!!       !!  !!    !!!!       !!  !!!!  !!!!!   !!!!  !!!!  !!!!  !!    !!!!       !!  !!    !!!!       !!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!    !!!!       !!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!    !!!!      !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!  !!     !!!!   	   !!8   !!  !!  !!  !!  !!  !!  !!  !!     !!!!      !!  !!  !!  !!  !!  !!  !!  !!  !!  !!   !!  !!  !!  !!  !!     !!!!      !!  !!  !!  !!  !!  !!  !!  !!  !!	  !!  !!
  !!     !!!!            !!!!     
/               >     !!!!   
      	              !!!!    	    j  Ǉ  b  Ǉ     l?   
 
    5;   W                              4                              $         G      t    ޿      K   ޿    K   ޿   a            J         F            k   K               K      ޿     K	   ޼    G
      t HG      x ޿     >`P 	P)`P  .
     . 	P  P$%Q   5!!!!     
0   (  щ     щ      *@     !!!!   
      	           !!!!    	  s  $           &A   
 
    5;   W     t  u    .    v  w  x  y  z  {  |        }        8  ?                              -         G      t    ޿      K   ޿  F   F   .            K   ޿   	   K
               K      ޿      K   ޿   a            J         F            k   K                K   #   ޿     K   ޼    G      t HG      x ޿     @6`P 	P)`P   !  !      .	 	P  P$%Q    5!!!!       !!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!!!  !!    !!!!    	 
             A  `   !!  X    P       ZJ    
   !!    6  ْ  6     J    
    5!!
   5!! ]    U       _M    
   !!             N    
    55!!   H    H     O    
   !!	     ȗ           O    
   !!  V    N       XP    
    5!!
   5!!  	           Q    
    5!!
   !!   5!!             Q   
 
    5!!    i  ښ  i     R    
    5!!!!!!!!!!!!)   !!*   !!+   !!,   5!!!!    	 
    E    E     T    
    5!!!!    	 
  b  A  Z  A     dU    
    5!!!!    	 
  V    N       XV    
   !!	  
     +    +     V    
   !! W  Р  O  Р     YW    
   !!    ʠ    ʠ     X    
    55!!!!!!!!!!   !!   !!   55!!!!    	 
  ɢ  ;    ;     Z  `@   !!	  -   }  9  f  9     [    
    5!!	  .   W    9       Y\    
    5!!	  /   Ѥ           \    
    5!!	  0   /  ]    ]     1]    
    5!!	  1   p    ]       r^    
    5!!	   2   ٦           ^  `   !!             _    
    5!!  ӧ  Y  ˧  Y     _   
 
    5!!  s    k       u`   
 
    5!!  è           `   
 
    5!!!!!!!!!!!!!!!!!!!!!!!!!!!!3   5!!	  4   O    ?       Qh    
    5!!	   5              h    
    5!!	  6     $    $     h    
    5!!            j    
    5!!   Q    Q         
   !!    K    K         
    5!!
   !!   !!	   5!!  8    0       :    
   !!             É    
    5!!
   5!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!7   !!8   !!9   !!:   !!2   !!-   !!0   !!;   5!!!!    	 
  W  r  O  r     Y      !!	  .     +    +         
    5!!	  <   H    +       J    
    5!!	  0                  
    5!!	  1              ʍ    
    5!!	   2   1  
    
     3  `   !!    '  
  '         
    5!!!!!!!!!!!!!!!!!!!!!!!!!!!!3   5!! h    `       j    
   !!  :    2       <    
    5!!
   !!   !!	   5!!!!!!!!!!!!!!!!!!!!!!!!:   !!7   !!9   !!=   !!2   !!0   5!!!!    	 
                   !!	  .     _    _         
    5!!	  >   z    _       |    
    5!!	  0              Т    
    5!!	  1     >    >         
    5!!	   2   ]    >       _  `   !!             ĥ    
    5!!                  
    5!!!!!!!!!!!!!!!!!!!!!!!!!!!!)   !!3   5!!                
   !!             ˲    
    5!!
   !!   !!	   5!!!!!!!!!!!!!!0   !!2   !!:   !!9   !!7   5!!!!    	 
      	           
    5!!!!    	 
  +    #       -    
    5!!!!    	 
                 
    5!!!!    	 
    }    }    
  `   !!  d    \       f    
    5!!              
    
    5!!  Y  Q     [    
    5!!             
    5!!!!!!!!!!!!!!!!!!!!!!!!)   5!!!!    	 
             
   !!             
    5!!
   !!   5!!!!    	 
             
    5!!!!       !!  !!!!  !!!!  !!!!  !!!!  !!!!  !!    !!!!    	 
           `   !!             
   !!             
    5!!
   5!!            
   !!   A  A        
    5!!  [  S     ]    
    5!!             
    55!!            
    5!!!!!!!!!!!!!!!!?   !!@   5!!!!    	 
  - # % #    /  `   !!   b  b       
 
    5!!             
   !!             
    5!!
   5!! ?   7      A    
   !!  - j % j    /    
    5!!    |         
    5!!             
    5!!	   5!! ! # ! #        
   !!  " " " "       
 
    5!!!!!!!!!!   5!!!!!!!!!!!!!!!!!!?   !!A   5!!!!    	 
  # ,* # ,*      `
   !!  _' ( W' (    a    
   !!  ' =( ' =(        
    5!!
   5!!  ) ) 
) )        
    5!!!!!!!!!!!!!!!!?   5!!!!    	 
  J* 2 B* 2    L  `   !!  60 1 .0 1    8    
   !!  0 1 0 1        
    5!!
   5!!!!!!!!!!!!!!!!!!!!!!?   5!!!!    	 
  2 0< 2 0<      `   !!  i7 9 a7 9    k    
   !!  8 9 8 9       
 
    55!!  : l; : l;        
    5!!  ; .< ; .<        
    5!!!!!!!!!!!!!!!!?   5!!!!    	 
  I< D A< D    K  `   !! 	= = = =        
   !!  e= = ]= =    g    
    55!!  FA A >A A    H    
    5!!  "B D B D    $    
    5!!!!!!!!!!!!!!!!?   !!B   5!!!!    !   !!  !!!!  !!!!  !!!!   !!!!!  !!!!"  !!!!#  !!!!$  !!!!%  !!!!&  !!!!'  !!!!(  !!!!)  !!!!*  !!!!+  !!!!,  !!!!-  !!!!.  !!!!/  !!!!0  !!!!1  !!!!2  !!!!3  !!!!4  !!!!5  !!!!6  !!!!7  !!!!8  !!!!9  !!!!:  !!!!;  !!!!<  !!!!=  !!    !!!!     
   AD K 9D K     C     !!!!              !!!!    	 S  K K K K       
    5;>      J   T  U  V  W  X  Y  Z  [  \  ]  ^  _  `  a  b  c  d  e  f  %  g  h  i  j  k  l  m  n  '  3     !  "  #  $  %  &  '  (  )  *  +  ,  -  .  /  0  1  2  4  5  3  6  7  8  9  :  ;  <  =    {                             }    ]    G    t                                	        
                           	        
            $        (        ,        0        4        8        <        @        D        H        L        P        T        X        \        `        d         h  !      l  "      p  #   {  #     F   F    &     F   F!   )     F   F"   ,     F   F#   /     F   F$   2     F   F%   5     F   F&   8     F   F'   ;     F   F(   >     F   F)   A     F   F*   D     F   F+   G     F   F,   J     F   F-   M     F   F.   P     F   F/   S     F   F0   V     F   F1   Y     F   F2   \     F   F3   _     F   F4   b     F   F5   e     F   F6   h     F   F7   k     F   F8   n     F   F9   q     F   F:   t     F   F;   w     F   F<   z     F   F=   }   k     N`P,P/`P/ &`P/ V&`P/ &`P/ &N`P/ &`P/ z&`P/ A&`P/ &;`P/ &y`P/ &`P/ @&`P/ &P`P/ &`P/ q&`P/ 7&`P/ &?`P/ &`P/ &`P/ B&`P/ &<`P/ &t`P/ &`P/ O&`P/ &-`P/ &m`P/ &`P/ N&`P/ &@`P/  &`P/&`P%KQ 5!!!!    	 
  L T L T       
   !! yM M qM M    {   
    5!! O HO N HO       
    5!! P #Q P #Q       
    5!! R  S R  S    
   
    5!! S 7T S 7T       
    5!! OT T GT T    Q   
    5!!!!!!!!!!!!!!   5!!!!     
  T V T V          !!!!   
      	                       !!!!       
            ;     3        L    M  N      O  P  Q  R  x  w  d                           (     e       ޽        e           ޗ       J             H  ޿   F   G     Ht   ޼   F   F   G     w   ޫi     G     v   ޾  !      ޾   G     t       ޿   G	   
        H%x ޘE         ޳  ޿   G	           H%   %  %x ϖ$     .'  ޘ%      G      x ޤ `P*`P  `P&fP `P-`P P(`P P-`P P(`P P- 
P 5+`P 
P*.`P  )`P 
P$P       8              i          ,   1    
    5!!!!     
   ,V W $V W      .    !!!!   
      	           ;   .        o    p    q  r  0  c  R  L    D                             '        F      K   ޿   G           %x ޽ )         G         x ޘ[         F    F     %   %   ޿   G      	      %x ޿   G
      x ޖ      G      F    F   t *   !   ޿   G   x  ޿   G   t  '   ޤ 7`P  
P$#-`P 
P.Q`P :`P 
P$< 
P)`P 
P.+,
P$,
P)P      
    5!!!!     
!  W X W X          !!!!   
              ;   -  .          ]                                        F      H      <      ޿   F      K   ޿   G           %t    ޤ `P `P    
P);P   
    5!!!!    	 
"  X 3Y X 3Y       
    5!!!!    	 
#  FY tZ >Y tZ    H   
    5!!!!    	 
$  Z Z ~Z Z       
    5!!!!    	 
%  Z ^ Z ^       
    5!!!!    	 
&  ^ ` ^ `       
    5!!!!    	 
'  ` a ` a       
    5!!!!    	 
(  a wb a wb       
    5!!!!    	 
)  b c b c       
    5!!!!    	 
*  c Cd c Cd       
    5!!!!    	 
+  `d d Xd d    b   
    5!!!!    	 
,  e f d f       
    5!!!!    	 
-   g pg f pg       
    5!!!!    	 
.  g g }g g       
    5!!!!    	 
/  g [h g [h       
    5!!!!    	 
0  rh h jh h    t    
    5!!!!    	 
1  h 5i h 5i        
    5!!!!    	 
2  Mi j Ei j    O!   
    5!!!!    	 
3  j j j j    "   
    5!!!!    	 
4  j :k j :k    "   
    5!!!!    	 
5  Ok l Gk l    Q#   
    5!!!!    	 
6  1l l )l l    3$   
    5!!!!    	 
7  l m l m    $   
    5!!!!    	 
8  m n m n    %   
    5!!!!    	 
9  'n kn n kn    )&   
    5!!!!    	 
:  n n ~n n    &   
    5!!!!    	 
;  n p n p    &   
    5!!!!    	 
<  p r p r    (   
    5!!!!    	 
=  s u s u    +   
   !! t Tu t Tu    ,   
    5!! cu u [u u    e-   
    5!!   !!   5!!!!    	 
4  u a u a    -   
    5!!!!     
5    w       7    !!!!      	   
                          !!!!       
            !!!!       
            ;   _       
                  a             .                 W         b  u                    
       L    '           	   ޽ 	      
   C      G      x ޿   G           %   % %x ޘA         ޳  ޿   G      	     %   % %x ϖ        
          ޼       t               ޽ ^      ޼          G      G   t   )<)<))%x       G   t  %  -   ޿   F   F   U   1      F   F   G      t J   $   9         F   F   %  =   ޽     % %  %  %   %  ޫ3        K   ޿   G           %x ޘ8   H      ޳  ޿   G           %x ϖL    7`P% `P P$ 
P \+`P 
P Z`P%
 P,!`P*`P*`P.*P P P$$ P. <P ? `P/ 
P N+`P 
P*HP      y   4      1  +           .   C             3     
    5!!!!     
6   c  c      :    !!!!      
   	                    !!!!       
            !!!!       
            ;   _                 W             g                                     )                  ޽    g            G     t ;         ޳  ޿   G           %x Ϥϖ             %   ޫ      F	   G
      t     ޗ       J             HG   t      G      t 8              G      J     J   t t $     .'  ޘl%   ;   %      ޳  ޿   G           %x Ϥϖ)    :`P% `P/P# .+`P  
P$E!  `P  `P P(`P&fP `P P(
`P P.`P P#P#  &1`P e`P!j.+`P  
P$>!Y      N   .       z             o  .                       .                                   
    5!!!!    	 
7  } ͅ u ͅ    <   
    5!!!!    	 
8   S  S    =   
    5!!!!     
9  o = g =      q?    !!!!   
      	              !!!!w   !!!!x   !!!!y  ;     z    {  |  }  ~      a          3                                      F             ޽       ޽  G   j      t G   j      t   ޼        %   %   G      t           	   1      
   
     HG   j      t t     ?}`P/`P  P P'`P #P(`P +P#P(+Q      
    5!!!!     
:  X z P z      Z@    !!!!   
      	                 !!!!       !!  !!!!W  !!!!X  !!    !!!!       !!  !!!!W  !!!!X  !!!!  !!    ;     9             !  "      #  $  .    %    W  X  S   6  b  c  &  '  (        p  s                      	       I    -        G        t ^         G        t    ޿   G        t   ޿   G        t Y         G        t    ޿   G        t   ޿   G        t      ޾         ޾        ޾  y      ޿   G	   
        %   %   %   %  %x ޿   F   G      5     9     9      9   t ,           .      G      t   ޿   G     t 3   5   ޿   G     t    9        :   s   ;   ޿   F   G      5      9     9      9      F   F   F      G      G   9   t I   ޖI    @k`P P.$ P(% P(# 
P-& P(& P($ 
P-% 
 
P$A 8)))P)J `P 
P(`P 
P P Q*)) P.yP    
    5!!!!     
;    i  i     C    !!!!   
      	          !!!!      !!)  !!*  !!+  !!,  !!-  !!.  !!/  !!0  !!1  !!2  !!2  !!2     !!!!    	  3  !       #G   
   !!          "H   
   !!  U  M     WH   
    5!!
   5!!  Ԑ  ̐     H   
    55!!!!       
            ;   9  4  =  5  W  6  <  7  8  Y       9     D                                        ޿  G       t       ޿  G      x      G   t              G   t     w      5   i   G      t    ޼	   	   k    x ޘ8         ޳  ޿  G
           %x ϖ    C`P P-#`P 
P$ P *P `P  P)`P 
P  +`P 
P*7P        +              5   5!!!!      
<   ő w ő      I    !!!!               ;   6  .                                               G       F   F   t  I`P P#1Q   
    5!!!!     
=  ޑ $ ֑ $      I    !!!!   
            ;   :  U   ;  <  =  >  ?  @  A  B      C  5  .    6  D  E  F  G  H  E   I  J  8  W   f  4      e                              >    7                G   t      t G      x ޿   G   t      t G      t G      	   x ޿   G
         x ޿   G      F   F       x                  ޿   G   t      t G      x ޿   G   t      t G      t G         x ޿   G
         x ޿   G      F   F       x ޼   G      x ޼      G      F      t K   >   ޤ I`P 
,
P)P/P$@,
P)P/P P$ 
P$5 
P L,
P)P/P$:,
P)P/P P$ 
P$7 
P$@ P$O P.0P   
    5!!!!      
>  :  2       <M    !!!!   
             ;   6  .    c  ?  `                                         G       F   F   t    ޿   G      t       ޿   G      t    ޾    ME`P 
P(2`P  
P P)$Q   
    5!!!!    	 
?  ҕ 8 ʕ 8    M   
    5!!!!      
@  O ݖ G ݖ      QN    !!!!   
             ;   6  .            a   n                                         G       F   F      F   F   F   F   t    ޾            G   t               NZ`P 
P(f`P P 	Q    
    5!!!!      
A   y  y      N    !!!!   
             ;   6  .            a   n                                         G       F   F      F   F   F   F   t    ޾            G   t               N`P 
P(``P P 	Q    
    5!!!!    	 
B         O   
    5!!!!    	  
C   Ԙ  Ԙ    P   
    5!!!!    	 
D         P   
    5!!!!      
E   j  j      R    !!!!   
             !!!!       
            ;   .          6          	     3                                 d      F    F   F      ޼   G      G      F      F   t t       e       8         ޳  ޿   G   	   
     %x ϖ   e    %R`P ,`P P#P   .+`P 
P*6`P%Q      q   +              d     
    5!!!!     
F    ~       S    !!!!   
              ;   .      5          O                                        F    F   F      ޿   G      F      G     t    F   x ޤ S`P ,`P *P-P$7P     
    5!!!!    	 
G         T   
   !!  & #  #    (U   
    5!!   !!   !!   !!   !!   5!!!!    	 
H   F  F    V   
    5!!!!      
I  ^ $ V $      `W    !!!!   
             !!!!       
            ;   .          6               3                                 d      F    F   F      ޼   G      G      F      F   t t       e       8         ޳  ޿   G   	   
     %x ϖ   e    %Wm`P (`P P#P   .+`P 
P*2`P%Q      q   +              d     
    5!!!!    	 
J  <  4     >X   
    5!!!!    	 
K  ʠ 9   9    X   
    5!!!!      
L  U O M O      WZ    !!!!   
      	             ;   I    ~    A    @    S   x  J     F                            !         G    t     ޾            J            e      ޗ	      J   q         G   t    ޾  F      G   t  K   ޾  F      G   t  K   ޾  G     x ޘ      G	     x ޿   G
   e    x ޖ!    Z``P,
P(`P  `P*fP `P+P(`P P) P)/P.`P 
P$ 
P)P        G        
    5!!!!      
M  f  ^       h[    !!!!               ;   E   .                                                  F   F   H [k`P -Q   
    5!!!!    	  
N   +  +    [   
   !!	  
     ߣ     [   
    5!!	      l  l    \   
    5!!!!!!   !!   5!!!!      
O  F  >       H_    !!!!   
             !!!!       
            ;   .          6               3                                 d      F    F   F      ޼   G      G      F      F   t t       e       8         ޳  ޿   G   	   
     %x ϖ   e    %_U`P +`P P#P   .+`P 
P*6`P%Q      q   +              d     
    5!!!!    	 
P  .  &     0`   
    5!!!!    	 
Q  ¨       `   
    5!!!!      
R  2  *       4a    !!!!   
      	             ;   O    ~      4  )     A    @    S   x  P  G  P                            )         G    t     ޾            J           e      ޗ	      J            G   t    ޾  G      t 1      ޿   G     F     F   t      ޾  F      G   t  K	   ޾  F      G
   t  K   ޾  G     x ޘ9"      G     x ޿   G   e    x ޖ)    a=`P,
P(`P  `P*fP `P+P(`P P %P-* P) P)/P.`P 
P$ 
P)P        G        
    5!!!!    	 
S   ت  ت    b   
    5!!!!    	 
T   ?  ?    b   
    5!!!!    	 
U  a  Y     cc   
    5!!!!    	 
V         c   
    5!!!!      
W            "d    !!!!   
             !!!!       
            ;
   .      6      a       K     *                                 U      F    F   F      ޿   G      F      F   t             8         ޳  ޿   G      	     %x ϖ      %d/`P -`P P x.+`P 
P*7`P%Q      b   +              U     
    5!!!!      
X   ԭ  ԭ      e    !!!!   
             !!!!       
            ;   .          6               3                                 d      F    F   F      ޼   G      G      F      F   t t       e       8         ޳  ޿   G   	   
     %x ϖ   e    %e`P .`P P#P   .+`P 
P*8`P%Q      q   +              d     
    5!!!!     
Y   l  l      e    !!!!   
              ;   .      5          O                                        F    F   F      ޿   G      F      G     t    F   x ޤ e`P .`P *P-P$7P     
    5!!!!    	 
Z         f   
   !!         g   
    5!!   !!   !!   !!   5!!!!    	 
[  2 б * б    4i   
    5!!!!    	 
\    ޱ     i   
   !!	      .  .    i   
    55!!!!    	 
]    C  C    k   
    5!!!!      
U   S u K u      Uk    !!!!               ;   .                                              F    F    kX`P/Q      
    5!!!!    	  
^         k   
    5!!!!    	 
_  ϳ i ǳ i    k   
    5!!!!    	 
`    w     l   
    5!!!!     
a   ƴ  ƴ      l    !!!!   
            ;                                                         l`P  Q   
    5!!!!     
b  ش  д       l    !!!!   
            ;   a   1                                         $                        l`P  Q   
    5!!!!     
c   5  5      m    !!!!   
            ;   b                                           G      t  m`P /P$Q     
    5!!!!     
d  M & E &      Om    !!!!   
              ;                      :                                                                  F   -            F   F   G     w       G     t    ޾      F                mV`P%
 `P!  &X`P% `P 3P$L&`P/P(`P %Q   
    5!!!!    	 
e  7 Զ / Զ    9n   
    5!!!!      
f   G ݶ G     n    !!!!
   
      	                     Q          
   !!!!            !!!!            !!!!            ;         d    f  O  x                 
          /      	  ޾	  H      5          ޾	  J             C      ޾    ޾	    H   
   5        ޾  .'  ޖ   ޗ            	    H   q        [   \]T     ^     G     t (         H  ޾       H                -      ޾        ޿   G     t             '   !           $     %      &        &   5   '     ޾       G         t M)   +        -   ޾      M.   ޖ.   ޘ.   _.     .'  ޘU/     &n`P `P&`P.`P&`P% )  fP `P  `P `P/P-`P. `P*	`P P    P. T `P   `P$Q             \                   5!!!!    	 
g  W  O     Yp   
    5!!!!    	 
h   y  y    q   
    5!!!!    	 
i   ;  ;    q   
    5!!!!    	 
j  J d B d    Lr   
    5!!!!    	 
k  |  t     ~r   
    5!!!!    	 
l         r   
    5!!!!      
m  Ļ Ƚ  Ƚ      s    !!!!   
             ;   E   [   f   .        ~                              .                             D     1     F            F   G      F   F   F   t       F   F   F        ޾   F   (         F   F      K   Y         F   (         F   F      K   #         F   F   	   K   #   ޾   F
   (   %      F   F      K   '   )      F   F      F   K   .   ޿   F   F      F   K   3      F   F   F   [   9   ޿   F   F      F      >      >   K   ޿   F   F      F   K   D   ޖD    s`P `P P(-`P %,   U + # - /P   
    5!!!!    	 
n   Y ޽ Y    u   
   !!  & x &    v   
    5!!   !!	   !!   !!   !!   5!!!!    	 
o  v  n     xw   
   !!  Q  I     Sx   
    5!!   !!	   !!   !!   5!!!!    	 
p         x   
   !!  x U p U    zy   
    5!!
   !!   !!	   !!   !!   5!!!!    	 
q         z   
   !!  ^  V     `{   
    5!!
   !!   !!	   !!   5!!!!    	 
r   U  U    	|   
    5!!!!    	 
s  x % p %    z}   
   !!         ~   
    5!!
   !!   !!	   !!   !!   5!!!!    	 
t  G  ?     I   
   !!  }  }       
    5!!   !!	   !!   !!   5!!!!    	 
u         ڀ   
    5!!!!    	  
v            
    5!!!!    	 
w            
   !!  C  C       
    5!! R  J     T   
    5!!   !!   5!!!!     
x   }  }          !!!!   
      	              ;     H      S   y  z  6  E                            $             ޽  J            e       e        ޗ	       J    x             HF   F   %         G       Hx          G       Hx    ޾  .'  ޘz      J          ޿   G      t      J       !   ޿   G     t $   ޖ$    `P.  `P*`P*`P&fP `P P P)`P 8`P P) P.P          B        
    5!!!!    	 
y            
   !!  c  c    ۇ   
    5!! r  j     t   
    5!!   !!   5!!!!    	 
z         ш   
   !!           
    5!!        Ռ   
    5!!   !!   5!!!!    	 
{  / L ' L    1   
    5!!!!    	 
|  b  Z     d   
    5!!!!    	  
}   L  L       
    5!!!!     
~   j  b      l    !!!!              !!!!    	             
   !!  L  L       
    5!! _  W     a   
    5!!   5;   m    5                                 	        F    F         ޿   F    k   K   	   ޤ p`P  #P    5!!!!      
                !!!!   
             !!!!      `               !!!!               ;	   .        ~      :  ;     +                                       F       G   t K   ޿   G      F    F   x ޿   G   x  ޿   G   x  ޿   G   x  ޿   G   x  ޤ `P P) 
P$.,
P$,
P$,
P$,
P$P     
    5!!!!            ;@   .  E   F   a    9  b  c  ?  c  >  a  R     d        e  f  I   3  !       W   f  g  h  i  j    k    /    l  l  m  n  o  ~      :  ;       p  q  r  m  s      t  u          Y     v  =                                       F       F   K   ޿   F          F    F   HK   ޿   G      t    ޿   G      t       ޿   G      t    	      G
   t  t        G      F    F   t .   $   ޿   G      F    F   F   t +   Z  ,      F    F   )   0   ޼   G      F    F   t 6   ޿   G   x  ޿   G         x ޿   G      F       F    F   F   x ޿   F   G      F    F   x ޿   F    F   0   P      F   G      F    F   t X   0   Z      G         F    F   %t a         F   K       F    F!   4   j      G"      F    F#   k   x ޘ   p      G$   %      F    F!   F&   F'   t     z      G   (   t }      G)      F    F!   x ޿   G*   x  ޿   G+   x  ޿   G,   x  ޿   G-   x  ޖ      F    F.   j      ޿   F    5   K.   ޼/   /      F    F.   x ޿   F    F.   e   0   f    1   f   K2      ޿   G3   x  ޿   G      4      F    F5   F6   %7   %x ޿   G      8   x ޿   G9   x  ޿   G:   x  ޘ         F    F;   .'K;   ޿   F    F;      F    F<   *         G      F    F   t       G      F    F   x ޿   F       G=      F>   dt K   ޖ   $         G      ?   x ޖ    `P ? P`P 
P('`P 
P P) P.`P 
P 8P 3`P 'P)-,
P$ 
P$8 
P$K P$+ /P &`P  P$ /&!`P ( `P 
P. 2`P P.7`P  P$ &,`P 
P$.,
P$,
P$,
P$,
P)`P & !P$2 $* ,
P$ 
P$M 
P$@,
P$,
P.`P $ D`P  P$  &:`P P$- &P $`P 
P)>P    5!!!!      
  2 e * e      4    !!!!   
      	             !!!!       
            ;
   E  F          G        3  P                    	       $            G    t     ޿   G   e    x ޼           ޗ
        J              H        HF      K   ޾     HF   G   t    G   t  #      ޿   G        Ht    ޾  .'  ޘ[    8          ޳  ޿   G      	     %x ϖ$   %A`P,
P(`P 
P$ `P `P&fP `P P) P.P P)`P |+`P 
P*<P         +          F                      
    5!!!!      
               !!!!   
      	             !!!!       
            ;
   X  Y          Z        1  N                    	       $            G    t     ޿   G   e    x ޼           ޗ
        J              H        HF      K   ޾     HF   G   t    G   t  #      ޿   G        Ht    ޾  .'  ޘ]    8          ޳  ޿   G      	     %x ϖ$   %`P,
P(`P 
P$ `P `P&fP `P 
P) 
P.P P)`P o+`P 
P*>P        +          F                      
    5!!!!      
   m  m      Ԩ    !!!!   
             !!!!       !!  !!    !!!!       !!  !!    !!!!       
            ;   E     <             ,                    	            
 l       F   X      5      G   t  9      ޼    G         5      9      x ޖ            ޳  ϖ   %`P `P%,P-`P 9-P#P G P    y                 l     
    5!!!!    	 
   # y #       
    5!!!!    	 
  9  1     ;   
    5!!!!    	  
            
    5!!!!      
               !!!!   
      	                !!!!       
            ;!   .      R     M    A  @  b  c  5              w    3    N  E   d    Y                                                    U     F    F         ޿   F    F   F   &   
      F    F   F   J            ޿   G   t           ޿   F    F      W        ޿   G   t    ޿   G   t    ޿   G	     t    $         $      G	     t    (         (      G
     t    ,      F    F   F   J      3   ޿   G      F    F        F    F   F   F   x ޿   G      F    F        F    F   F   F   t I      #   K      G      x ޘ   N      F    F   F   &   S      F    F   F   J   Y   `   Z      F    F   F   G      F    F   F   J   t   ޿   F   G     x ޖi      G   t     m   ޿   G   t  p   ޖp      G      F    F   x ޿   F       G      F      F    F   F   t K   ޘ         ޳  ޿   G            %x ޼   G      F    F   x ޿   F       G      F      F    F   F   t K   ϖ   %`P yP  )`P&`P,
P(`P,
P(`P 
P P P @ 
P$l 
P)i `P 
P.#`P [`P %P(6`P P)`P,
P P.`P P$, %P K+`P 
P$( P$, %P/CP      b                U    
    5!!!!      
   !          # 	   !!!!      
            !!!!    	   y  q     {  
 
    5!!!!    	    %  %      
 
    5!!!!    	    p  h     r  
 
    5!!!!    	          ֳ  
 
    5!!!!    	    C  C      
    5!!!!       t  l       v    !!!!   
      	                 !!!!       
            ;              ,  G                                    F   F      ޼   F   F     ޼   F   F     ޼   F   O   ޼    F   O   ޼   F   O     ޫ         t   ޘ          ޳    ϖ            ޼    F      K      ޾        ޼   F     K      ޾        ޼   F     K      ޾   `P `P `P `P   %`P,`P)P +`P -`P    $Q                     x        
    5!!!!       
            !!!!   	  
               
    5;                 g        E         G                            9     "        F   F         ޼   F   k   K   
          F   F         ޼   F   k   K             F   F         ޼   F   k   K      ޼   F   F          ޼   F   k   K   #   ޼   F   F      '   ޼   F   k   K   *   ޼	   F
      ޼	   k   K
          F   L   3     k     ޾     ޾     F   F   K   ޼     K   ϖ9    &`P% p% {% g  I  h`P `P  X%    `P # P       T  B   5!!!!     
    K   K      Ҹ    !!!!   
      	              ;   .    -  h        v                                    	    F    F      ޿   F     H    A      ޾     -      ޼   G        %   % %t    ޤ `P  `P `P P)P   
    5;  E             -  >      ?    @     ^   `                   A    B    C    D    E        F    G    H    I    J                                              !                   K    L  M    N      O  P          Q  R        S    T        U    V    W  X    Y  Z    [     \    ]    ^            _    a       .  /  0                            1            2           !  "  #  $  %  &  '  (  )  *  +  ,  -  .  /  0  1  2  3  4  5  6  7  8  9  :  ;  <  =  3  4  5  6  7  8  9  :  ;  <  =  >  ?  @  A  B  C  D  E  F  G  H  I  J  K  L  M  N  O  P  Q  R  S  T  U  V  W  X  Y  Z  [  \  ]  U   ^  _  `  a  b  c  d  e  f  g  h  i  j  k  l  m  n  o  p  q  r  s  t  u  v  w  x  y  z  {  |  }  ~                      C                                 _           ޼    5   5   9   9   9   9   9   9   5       F            9   9	       F
         ޼    F   F      9   5       F   F   9   9   9   9   9   9   9      9      9      9      9   5   5      9    9!   9"   5   #   9    9!   9$   5   %   9    9!   9&   5	   '   9    9!   9(   5
   )   9    9!   9*   5   +   9    9!   9,   5      9    9!   9-   5      9    9!   9.   9/      90   91   e    92   e    93   94   95   5   e    96   97   98   99   9:   9;   9<   29=   9>   9?   5   d9@   9A   9B   
9C   9D   29E   9F   5   9G   9H   5   e    9I   e   J   f    9K   e   J   f    L   f   M   f   9N   e   O   f    L   f   M   f   9P   e   M   f    9Q   e   R   f    S   f   9T   e      f    9U   e      f    9V   e      f    W   f   X   f   Y   f   9Z   e   X   f    9[   e   X   f    9\   e   ]   f    9^   e      f    _   f   9`   9a   5   e   b   f    c   f   9I   i   9K   e   d   f    e   f   f   f   9N   i   9P   i   9Q   e    9T   e    9U   e   g   f    h   f   9V   e   J   f    b   f   i   f   j   f   9Z   e    9[   e   k   f    9\   e    9^   i   9`   9l   m   9n   o   9p   q   9r   s   9t   9u   5   9v   9w   9x   y   9z   {   9|   {   9}   9~   k   9   k   9   5   k   9   k   9   k   9   k   9   k   9   k    9   k!   9   k"   9   k#   9   k$   9   k%   9   k&   9   k'   9   9   5(   k)   9   k*   9T   k+   9   k,   9   k-   9   k.   9   9   5/   k0   9   k1   9   k2   9   k3   9   k4   9   k5   9   k6   9   k7   9   k8   9   k9   9   k:   9   k;   9   k<   9   k=   9   k>   9   k?   9   k@   9   kA   9   kB   9   kC   9   kD   9   kE   9   kF   9   kG   9   kH   9   kI   9   kJ   9   kK   9   kL   9   kM   9   kN   9   kO   9   kP   9   9   kQ   9   kR   9   kS   9   kT   9   kU   9   kV   9   kW   9   kX   9   kY   9   kZ   9   k[   9   k\   9   k]   9   k^   9   k_   9   k`   9   ka   9   kb   9   kc   9   kd   9   ke   9   kf   9   kg   9   kh   9   ki   9   kj   9   kk   9   kl   9   km   9   kn   9   ko   9   kp   9   kq   9   kr   9   ks   9   kt   9   ku   9   kv   9   kw   9   kx   9   ky   9   kz   9   k{   9   k|   9   k}   9   k~   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9   k   9  k   9  k   9  k   9  k   9  k   9  k   9  k   9  k   9	  k   9
  k   9  k   9  K     ޿   G  x  ޤ. 2`P*%&	&'',	% !& 9% '&
&
&&+**$**%	%*+
%*+
%*+
%*+
%*+
%*+
%*+
%	* *&**&&%/&&&&&'&&%'(''',$%+%*%/%**/%
**/%/%*/
%/%/%***/	%/	%/	%/%* 	%%*/* R%**/*x*  **%*/%***/	*%/*/  ***)*H*&*&&**/* s* %
* * Q*  * m* 0* 7* **  *^* * |/  %* m* * * * 	o/ %* * * * *  *  * A*N* * *  *  * %*  *  * *  *t*w*k*o* h*I*T*  *  *  *y*]*c* * / * 	* * * j* *  * =* *\* _*  *|*  *  *q*  * *  *  * *  *  *  * * *H* *  *  *n* p*U*g*Y*k*  *  *  * *  * *Y*2*>*  *,*1*9*6*  *  * s*  *r*  *)*7* * )* * [* * Y* x* * */*  * *  * ;* a* 3* * q* F* 	}* V* Q*  *  *  * * $*    `P,
P$P    5;          D   E   F   G      H          I   J   K      L   M   N   O   P   m  j             (              (             k   k   k   k   k   ׹           ޼       K   ޼              H      k      M޼       H7      9      9   7   9	   K
   ޼            x ޹   k	      ޼      x  ޫE      k
   K   ޼   k   K   ޼   k   K   ޼   k   K   ޘ)   !          ޼      K   Ζ$   k    0t k       x ޤ0%`P+ m`P - { *,* P)V`P+ *`P `P           	+`P@  `P' NP%+~P$	P       5                E   &~lř      ^Rj^RkAh^   8    :https://cdn.segmentify.com/account-js/segmentify_n11.js necko:classified 1 strongly-framed 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAAAAgAAAAAAAAAAAAAAAAAAAAEANAFmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAbdMIIG2TCCBcGgAwIBAgIQbQb49PkVuLRS190ChlRJMDANBgkqhkiG9w0BAQsFADCBkDELMAkGA1UEBhMCR0IxGzAZBgNVBAgTEkdyZWF0ZXIgTWFuY2hlc3RlcjEQMA4GA1UEBxMHU2FsZm9yZDEaMBgGA1UEChMRQ09NT0RPIENBIExpbWl0ZWQxNjA0BgNVBAMTLUNPTU9ETyBSU0EgRG9tYWluIFZhbGlkYXRpb24gU2VjdXJlIFNlcnZlciBDQTAeFw0xODA2MDQwMDAwMDBaFw0yMDA2MTIyMzU5NTlaMF0xITAfBgNVBAsTGERvbWFpbiBDb250cm9sIFZhbGlkYXRlZDEdMBsGA1UECxMUUG9zaXRpdmVTU0wgV2lsZGNhcmQxGTAXBgNVBAMMECouc2VnbWVudGlmeS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDZJ9WQGFyOePpV5Z+FDcoYDiGVel7QWpG0aMK0VN1ArMEgZmePv2F713b7TDuOzgrn/rao8PZYgr1Xj7Fb9YVX9I7Ebo0Zf25HNYQEMbajZWmkkwVHwTeH6istDXslXyNzU2zs+jpdERUIGUA5Dd7yg7Q4t7bAFPoBKbtgGa+NGaTk7sYGDUyBqudW7NyBarZAaD6Ii0io0QQpwkasCvRjBM5yzQdcJPfIqG9j+s4ljLIuhDtrz5l/Ygf8li3AFMEI6oFa37OxRLgEHvuPB/sw07rbw4YkPO92n7lkJZAbr2+PSEXfknPy2mQMXzecx3ZXeV/QngNMDQ0wPeQAKrdlAgMBAAGjggNfMIIDWzAfBgNVHSMEGDAWgBSQr2o6lFoL2JDqElZz30O0Oija5zAdBgNVHQ4EFgQUJQKijW7ekOcaTWRTFMZb8QUHAIEwDgYDVR0PAQH/BAQDAgWgMAwGA1UdEwEB/wQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCME8GA1UdIARIMEYwOgYLKwYBBAGyMQECAgcwKzApBggrBgEFBQcCARYdaHR0cHM6Ly9zZWN1cmUuY29tb2RvLmNvbS9DUFMwCAYGZ4EMAQIBMFQGA1UdHwRNMEswSaBHoEWGQ2h0dHA6Ly9jcmwuY29tb2RvY2EuY29tL0NPTU9ET1JTQURvbWFpblZhbGlkYXRpb25TZWN1cmVTZXJ2ZXJDQS5jcmwwgYUGCCsGAQUFBwEBBHkwdzBPBggrBgEFBQcwAoZDaHR0cDovL2NydC5jb21vZG9jYS5jb20vQ09NT0RPUlNBRG9tYWluVmFsaWRhdGlvblNlY3VyZVNlcnZlckNBLmNydDAkBggrBgEFBQcwAYYYaHR0cDovL29jc3AuY29tb2RvY2EuY29tMCsGA1UdEQQkMCKCECouc2VnbWVudGlmeS5jb22CDnNlZ21lbnRpZnkuY29tMIIBfgYKKwYBBAHWeQIEAgSCAW4EggFqAWgAdwDuS723dc5guuFCaR+r4Z5mow9+X7By2IMAxHuJeqj9ywAAAWPJ2X+RAAAEAwBIMEYCIQCI1a98JhPvwfu8mhw3jEkvkAhDj1C1H7siA0lmoS67dgIhAO9PapVE69amVYVz/0WzsVA30r7Oxfpe1TBmEThDuLQEAHYAXqdz+d9WwOe1Nkh90EngMnqRmgyEoRIShBh1loFxRVgAAAFjydmAOgAABAMARzBFAiEAtTc+/i3YUZpYF7ZVeGdal+QF/GjZ1rIIAEZto0FCtD4CIDIUEZewJJOsSg0tcB7p+pVHfv8Bo9y6qv2U7f9AS+7mAHUAVYHUwhaQNgFK6gubVzxT8MDkOHhwJQgXL6OqHQcT0wwAAAFjydl/tgAABAMARjBEAiBNZ0Q2RIK5qt4VV150pFCM0j5x0jWYQm3zqifSs/z6MwIgRsqVfRDqin3OK13Ye8kcjwyBKoXT7tOvWutovvsofaQwDQYJKoZIhvcNAQELBQADggEBAGMKWhZF5H11lfbHVvZz2d9tB/J6cE293MWcQsI84C00UEXVDO9t191NQaBqm4J2Y6qVu3dcLqOBi055jADx3pVNsxFpHsKDxnGwbbMxq18+OT59TYthDCiNhnx3GO3OKT7Gi+LEHLf5T9tBmw9CBCoU0uEbaf0bSm+zRTTORwqbFPPhBctsnlV8gzsfYnoeQB69QRugzU1UOTAtDm0UV4dZbjYGjaHGgc0KVOeJfi0E9srknMWGztBdIV79UCVXTN2EecTPreAt6SbaIrJA21WNS3rWUdXQblNc7umKkdfc6nVGI7QxDdOqfIPAPz7RUmNMvlCMRazjyW1x1KkGXW0TAgAEAAAAAAEBAAAAAAAABngyNTUxOQAAAA5SU0EtUFNTLVNIQTI1NgADZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAG3TCCBtkwggXBoAMCAQICEG0G+PT5Fbi0UtfdAoZUSTAwDQYJKoZIhvcNAQELBQAwgZAxCzAJBgNVBAYTAkdCMRswGQYDVQQIExJHcmVhdGVyIE1hbmNoZXN0ZXIxEDAOBgNVBAcTB1NhbGZvcmQxGjAYBgNVBAoTEUNPTU9ETyBDQSBMaW1pdGVkMTYwNAYDVQQDEy1DT01PRE8gUlNBIERvbWFpbiBWYWxpZGF0aW9uIFNlY3VyZSBTZXJ2ZXIgQ0EwHhcNMTgwNjA0MDAwMDAwWhcNMjAwNjEyMjM1OTU5WjBdMSEwHwYDVQQLExhEb21haW4gQ29udHJvbCBWYWxpZGF0ZWQxHTAbBgNVBAsTFFBvc2l0aXZlU1NMIFdpbGRjYXJkMRkwFwYDVQQDDBAqLnNlZ21lbnRpZnkuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2SfVkBhcjnj6VeWfhQ3KGA4hlXpe0FqRtGjCtFTdQKzBIGZnj79he9d2+0w7js4K5/62qPD2WIK9V4+xW/WFV/SOxG6NGX9uRzWEBDG2o2VppJMFR8E3h+orLQ17JV8jc1Ns7Po6XREVCBlAOQ3e8oO0OLe2wBT6ASm7YBmvjRmk5O7GBg1MgarnVuzcgWq2QGg+iItIqNEEKcJGrAr0YwTOcs0HXCT3yKhvY/rOJYyyLoQ7a8+Zf2IH/JYtwBTBCOqBWt+zsUS4BB77jwf7MNO628OGJDzvdp+5ZCWQG69vj0hF35Jz8tpkDF83nMd2V3lf0J4DTA0NMD3kACq3ZQIDAQABo4IDXzCCA1swHwYDVR0jBBgwFoAUkK9qOpRaC9iQ6hJWc99DtDoo2ucwHQYDVR0OBBYEFCUCoo1u3pDnGk1kUxTGW/EFBwCBMA4GA1UdDwEB/wQEAwIFoDAMBgNVHRMBAf8EAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjBPBgNVHSAESDBGMDoGCysGAQQBsjEBAgIHMCswKQYIKwYBBQUHAgEWHWh0dHBzOi8vc2VjdXJlLmNvbW9kby5jb20vQ1BTMAgGBmeBDAECATBUBgNVHR8ETTBLMEmgR6BFhkNodHRwOi8vY3JsLmNvbW9kb2NhLmNvbS9DT01PRE9SU0FEb21haW5WYWxpZGF0aW9uU2VjdXJlU2VydmVyQ0EuY3JsMIGFBggrBgEFBQcBAQR5MHcwTwYIKwYBBQUHMAKGQ2h0dHA6Ly9jcnQuY29tb2RvY2EuY29tL0NPTU9ET1JTQURvbWFpblZhbGlkYXRpb25TZWN1cmVTZXJ2ZXJDQS5jcnQwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmNvbW9kb2NhLmNvbTArBgNVHREEJDAighAqLnNlZ21lbnRpZnkuY29tgg5zZWdtZW50aWZ5LmNvbTCCAX4GCisGAQQB1nkCBAIEggFuBIIBagFoAHcA7ku9t3XOYLrhQmkfq+GeZqMPfl+wctiDAMR7iXqo/csAAAFjydl/kQAABAMASDBGAiEAiNWvfCYT78H7vJocN4xJL5AIQ49QtR+7IgNJZqEuu3YCIQDvT2qVROvWplWFc/9Fs7FQN9K+zsX6XtUwZhE4Q7i0BAB2AF6nc/nfVsDntTZIfdBJ4DJ6kZoMhKESEoQYdZaBcUVYAAABY8nZgDoAAAQDAEcwRQIhALU3Pv4t2FGaWBe2VXhnWpfkBfxo2dayCABGbaNBQrQ+AiAyFBGXsCSTrEoNLXAe6fqVR37/AaPcuqr9lO3/QEvu5gB1AFWB1MIWkDYBSuoLm1c8U/DA5Dh4cCUIFy+jqh0HE9MMAAABY8nZf7YAAAQDAEYwRAIgTWdENkSCuareFVdedKRQjNI+cdI1mEJt86on0rP8+jMCIEbKlX0Q6op9zitd2HvJHI8MgSqF0+7Tr1rraL77KH2kMA0GCSqGSIb3DQEBCwUAA4IBAQBjCloWReR9dZX2x1b2c9nfbQfyenBNvdzFnELCPOAtNFBF1QzvbdfdTUGgapuCdmOqlbt3XC6jgYtOeYwA8d6VTbMRaR7Cg8ZxsG2zMatfPjk+fU2LYQwojYZ8dxjtzik+xovixBy3+U/bQZsPQgQqFNLhG2n9G0pvs0U0zkcKmxTz4QXLbJ5VfIM7H2J6HkAevUEboM1NVDkwLQ5tFFeHWW42Bo2hxoHNClTniX4tBPbK5JzFhs7QXSFe/VAlV0zdhHnEz63gLekm2iKyQNtVjUt61lHV0G5TXO7pipHX3Op1RiO0MQ3TqnyDwD8+0VJjTL5QjEWs48ltcdSpBl1tZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAGDDCCBggwggPwoAMCAQICECsuburZdTZsFIpu26N8jAcwDQYJKoZIhvcNAQEMBQAwgYUxCzAJBgNVBAYTAkdCMRswGQYDVQQIExJHcmVhdGVyIE1hbmNoZXN0ZXIxEDAOBgNVBAcTB1NhbGZvcmQxGjAYBgNVBAoTEUNPTU9ETyBDQSBMaW1pdGVkMSswKQYDVQQDEyJDT01PRE8gUlNBIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MB4XDTE0MDIxMjAwMDAwMFoXDTI5MDIxMTIzNTk1OVowgZAxCzAJBgNVBAYTAkdCMRswGQYDVQQIExJHcmVhdGVyIE1hbmNoZXN0ZXIxEDAOBgNVBAcTB1NhbGZvcmQxGjAYBgNVBAoTEUNPTU9ETyBDQSBMaW1pdGVkMTYwNAYDVQQDEy1DT01PRE8gUlNBIERvbWFpbiBWYWxpZGF0aW9uIFNlY3VyZSBTZXJ2ZXIgQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCOwgIZ4aBZpOs4NY0s/QHQ00nAZMcLYgVFFjqooMAMAn8dzNvEoW13A6MPhvnjBpw+C4GKm0kbrQO++kvbjCDt1c5eZY4+Da9MwrC3RV5SLzTeSCRktEGuAJf3vmfentB6p1OAO3yt9ZZVb5dHCnyFiyKXjbOE4JZX0HAYYJaP7i0Hk52husrRzXvpxCqaKCGRTW+STyWl8no13SbcRqXQrFk1jP9OkUNQP1mTHmxRIe5YFKv+dVB4PkywHIYT+muYvOA7lB6FUtwDkyQYbssnUUXmcN4lQ6QN4Uql7bZ+yM1t7i4dJ3Nd3EUwgKrjskELr71Eh9q55Rudf67lhYKlAgMBAAGjggFlMIIBYTAfBgNVHSMEGDAWgBS7r34CPfqm8TyEjq3uOJjs2TIy1DAdBgNVHQ4EFgQUkK9qOpRaC9iQ6hJWc99DtDoo2ucwDgYDVR0PAQH/BAQDAgGGMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMBsGA1UdIAQUMBIwBgYEVR0gADAIBgZngQwBAgEwTAYDVR0fBEUwQzBBoD+gPYY7aHR0cDovL2NybC5jb21vZG9jYS5jb20vQ09NT0RPUlNBQ2VydGlmaWNhdGlvbkF1dGhvcml0eS5jcmwwcQYIKwYBBQUHAQEEZTBjMDsGCCsGAQUFBzAChi9odHRwOi8vY3J0LmNvbW9kb2NhLmNvbS9DT01PRE9SU0FBZGRUcnVzdENBLmNydDAkBggrBgEFBQcwAYYYaHR0cDovL29jc3AuY29tb2RvY2EuY29tMA0GCSqGSIb3DQEBDAUAA4ICAQBOK3ZPkhxiNom6d8EnBfQc1kSdqZo+qtVmZgE+6knmojW8+vbdlY6ZNZgONhh1sd3dUHJ8rtx3iM4P95AgyqNnLh9Wf3vhROpClcRdDQFQRhXygYlZbIrdjPESoY06QoqY+Es0eyc7CLRvJDtynWN0WDwabD9PxxGayKj1tTfvEEXGbNngXpUms+uto7nufwyaZjVzMmBO5d2KYSxuUhF3aJbTGHVRFQAbdIjd4cc4BEMo6Rb92QXUXUcnYNb7ODtscqKU+EIa3+1vBoxFwgYAquTo3Nm14XN47PYj3NHdbI4aj6XqVHyWt8P+VY6NSV78ZLvPPr2W62nNv+BI8WKCEOUMRlfyM9rQyGPtxh+UBZZKGpHR9+vPj1KuDQjZPqigUenBh3TVyfd0qy5T+7t6+5fi+B8mj7PSoOA3Wyg7MeUOVy1auK15rF4gZhqluaa1OcH1mEP/7vmnp/3uyiQ9gBbEF4+KwWChDK5bQ0eRS9WaF1/51IfBwoy35+IPMBk3hqzg3EID5pSona79DyRRlM6SCNH8UPADQHuIWe0O3azSd4I03AaVAtiQ+S3qN9UaYNBnINfYQgtFr4Jo3t1mJDeQKZQZRhkluIDXy9SGKGpEcCYjYqmfhm+/upBw0lZ3hXjv6iWpF85QcowAOqrj22M0n/gGcQHigiDU/m+9sWYKMiaRXE/7uyCJhaYy3wW9w5eaVCJM1YWJaWtuluqDAAAAAAAABdwwggXYMIIDwKADAgECAhBMqvnK22Nv4B/3TthbA4adMA0GCSqGSIb3DQEBDAUAMIGFMQswCQYDVQQGEwJHQjEbMBkGA1UECBMSR3JlYXRlciBNYW5jaGVzdGVyMRAwDgYDVQQHEwdTYWxmb3JkMRowGAYDVQQKExFDT01PRE8gQ0EgTGltaXRlZDErMCkGA1UEAxMiQ09NT0RPIFJTQSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw0xMDAxMTkwMDAwMDBaFw0zODAxMTgyMzU5NTlaMIGFMQswCQYDVQQGEwJHQjEbMBkGA1UECBMSR3JlYXRlciBNYW5jaGVzdGVyMRAwDgYDVQQHEwdTYWxmb3JkMRowGAYDVQQKExFDT01PRE8gQ0EgTGltaXRlZDErMCkGA1UEAxMiQ09NT0RPIFJTQSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAJHoVJLSClaxrA0k3cXPRGd0mSs3o30jcABxvFPfxPoqEo9LfxBWvZ9wcrdhf8lLDxenPeOwBGHu/xGXx/SGPgr6Plz5k+Y0etkUa+ecs4Wggnp2r3GQ1+z9DfqcbPrfsIL0FH75vsSmL09/mX+1/GdDcr0MANaJ62ss0+2PmBwUq37l42782KjkkiTaQ2tiuFX96sG8bLaL8w6NmuSbbGmZ+HhIMEXVreENPEVg/DKWUSe8Z8PKLrZr6kbHxyCgsR9l3kgIuqROqfKDRjeE6+jMgUhDZ05yKptcvUwbKIpcInu0q5jZ7uBRg8MJRk5tPpn6lRfafDNXQTyNUe0LtlyvLGMa31fIP7zpXcSbr0WZ4qNaJLS6qVY9z2+q/0lYvvCo//S4rek3+7q49As6+ehDQh6J2ITLE/HZu+GJYLiMKFasFB2cCudx688O3T2plqFIvTz3r7UNIkzAEYHsVjv206LiW7eyBCJSlYCTaeiOTGXxkQMtcHQC6otnFSlpUgK7199QalVGv6CjKGF/cNDDoqosIapHziicBkV2v4IYJ7TVrrTLUOZr9EyGcTDppt8WhuDY/0Dd+9BCiH+jMzouXB5BEYFjzhhxayvspoq3MVw6akfgw3lZ1iAar/JqmKpyvFdK0kuduxD8sExB5e0dPV4onZzMv7NR2qdH5YRTAgMBAAGjQjBAMB0GA1UdDgQWBBS7r34CPfqm8TyEjq3uOJjs2TIy1DAOBgNVHQ8BAf8EBAMCAQYwDwYDVR0TAQH/BAUwAwEB/zANBgkqhkiG9w0BAQwFAAOCAgEACvHVRoS3rlG7bLJNQRQAk0ycy+XAVM+gJY4C+f2wog31IJg8Ey2sVqKw1n4Rkukuup4umnKxvRlEbGE1opq0FhJpWozh1z6kGugvA/SuYR0QGyqki3rF/gWm4cDWyP6ero8ruj2Z+NhzCVhGbqac9Ncn05XaN4NyHNNz4KJHmQM4XdVJeQApHMfsmyAcByRpV3iyOfw6hKC1nHyNvy6TYie3OdoXGK69PAlo/4SbPNXWCwPjV54U99HrT8i9hyO3tklDeYVcuuuSC6HG6GioTBaxGpkK6FMskruhCRh1DGWoe8sjtxrCKIXDG//QK2LvpHsJkZhnjBQBzWgGamMhdQOAiIpugcaF8qmkLef0pSQQR4PKzfSNeVixBpvnGirZnQHXlH3tA0rK8NvoqQE+9VaZyR6OST275Qm54E9Jkj0WgkDMzFnG5jrtEi5pPGyVsf2qHXt/hr4eDjJG+/sTj3V/TItLRmP+ADRAcMHDuaHdpnDiBLNBvOmAkepknHrhIgOpnG5vDmVPbIeHXvNuoPl1pZtA6FOyJ51KucB3IY3/h/LevIzvF9+3SQvR8m4wCxoOTnbtEfz16Vayfb/HbQqTjKXQwLYdvjpOlKLXbmwLwop8+iDzxOTlzQ2oy5GSsXyF7LUUaWYOgufNzsgtplF/IcE1U4UGSl2frbsbX3QAAAABAAAAAmgyAA== request-method GET response-head HTTP/2 200 OK
date: Fri, 24 Apr 2020 20:55:30 GMT
content-type: application/javascript
content-length: 131431
last-modified: Mon, 11 Nov 2019 17:51:28 GMT
etag: "5dc99fa0-20167"
expires: Sat, 25 Apr 2020 20:55:30 GMT
cache-control: max-age=86400
x-mserver: 4200
server: MNCDN-4138
x-edge-location: TR-764
access-control-allow-origin: *
access-control-allow-methods: GET, POST, PUT, DELETE
access-control-allow-headers: Content-Type, Accept, Authorization, X-Switch-User, X-Switch-Account
x-cache-status: Edge : HIT,
accept-ranges: bytes
X-Firefox-Spdy: h2
 original-response-headers date: Fri, 24 Apr 2020 20:55:30 GMT
content-type: application/javascript
content-length: 131431
last-modified: Mon, 11 Nov 2019 17:51:28 GMT
etag: "5dc99fa0-20167"
expires: Sat, 25 Apr 2020 20:55:30 GMT
cache-control: max-age=86400
x-mserver: 4200
server: MNCDN-4138
x-edge-location: TR-764
access-control-allow-origin: *
access-control-allow-methods: GET, POST, PUT, DELETE
access-control-allow-headers: Content-Type, Accept, Authorization, X-Switch-User, X-Switch-Account
x-cache-status: Edge : HIT,
accept-ranges: bytes
X-Firefox-Spdy: h2
 ctid 2 uncompressed-len 0 net-response-time-onstart 697 net-response-time-onstop 879 alt-data 1;131431,javascript/moz-bytecode-20200403170909 alt-data-from-child 1  